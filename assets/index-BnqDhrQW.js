(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const h of u.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&r(h)}).observe(document,{childList:!0,subtree:!0});function e(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function r(o){if(o.ep)return;o.ep=!0;const u=e(o);fetch(o.href,u)}})();var ig={exports:{}},pu={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var OE;function m1(){if(OE)return pu;OE=1;var s=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function e(r,o,u){var h=null;if(u!==void 0&&(h=""+u),o.key!==void 0&&(h=""+o.key),"key"in o){u={};for(var m in o)m!=="key"&&(u[m]=o[m])}else u=o;return o=u.ref,{$$typeof:s,type:r,key:h,ref:o!==void 0?o:null,props:u}}return pu.Fragment=t,pu.jsx=e,pu.jsxs=e,pu}var ME;function g1(){return ME||(ME=1,ig.exports=m1()),ig.exports}var wt=g1(),rg={exports:{}},Rt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var PE;function p1(){if(PE)return Rt;PE=1;var s=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),e=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),h=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),_=Symbol.for("react.memo"),E=Symbol.for("react.lazy"),A=Symbol.iterator;function S(V){return V===null||typeof V!="object"?null:(V=A&&V[A]||V["@@iterator"],typeof V=="function"?V:null)}var O={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},H=Object.assign,Z={};function Y(V,W,ot){this.props=V,this.context=W,this.refs=Z,this.updater=ot||O}Y.prototype.isReactComponent={},Y.prototype.setState=function(V,W){if(typeof V!="object"&&typeof V!="function"&&V!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,V,W,"setState")},Y.prototype.forceUpdate=function(V){this.updater.enqueueForceUpdate(this,V,"forceUpdate")};function mt(){}mt.prototype=Y.prototype;function ut(V,W,ot){this.props=V,this.context=W,this.refs=Z,this.updater=ot||O}var it=ut.prototype=new mt;it.constructor=ut,H(it,Y.prototype),it.isPureReactComponent=!0;var St=Array.isArray,ft={H:null,A:null,T:null,S:null,V:null},Tt=Object.prototype.hasOwnProperty;function N(V,W,ot,et,_t,Vt){return ot=Vt.ref,{$$typeof:s,type:V,key:W,ref:ot!==void 0?ot:null,props:Vt}}function w(V,W){return N(V.type,W,void 0,void 0,void 0,V.props)}function D(V){return typeof V=="object"&&V!==null&&V.$$typeof===s}function x(V){var W={"=":"=0",":":"=2"};return"$"+V.replace(/[=:]/g,function(ot){return W[ot]})}var M=/\/+/g;function U(V,W){return typeof V=="object"&&V!==null&&V.key!=null?x(""+V.key):W.toString(36)}function R(){}function He(V){switch(V.status){case"fulfilled":return V.value;case"rejected":throw V.reason;default:switch(typeof V.status=="string"?V.then(R,R):(V.status="pending",V.then(function(W){V.status==="pending"&&(V.status="fulfilled",V.value=W)},function(W){V.status==="pending"&&(V.status="rejected",V.reason=W)})),V.status){case"fulfilled":return V.value;case"rejected":throw V.reason}}throw V}function de(V,W,ot,et,_t){var Vt=typeof V;(Vt==="undefined"||Vt==="boolean")&&(V=null);var At=!1;if(V===null)At=!0;else switch(Vt){case"bigint":case"string":case"number":At=!0;break;case"object":switch(V.$$typeof){case s:case t:At=!0;break;case E:return At=V._init,de(At(V._payload),W,ot,et,_t)}}if(At)return _t=_t(V),At=et===""?"."+U(V,0):et,St(_t)?(ot="",At!=null&&(ot=At.replace(M,"$&/")+"/"),de(_t,W,ot,"",function(ai){return ai})):_t!=null&&(D(_t)&&(_t=w(_t,ot+(_t.key==null||V&&V.key===_t.key?"":(""+_t.key).replace(M,"$&/")+"/")+At)),W.push(_t)),1;At=0;var Le=et===""?".":et+":";if(St(V))for(var ne=0;ne<V.length;ne++)et=V[ne],Vt=Le+U(et,ne),At+=de(et,W,ot,Vt,_t);else if(ne=S(V),typeof ne=="function")for(V=ne.call(V),ne=0;!(et=V.next()).done;)et=et.value,Vt=Le+U(et,ne++),At+=de(et,W,ot,Vt,_t);else if(Vt==="object"){if(typeof V.then=="function")return de(He(V),W,ot,et,_t);throw W=String(V),Error("Objects are not valid as a React child (found: "+(W==="[object Object]"?"object with keys {"+Object.keys(V).join(", ")+"}":W)+"). If you meant to render a collection of children, use an array instead.")}return At}function Q(V,W,ot){if(V==null)return V;var et=[],_t=0;return de(V,et,"","",function(Vt){return W.call(ot,Vt,_t++)}),et}function st(V){if(V._status===-1){var W=V._result;W=W(),W.then(function(ot){(V._status===0||V._status===-1)&&(V._status=1,V._result=ot)},function(ot){(V._status===0||V._status===-1)&&(V._status=2,V._result=ot)}),V._status===-1&&(V._status=0,V._result=W)}if(V._status===1)return V._result.default;throw V._result}var pt=typeof reportError=="function"?reportError:function(V){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var W=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof V=="object"&&V!==null&&typeof V.message=="string"?String(V.message):String(V),error:V});if(!window.dispatchEvent(W))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",V);return}console.error(V)};function Ft(){}return Rt.Children={map:Q,forEach:function(V,W,ot){Q(V,function(){W.apply(this,arguments)},ot)},count:function(V){var W=0;return Q(V,function(){W++}),W},toArray:function(V){return Q(V,function(W){return W})||[]},only:function(V){if(!D(V))throw Error("React.Children.only expected to receive a single React element child.");return V}},Rt.Component=Y,Rt.Fragment=e,Rt.Profiler=o,Rt.PureComponent=ut,Rt.StrictMode=r,Rt.Suspense=g,Rt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=ft,Rt.__COMPILER_RUNTIME={__proto__:null,c:function(V){return ft.H.useMemoCache(V)}},Rt.cache=function(V){return function(){return V.apply(null,arguments)}},Rt.cloneElement=function(V,W,ot){if(V==null)throw Error("The argument must be a React element, but you passed "+V+".");var et=H({},V.props),_t=V.key,Vt=void 0;if(W!=null)for(At in W.ref!==void 0&&(Vt=void 0),W.key!==void 0&&(_t=""+W.key),W)!Tt.call(W,At)||At==="key"||At==="__self"||At==="__source"||At==="ref"&&W.ref===void 0||(et[At]=W[At]);var At=arguments.length-2;if(At===1)et.children=ot;else if(1<At){for(var Le=Array(At),ne=0;ne<At;ne++)Le[ne]=arguments[ne+2];et.children=Le}return N(V.type,_t,void 0,void 0,Vt,et)},Rt.createContext=function(V){return V={$$typeof:h,_currentValue:V,_currentValue2:V,_threadCount:0,Provider:null,Consumer:null},V.Provider=V,V.Consumer={$$typeof:u,_context:V},V},Rt.createElement=function(V,W,ot){var et,_t={},Vt=null;if(W!=null)for(et in W.key!==void 0&&(Vt=""+W.key),W)Tt.call(W,et)&&et!=="key"&&et!=="__self"&&et!=="__source"&&(_t[et]=W[et]);var At=arguments.length-2;if(At===1)_t.children=ot;else if(1<At){for(var Le=Array(At),ne=0;ne<At;ne++)Le[ne]=arguments[ne+2];_t.children=Le}if(V&&V.defaultProps)for(et in At=V.defaultProps,At)_t[et]===void 0&&(_t[et]=At[et]);return N(V,Vt,void 0,void 0,null,_t)},Rt.createRef=function(){return{current:null}},Rt.forwardRef=function(V){return{$$typeof:m,render:V}},Rt.isValidElement=D,Rt.lazy=function(V){return{$$typeof:E,_payload:{_status:-1,_result:V},_init:st}},Rt.memo=function(V,W){return{$$typeof:_,type:V,compare:W===void 0?null:W}},Rt.startTransition=function(V){var W=ft.T,ot={};ft.T=ot;try{var et=V(),_t=ft.S;_t!==null&&_t(ot,et),typeof et=="object"&&et!==null&&typeof et.then=="function"&&et.then(Ft,pt)}catch(Vt){pt(Vt)}finally{ft.T=W}},Rt.unstable_useCacheRefresh=function(){return ft.H.useCacheRefresh()},Rt.use=function(V){return ft.H.use(V)},Rt.useActionState=function(V,W,ot){return ft.H.useActionState(V,W,ot)},Rt.useCallback=function(V,W){return ft.H.useCallback(V,W)},Rt.useContext=function(V){return ft.H.useContext(V)},Rt.useDebugValue=function(){},Rt.useDeferredValue=function(V,W){return ft.H.useDeferredValue(V,W)},Rt.useEffect=function(V,W,ot){var et=ft.H;if(typeof ot=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return et.useEffect(V,W)},Rt.useId=function(){return ft.H.useId()},Rt.useImperativeHandle=function(V,W,ot){return ft.H.useImperativeHandle(V,W,ot)},Rt.useInsertionEffect=function(V,W){return ft.H.useInsertionEffect(V,W)},Rt.useLayoutEffect=function(V,W){return ft.H.useLayoutEffect(V,W)},Rt.useMemo=function(V,W){return ft.H.useMemo(V,W)},Rt.useOptimistic=function(V,W){return ft.H.useOptimistic(V,W)},Rt.useReducer=function(V,W,ot){return ft.H.useReducer(V,W,ot)},Rt.useRef=function(V){return ft.H.useRef(V)},Rt.useState=function(V){return ft.H.useState(V)},Rt.useSyncExternalStore=function(V,W,ot){return ft.H.useSyncExternalStore(V,W,ot)},Rt.useTransition=function(){return ft.H.useTransition()},Rt.version="19.1.1",Rt}var UE;function ip(){return UE||(UE=1,rg.exports=p1()),rg.exports}var En=ip(),sg={exports:{}},_u={},ag={exports:{}},og={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var LE;function _1(){return LE||(LE=1,(function(s){function t(Q,st){var pt=Q.length;Q.push(st);t:for(;0<pt;){var Ft=pt-1>>>1,V=Q[Ft];if(0<o(V,st))Q[Ft]=st,Q[pt]=V,pt=Ft;else break t}}function e(Q){return Q.length===0?null:Q[0]}function r(Q){if(Q.length===0)return null;var st=Q[0],pt=Q.pop();if(pt!==st){Q[0]=pt;t:for(var Ft=0,V=Q.length,W=V>>>1;Ft<W;){var ot=2*(Ft+1)-1,et=Q[ot],_t=ot+1,Vt=Q[_t];if(0>o(et,pt))_t<V&&0>o(Vt,et)?(Q[Ft]=Vt,Q[_t]=pt,Ft=_t):(Q[Ft]=et,Q[ot]=pt,Ft=ot);else if(_t<V&&0>o(Vt,pt))Q[Ft]=Vt,Q[_t]=pt,Ft=_t;else break t}}return st}function o(Q,st){var pt=Q.sortIndex-st.sortIndex;return pt!==0?pt:Q.id-st.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;s.unstable_now=function(){return u.now()}}else{var h=Date,m=h.now();s.unstable_now=function(){return h.now()-m}}var g=[],_=[],E=1,A=null,S=3,O=!1,H=!1,Z=!1,Y=!1,mt=typeof setTimeout=="function"?setTimeout:null,ut=typeof clearTimeout=="function"?clearTimeout:null,it=typeof setImmediate<"u"?setImmediate:null;function St(Q){for(var st=e(_);st!==null;){if(st.callback===null)r(_);else if(st.startTime<=Q)r(_),st.sortIndex=st.expirationTime,t(g,st);else break;st=e(_)}}function ft(Q){if(Z=!1,St(Q),!H)if(e(g)!==null)H=!0,Tt||(Tt=!0,U());else{var st=e(_);st!==null&&de(ft,st.startTime-Q)}}var Tt=!1,N=-1,w=5,D=-1;function x(){return Y?!0:!(s.unstable_now()-D<w)}function M(){if(Y=!1,Tt){var Q=s.unstable_now();D=Q;var st=!0;try{t:{H=!1,Z&&(Z=!1,ut(N),N=-1),O=!0;var pt=S;try{e:{for(St(Q),A=e(g);A!==null&&!(A.expirationTime>Q&&x());){var Ft=A.callback;if(typeof Ft=="function"){A.callback=null,S=A.priorityLevel;var V=Ft(A.expirationTime<=Q);if(Q=s.unstable_now(),typeof V=="function"){A.callback=V,St(Q),st=!0;break e}A===e(g)&&r(g),St(Q)}else r(g);A=e(g)}if(A!==null)st=!0;else{var W=e(_);W!==null&&de(ft,W.startTime-Q),st=!1}}break t}finally{A=null,S=pt,O=!1}st=void 0}}finally{st?U():Tt=!1}}}var U;if(typeof it=="function")U=function(){it(M)};else if(typeof MessageChannel<"u"){var R=new MessageChannel,He=R.port2;R.port1.onmessage=M,U=function(){He.postMessage(null)}}else U=function(){mt(M,0)};function de(Q,st){N=mt(function(){Q(s.unstable_now())},st)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(Q){Q.callback=null},s.unstable_forceFrameRate=function(Q){0>Q||125<Q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):w=0<Q?Math.floor(1e3/Q):5},s.unstable_getCurrentPriorityLevel=function(){return S},s.unstable_next=function(Q){switch(S){case 1:case 2:case 3:var st=3;break;default:st=S}var pt=S;S=st;try{return Q()}finally{S=pt}},s.unstable_requestPaint=function(){Y=!0},s.unstable_runWithPriority=function(Q,st){switch(Q){case 1:case 2:case 3:case 4:case 5:break;default:Q=3}var pt=S;S=Q;try{return st()}finally{S=pt}},s.unstable_scheduleCallback=function(Q,st,pt){var Ft=s.unstable_now();switch(typeof pt=="object"&&pt!==null?(pt=pt.delay,pt=typeof pt=="number"&&0<pt?Ft+pt:Ft):pt=Ft,Q){case 1:var V=-1;break;case 2:V=250;break;case 5:V=1073741823;break;case 4:V=1e4;break;default:V=5e3}return V=pt+V,Q={id:E++,callback:st,priorityLevel:Q,startTime:pt,expirationTime:V,sortIndex:-1},pt>Ft?(Q.sortIndex=pt,t(_,Q),e(g)===null&&Q===e(_)&&(Z?(ut(N),N=-1):Z=!0,de(ft,pt-Ft))):(Q.sortIndex=V,t(g,Q),H||O||(H=!0,Tt||(Tt=!0,U()))),Q},s.unstable_shouldYield=x,s.unstable_wrapCallback=function(Q){var st=S;return function(){var pt=S;S=st;try{return Q.apply(this,arguments)}finally{S=pt}}}})(og)),og}var BE;function y1(){return BE||(BE=1,ag.exports=_1()),ag.exports}var lg={exports:{}},nn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kE;function v1(){if(kE)return nn;kE=1;var s=ip();function t(g){var _="https://react.dev/errors/"+g;if(1<arguments.length){_+="?args[]="+encodeURIComponent(arguments[1]);for(var E=2;E<arguments.length;E++)_+="&args[]="+encodeURIComponent(arguments[E])}return"Minified React error #"+g+"; visit "+_+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function e(){}var r={d:{f:e,r:function(){throw Error(t(522))},D:e,C:e,L:e,m:e,X:e,S:e,M:e},p:0,findDOMNode:null},o=Symbol.for("react.portal");function u(g,_,E){var A=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:A==null?null:""+A,children:g,containerInfo:_,implementation:E}}var h=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(g,_){if(g==="font")return"";if(typeof _=="string")return _==="use-credentials"?_:""}return nn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,nn.createPortal=function(g,_){var E=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!_||_.nodeType!==1&&_.nodeType!==9&&_.nodeType!==11)throw Error(t(299));return u(g,_,null,E)},nn.flushSync=function(g){var _=h.T,E=r.p;try{if(h.T=null,r.p=2,g)return g()}finally{h.T=_,r.p=E,r.d.f()}},nn.preconnect=function(g,_){typeof g=="string"&&(_?(_=_.crossOrigin,_=typeof _=="string"?_==="use-credentials"?_:"":void 0):_=null,r.d.C(g,_))},nn.prefetchDNS=function(g){typeof g=="string"&&r.d.D(g)},nn.preinit=function(g,_){if(typeof g=="string"&&_&&typeof _.as=="string"){var E=_.as,A=m(E,_.crossOrigin),S=typeof _.integrity=="string"?_.integrity:void 0,O=typeof _.fetchPriority=="string"?_.fetchPriority:void 0;E==="style"?r.d.S(g,typeof _.precedence=="string"?_.precedence:void 0,{crossOrigin:A,integrity:S,fetchPriority:O}):E==="script"&&r.d.X(g,{crossOrigin:A,integrity:S,fetchPriority:O,nonce:typeof _.nonce=="string"?_.nonce:void 0})}},nn.preinitModule=function(g,_){if(typeof g=="string")if(typeof _=="object"&&_!==null){if(_.as==null||_.as==="script"){var E=m(_.as,_.crossOrigin);r.d.M(g,{crossOrigin:E,integrity:typeof _.integrity=="string"?_.integrity:void 0,nonce:typeof _.nonce=="string"?_.nonce:void 0})}}else _==null&&r.d.M(g)},nn.preload=function(g,_){if(typeof g=="string"&&typeof _=="object"&&_!==null&&typeof _.as=="string"){var E=_.as,A=m(E,_.crossOrigin);r.d.L(g,E,{crossOrigin:A,integrity:typeof _.integrity=="string"?_.integrity:void 0,nonce:typeof _.nonce=="string"?_.nonce:void 0,type:typeof _.type=="string"?_.type:void 0,fetchPriority:typeof _.fetchPriority=="string"?_.fetchPriority:void 0,referrerPolicy:typeof _.referrerPolicy=="string"?_.referrerPolicy:void 0,imageSrcSet:typeof _.imageSrcSet=="string"?_.imageSrcSet:void 0,imageSizes:typeof _.imageSizes=="string"?_.imageSizes:void 0,media:typeof _.media=="string"?_.media:void 0})}},nn.preloadModule=function(g,_){if(typeof g=="string")if(_){var E=m(_.as,_.crossOrigin);r.d.m(g,{as:typeof _.as=="string"&&_.as!=="script"?_.as:void 0,crossOrigin:E,integrity:typeof _.integrity=="string"?_.integrity:void 0})}else r.d.m(g)},nn.requestFormReset=function(g){r.d.r(g)},nn.unstable_batchedUpdates=function(g,_){return g(_)},nn.useFormState=function(g,_,E){return h.H.useFormState(g,_,E)},nn.useFormStatus=function(){return h.H.useHostTransitionStatus()},nn.version="19.1.1",nn}var zE;function E1(){if(zE)return lg.exports;zE=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(t){console.error(t)}}return s(),lg.exports=v1(),lg.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qE;function T1(){if(qE)return _u;qE=1;var s=y1(),t=ip(),e=E1();function r(n){var i="https://react.dev/errors/"+n;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)i+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+n+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function u(n){var i=n,a=n;if(n.alternate)for(;i.return;)i=i.return;else{n=i;do i=n,(i.flags&4098)!==0&&(a=i.return),n=i.return;while(n)}return i.tag===3?a:null}function h(n){if(n.tag===13){var i=n.memoizedState;if(i===null&&(n=n.alternate,n!==null&&(i=n.memoizedState)),i!==null)return i.dehydrated}return null}function m(n){if(u(n)!==n)throw Error(r(188))}function g(n){var i=n.alternate;if(!i){if(i=u(n),i===null)throw Error(r(188));return i!==n?null:n}for(var a=n,l=i;;){var f=a.return;if(f===null)break;var d=f.alternate;if(d===null){if(l=f.return,l!==null){a=l;continue}break}if(f.child===d.child){for(d=f.child;d;){if(d===a)return m(f),n;if(d===l)return m(f),i;d=d.sibling}throw Error(r(188))}if(a.return!==l.return)a=f,l=d;else{for(var v=!1,T=f.child;T;){if(T===a){v=!0,a=f,l=d;break}if(T===l){v=!0,l=f,a=d;break}T=T.sibling}if(!v){for(T=d.child;T;){if(T===a){v=!0,a=d,l=f;break}if(T===l){v=!0,l=d,a=f;break}T=T.sibling}if(!v)throw Error(r(189))}}if(a.alternate!==l)throw Error(r(190))}if(a.tag!==3)throw Error(r(188));return a.stateNode.current===a?n:i}function _(n){var i=n.tag;if(i===5||i===26||i===27||i===6)return n;for(n=n.child;n!==null;){if(i=_(n),i!==null)return i;n=n.sibling}return null}var E=Object.assign,A=Symbol.for("react.element"),S=Symbol.for("react.transitional.element"),O=Symbol.for("react.portal"),H=Symbol.for("react.fragment"),Z=Symbol.for("react.strict_mode"),Y=Symbol.for("react.profiler"),mt=Symbol.for("react.provider"),ut=Symbol.for("react.consumer"),it=Symbol.for("react.context"),St=Symbol.for("react.forward_ref"),ft=Symbol.for("react.suspense"),Tt=Symbol.for("react.suspense_list"),N=Symbol.for("react.memo"),w=Symbol.for("react.lazy"),D=Symbol.for("react.activity"),x=Symbol.for("react.memo_cache_sentinel"),M=Symbol.iterator;function U(n){return n===null||typeof n!="object"?null:(n=M&&n[M]||n["@@iterator"],typeof n=="function"?n:null)}var R=Symbol.for("react.client.reference");function He(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===R?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case H:return"Fragment";case Y:return"Profiler";case Z:return"StrictMode";case ft:return"Suspense";case Tt:return"SuspenseList";case D:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case O:return"Portal";case it:return(n.displayName||"Context")+".Provider";case ut:return(n._context.displayName||"Context")+".Consumer";case St:var i=n.render;return n=n.displayName,n||(n=i.displayName||i.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case N:return i=n.displayName||null,i!==null?i:He(n.type)||"Memo";case w:i=n._payload,n=n._init;try{return He(n(i))}catch{}}return null}var de=Array.isArray,Q=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,st=e.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,pt={pending:!1,data:null,method:null,action:null},Ft=[],V=-1;function W(n){return{current:n}}function ot(n){0>V||(n.current=Ft[V],Ft[V]=null,V--)}function et(n,i){V++,Ft[V]=n.current,n.current=i}var _t=W(null),Vt=W(null),At=W(null),Le=W(null);function ne(n,i){switch(et(At,i),et(Vt,n),et(_t,null),i.nodeType){case 9:case 11:n=(n=i.documentElement)&&(n=n.namespaceURI)?oE(n):0;break;default:if(n=i.tagName,i=i.namespaceURI)i=oE(i),n=lE(i,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}ot(_t),et(_t,n)}function ai(){ot(_t),ot(Vt),ot(At)}function dr(n){n.memoizedState!==null&&et(Le,n);var i=_t.current,a=lE(i,n.type);i!==a&&(et(Vt,n),et(_t,a))}function xi(n){Vt.current===n&&(ot(_t),ot(Vt)),Le.current===n&&(ot(Le),hu._currentValue=pt)}var ms=Object.prototype.hasOwnProperty,gs=s.unstable_scheduleCallback,ps=s.unstable_cancelCallback,ll=s.unstable_shouldYield,vc=s.unstable_requestPaint,Un=s.unstable_now,id=s.unstable_getCurrentPriorityLevel,ul=s.unstable_ImmediatePriority,wa=s.unstable_UserBlockingPriority,_s=s.unstable_NormalPriority,rd=s.unstable_LowPriority,Ia=s.unstable_IdlePriority,cl=s.log,Ec=s.unstable_setDisableYieldValue,me=null,Qt=null;function Sn(n){if(typeof cl=="function"&&Ec(n),Qt&&typeof Qt.setStrictMode=="function")try{Qt.setStrictMode(me,n)}catch{}}var tn=Math.clz32?Math.clz32:ys,Tc=Math.log,sd=Math.LN2;function ys(n){return n>>>=0,n===0?32:31-(Tc(n)/sd|0)|0}var vs=256,Es=4194304;function Zn(n){var i=n&42;if(i!==0)return i;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function Ra(n,i,a){var l=n.pendingLanes;if(l===0)return 0;var f=0,d=n.suspendedLanes,v=n.pingedLanes;n=n.warmLanes;var T=l&134217727;return T!==0?(l=T&~d,l!==0?f=Zn(l):(v&=T,v!==0?f=Zn(v):a||(a=T&~n,a!==0&&(f=Zn(a))))):(T=l&~d,T!==0?f=Zn(T):v!==0?f=Zn(v):a||(a=l&~n,a!==0&&(f=Zn(a)))),f===0?0:i!==0&&i!==f&&(i&d)===0&&(d=f&-f,a=i&-i,d>=a||d===32&&(a&4194048)!==0)?i:f}function Ts(n,i){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&i)===0}function hl(n,i){switch(n){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function fl(){var n=vs;return vs<<=1,(vs&4194048)===0&&(vs=256),n}function dl(){var n=Es;return Es<<=1,(Es&62914560)===0&&(Es=4194304),n}function Oi(n){for(var i=[],a=0;31>a;a++)i.push(n);return i}function Mi(n,i){n.pendingLanes|=i,i!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function ml(n,i,a,l,f,d){var v=n.pendingLanes;n.pendingLanes=a,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=a,n.entangledLanes&=a,n.errorRecoveryDisabledLanes&=a,n.shellSuspendCounter=0;var T=n.entanglements,I=n.expirationTimes,z=n.hiddenUpdates;for(a=v&~a;0<a;){var K=31-tn(a),$=1<<K;T[K]=0,I[K]=-1;var q=z[K];if(q!==null)for(z[K]=null,K=0;K<q.length;K++){var F=q[K];F!==null&&(F.lane&=-536870913)}a&=~$}l!==0&&oi(n,l,0),d!==0&&f===0&&n.tag!==0&&(n.suspendedLanes|=d&~(v&~i))}function oi(n,i,a){n.pendingLanes|=i,n.suspendedLanes&=~i;var l=31-tn(i);n.entangledLanes|=i,n.entanglements[l]=n.entanglements[l]|1073741824|a&4194090}function gl(n,i){var a=n.entangledLanes|=i;for(n=n.entanglements;a;){var l=31-tn(a),f=1<<l;f&i|n[l]&i&&(n[l]|=i),a&=~f}}function mr(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function Da(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function gr(){var n=st.p;return n!==0?n:(n=window.event,n===void 0?32:RE(n.type))}function Ac(n,i){var a=st.p;try{return st.p=n,i()}finally{st.p=a}}var oe=Math.random().toString(36).slice(2),Ne="__reactFiber$"+oe,Se="__reactProps$"+oe,Ln="__reactContainer$"+oe,pl="__reactEvents$"+oe,ad="__reactListeners$"+oe,pr="__reactHandles$"+oe,bc="__reactResources$"+oe,As="__reactMarker$"+oe;function _r(n){delete n[Ne],delete n[Se],delete n[pl],delete n[ad],delete n[pr]}function Pi(n){var i=n[Ne];if(i)return i;for(var a=n.parentNode;a;){if(i=a[Ln]||a[Ne]){if(a=i.alternate,i.child!==null||a!==null&&a.child!==null)for(n=fE(n);n!==null;){if(a=n[Ne])return a;n=fE(n)}return i}n=a,a=n.parentNode}return null}function li(n){if(n=n[Ne]||n[Ln]){var i=n.tag;if(i===5||i===6||i===13||i===26||i===27||i===3)return n}return null}function ui(n){var i=n.tag;if(i===5||i===26||i===27||i===6)return n.stateNode;throw Error(r(33))}function un(n){var i=n[bc];return i||(i=n[bc]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function ye(n){n[As]=!0}var _l=new Set,Va={};function Jn(n,i){Ui(n,i),Ui(n+"Capture",i)}function Ui(n,i){for(Va[n]=i,n=0;n<i.length;n++)_l.add(i[n])}var Sc=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),wc={},bs={};function Ic(n){return ms.call(bs,n)?!0:ms.call(wc,n)?!1:Sc.test(n)?bs[n]=!0:(wc[n]=!0,!1)}function yr(n,i,a){if(Ic(i))if(a===null)n.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":n.removeAttribute(i);return;case"boolean":var l=i.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){n.removeAttribute(i);return}}n.setAttribute(i,""+a)}}function ci(n,i,a){if(a===null)n.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(i);return}n.setAttribute(i,""+a)}}function Qe(n,i,a,l){if(l===null)n.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(a);return}n.setAttributeNS(i,a,""+l)}}var Ss,Rc;function Li(n){if(Ss===void 0)try{throw Error()}catch(a){var i=a.stack.trim().match(/\n( *(at )?)/);Ss=i&&i[1]||"",Rc=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ss+n+Rc}var Ca=!1;function Na(n,i){if(!n||Ca)return"";Ca=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(i){var $=function(){throw Error()};if(Object.defineProperty($.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct($,[])}catch(F){var q=F}Reflect.construct(n,[],$)}else{try{$.call()}catch(F){q=F}n.call($.prototype)}}else{try{throw Error()}catch(F){q=F}($=n())&&typeof $.catch=="function"&&$.catch(function(){})}}catch(F){if(F&&q&&typeof F.stack=="string")return[F.stack,q.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var d=l.DetermineComponentFrameRoot(),v=d[0],T=d[1];if(v&&T){var I=v.split(`
`),z=T.split(`
`);for(f=l=0;l<I.length&&!I[l].includes("DetermineComponentFrameRoot");)l++;for(;f<z.length&&!z[f].includes("DetermineComponentFrameRoot");)f++;if(l===I.length||f===z.length)for(l=I.length-1,f=z.length-1;1<=l&&0<=f&&I[l]!==z[f];)f--;for(;1<=l&&0<=f;l--,f--)if(I[l]!==z[f]){if(l!==1||f!==1)do if(l--,f--,0>f||I[l]!==z[f]){var K=`
`+I[l].replace(" at new "," at ");return n.displayName&&K.includes("<anonymous>")&&(K=K.replace("<anonymous>",n.displayName)),K}while(1<=l&&0<=f);break}}}finally{Ca=!1,Error.prepareStackTrace=a}return(a=n?n.displayName||n.name:"")?Li(a):""}function yl(n){switch(n.tag){case 26:case 27:case 5:return Li(n.type);case 16:return Li("Lazy");case 13:return Li("Suspense");case 19:return Li("SuspenseList");case 0:case 15:return Na(n.type,!1);case 11:return Na(n.type.render,!1);case 1:return Na(n.type,!0);case 31:return Li("Activity");default:return""}}function xa(n){try{var i="";do i+=yl(n),n=n.return;while(n);return i}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}function cn(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function vl(n){var i=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function od(n){var i=vl(n)?"checked":"value",a=Object.getOwnPropertyDescriptor(n.constructor.prototype,i),l=""+n[i];if(!n.hasOwnProperty(i)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var f=a.get,d=a.set;return Object.defineProperty(n,i,{configurable:!0,get:function(){return f.call(this)},set:function(v){l=""+v,d.call(this,v)}}),Object.defineProperty(n,i,{enumerable:a.enumerable}),{getValue:function(){return l},setValue:function(v){l=""+v},stopTracking:function(){n._valueTracker=null,delete n[i]}}}}function Oa(n){n._valueTracker||(n._valueTracker=od(n))}function El(n){if(!n)return!1;var i=n._valueTracker;if(!i)return!0;var a=i.getValue(),l="";return n&&(l=vl(n)?n.checked?"true":"false":n.value),n=l,n!==a?(i.setValue(n),!0):!1}function ws(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var ld=/[\n"\\]/g;function we(n){return n.replace(ld,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function wn(n,i,a,l,f,d,v,T){n.name="",v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?n.type=v:n.removeAttribute("type"),i!=null?v==="number"?(i===0&&n.value===""||n.value!=i)&&(n.value=""+cn(i)):n.value!==""+cn(i)&&(n.value=""+cn(i)):v!=="submit"&&v!=="reset"||n.removeAttribute("value"),i!=null?vr(n,v,cn(i)):a!=null?vr(n,v,cn(a)):l!=null&&n.removeAttribute("value"),f==null&&d!=null&&(n.defaultChecked=!!d),f!=null&&(n.checked=f&&typeof f!="function"&&typeof f!="symbol"),T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?n.name=""+cn(T):n.removeAttribute("name")}function Is(n,i,a,l,f,d,v,T){if(d!=null&&typeof d!="function"&&typeof d!="symbol"&&typeof d!="boolean"&&(n.type=d),i!=null||a!=null){if(!(d!=="submit"&&d!=="reset"||i!=null))return;a=a!=null?""+cn(a):"",i=i!=null?""+cn(i):a,T||i===n.value||(n.value=i),n.defaultValue=i}l=l??f,l=typeof l!="function"&&typeof l!="symbol"&&!!l,n.checked=T?n.checked:!!l,n.defaultChecked=!!l,v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(n.name=v)}function vr(n,i,a){i==="number"&&ws(n.ownerDocument)===n||n.defaultValue===""+a||(n.defaultValue=""+a)}function Bi(n,i,a,l){if(n=n.options,i){i={};for(var f=0;f<a.length;f++)i["$"+a[f]]=!0;for(a=0;a<n.length;a++)f=i.hasOwnProperty("$"+n[a].value),n[a].selected!==f&&(n[a].selected=f),f&&l&&(n[a].defaultSelected=!0)}else{for(a=""+cn(a),i=null,f=0;f<n.length;f++){if(n[f].value===a){n[f].selected=!0,l&&(n[f].defaultSelected=!0);return}i!==null||n[f].disabled||(i=n[f])}i!==null&&(i.selected=!0)}}function Zt(n,i,a){if(i!=null&&(i=""+cn(i),i!==n.value&&(n.value=i),a==null)){n.defaultValue!==i&&(n.defaultValue=i);return}n.defaultValue=a!=null?""+cn(a):""}function Rs(n,i,a,l){if(i==null){if(l!=null){if(a!=null)throw Error(r(92));if(de(l)){if(1<l.length)throw Error(r(93));l=l[0]}a=l}a==null&&(a=""),i=a}a=cn(i),n.defaultValue=a,l=n.textContent,l===a&&l!==""&&l!==null&&(n.value=l)}function Bn(n,i){if(i){var a=n.firstChild;if(a&&a===n.lastChild&&a.nodeType===3){a.nodeValue=i;return}}n.textContent=i}var Ds=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Dc(n,i,a){var l=i.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?n.setProperty(i,""):i==="float"?n.cssFloat="":n[i]="":l?n.setProperty(i,a):typeof a!="number"||a===0||Ds.has(i)?i==="float"?n.cssFloat=a:n[i]=(""+a).trim():n[i]=a+"px"}function Tl(n,i,a){if(i!=null&&typeof i!="object")throw Error(r(62));if(n=n.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||i!=null&&i.hasOwnProperty(l)||(l.indexOf("--")===0?n.setProperty(l,""):l==="float"?n.cssFloat="":n[l]="");for(var f in i)l=i[f],i.hasOwnProperty(f)&&a[f]!==l&&Dc(n,f,l)}else for(var d in i)i.hasOwnProperty(d)&&Dc(n,d,i[d])}function Al(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ud=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),cd=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ma(n){return cd.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}var ki=null;function kn(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var zi=null,qi=null;function bl(n){var i=li(n);if(i&&(n=i.stateNode)){var a=n[Se]||null;t:switch(n=i.stateNode,i.type){case"input":if(wn(n,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),i=a.name,a.type==="radio"&&i!=null){for(a=n;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+we(""+i)+'"][type="radio"]'),i=0;i<a.length;i++){var l=a[i];if(l!==n&&l.form===n.form){var f=l[Se]||null;if(!f)throw Error(r(90));wn(l,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(i=0;i<a.length;i++)l=a[i],l.form===n.form&&El(l)}break t;case"textarea":Zt(n,a.value,a.defaultValue);break t;case"select":i=a.value,i!=null&&Bi(n,!!a.multiple,i,!1)}}}var hi=!1;function Vc(n,i,a){if(hi)return n(i,a);hi=!0;try{var l=n(i);return l}finally{if(hi=!1,(zi!==null||qi!==null)&&(Ah(),zi&&(i=zi,n=qi,qi=zi=null,bl(i),n)))for(i=0;i<n.length;i++)bl(n[i])}}function Vs(n,i){var a=n.stateNode;if(a===null)return null;var l=a[Se]||null;if(l===null)return null;a=l[i];t:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(n=n.type,l=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!l;break t;default:n=!1}if(n)return null;if(a&&typeof a!="function")throw Error(r(231,i,typeof a));return a}var Wn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),zn=!1;if(Wn)try{var Cs={};Object.defineProperty(Cs,"passive",{get:function(){zn=!0}}),window.addEventListener("test",Cs,Cs),window.removeEventListener("test",Cs,Cs)}catch{zn=!1}var fi=null,Er=null,Fi=null;function Sl(){if(Fi)return Fi;var n,i=Er,a=i.length,l,f="value"in fi?fi.value:fi.textContent,d=f.length;for(n=0;n<a&&i[n]===f[n];n++);var v=a-n;for(l=1;l<=v&&i[a-l]===f[d-l];l++);return Fi=f.slice(n,1<l?1-l:void 0)}function di(n){var i=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&i===13&&(n=13)):n=i,n===10&&(n=13),32<=n||n===13?n:0}function mi(){return!0}function wl(){return!1}function Be(n){function i(a,l,f,d,v){this._reactName=a,this._targetInst=f,this.type=l,this.nativeEvent=d,this.target=v,this.currentTarget=null;for(var T in n)n.hasOwnProperty(T)&&(a=n[T],this[T]=a?a(d):d[T]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?mi:wl,this.isPropagationStopped=wl,this}return E(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=mi)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=mi)},persist:function(){},isPersistent:mi}),i}var Gt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Pa=Be(Gt),Ns=E({},Gt,{view:0,detail:0}),Cc=Be(Ns),Ua,La,gi,xs=E({},Ns,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ps,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==gi&&(gi&&n.type==="mousemove"?(Ua=n.screenX-gi.screenX,La=n.screenY-gi.screenY):La=Ua=0,gi=n),Ua)},movementY:function(n){return"movementY"in n?n.movementY:La}}),qn=Be(xs),Nc=E({},xs,{dataTransfer:0}),hd=Be(Nc),Os=E({},Ns,{relatedTarget:0}),Ba=Be(Os),Il=E({},Gt,{animationName:0,elapsedTime:0,pseudoElement:0}),ka=Be(Il),xc=E({},Gt,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),za=Be(xc),fd=E({},Gt,{data:0}),Rl=Be(fd),Ms={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Oc={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Mc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Dl(n){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(n):(n=Mc[n])?!!i[n]:!1}function Ps(){return Dl}var Pc=E({},Ns,{key:function(n){if(n.key){var i=Ms[n.key]||n.key;if(i!=="Unidentified")return i}return n.type==="keypress"?(n=di(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?Oc[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ps,charCode:function(n){return n.type==="keypress"?di(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?di(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),qa=Be(Pc),Uc=E({},xs,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Vl=Be(Uc),ji=E({},Ns,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ps}),Lc=Be(ji),Bc=E({},Gt,{propertyName:0,elapsedTime:0,pseudoElement:0}),kc=Be(Bc),zc=E({},xs,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),Fa=Be(zc),hn=E({},Gt,{newState:0,oldState:0}),qc=Be(hn),Fc=[9,13,27,32],pi=Wn&&"CompositionEvent"in window,c=null;Wn&&"documentMode"in document&&(c=document.documentMode);var p=Wn&&"TextEvent"in window&&!c,y=Wn&&(!pi||c&&8<c&&11>=c),b=" ",L=!1;function G(n,i){switch(n){case"keyup":return Fc.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function nt(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Ut=!1;function xe(n,i){switch(n){case"compositionend":return nt(i);case"keypress":return i.which!==32?null:(L=!0,b);case"textInput":return n=i.data,n===b&&L?null:n;default:return null}}function Lt(n,i){if(Ut)return n==="compositionend"||!pi&&G(n,i)?(n=Sl(),Fi=Er=fi=null,Ut=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return y&&i.locale!=="ko"?null:i.data;default:return null}}var ke={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Oe(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i==="input"?!!ke[n.type]:i==="textarea"}function Gi(n,i,a,l){zi?qi?qi.push(l):qi=[l]:zi=l,i=Dh(i,"onChange"),0<i.length&&(a=new Pa("onChange","change",null,a,l),n.push({event:a,listeners:i}))}var Ke=null,_i=null;function Cl(n){nE(n,0)}function jc(n){var i=ui(n);if(El(i))return n}function b_(n,i){if(n==="change")return i}var S_=!1;if(Wn){var dd;if(Wn){var md="oninput"in document;if(!md){var w_=document.createElement("div");w_.setAttribute("oninput","return;"),md=typeof w_.oninput=="function"}dd=md}else dd=!1;S_=dd&&(!document.documentMode||9<document.documentMode)}function I_(){Ke&&(Ke.detachEvent("onpropertychange",R_),_i=Ke=null)}function R_(n){if(n.propertyName==="value"&&jc(_i)){var i=[];Gi(i,_i,n,kn(n)),Vc(Cl,i)}}function GS(n,i,a){n==="focusin"?(I_(),Ke=i,_i=a,Ke.attachEvent("onpropertychange",R_)):n==="focusout"&&I_()}function HS(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return jc(_i)}function QS(n,i){if(n==="click")return jc(i)}function KS(n,i){if(n==="input"||n==="change")return jc(i)}function YS(n,i){return n===i&&(n!==0||1/n===1/i)||n!==n&&i!==i}var In=typeof Object.is=="function"?Object.is:YS;function Nl(n,i){if(In(n,i))return!0;if(typeof n!="object"||n===null||typeof i!="object"||i===null)return!1;var a=Object.keys(n),l=Object.keys(i);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var f=a[l];if(!ms.call(i,f)||!In(n[f],i[f]))return!1}return!0}function D_(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function V_(n,i){var a=D_(n);n=0;for(var l;a;){if(a.nodeType===3){if(l=n+a.textContent.length,n<=i&&l>=i)return{node:a,offset:i-n};n=l}t:{for(;a;){if(a.nextSibling){a=a.nextSibling;break t}a=a.parentNode}a=void 0}a=D_(a)}}function C_(n,i){return n&&i?n===i?!0:n&&n.nodeType===3?!1:i&&i.nodeType===3?C_(n,i.parentNode):"contains"in n?n.contains(i):n.compareDocumentPosition?!!(n.compareDocumentPosition(i)&16):!1:!1}function N_(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var i=ws(n.document);i instanceof n.HTMLIFrameElement;){try{var a=typeof i.contentWindow.location.href=="string"}catch{a=!1}if(a)n=i.contentWindow;else break;i=ws(n.document)}return i}function gd(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i&&(i==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||i==="textarea"||n.contentEditable==="true")}var XS=Wn&&"documentMode"in document&&11>=document.documentMode,ja=null,pd=null,xl=null,_d=!1;function x_(n,i,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;_d||ja==null||ja!==ws(l)||(l=ja,"selectionStart"in l&&gd(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),xl&&Nl(xl,l)||(xl=l,l=Dh(pd,"onSelect"),0<l.length&&(i=new Pa("onSelect","select",null,i,a),n.push({event:i,listeners:l}),i.target=ja)))}function Us(n,i){var a={};return a[n.toLowerCase()]=i.toLowerCase(),a["Webkit"+n]="webkit"+i,a["Moz"+n]="moz"+i,a}var Ga={animationend:Us("Animation","AnimationEnd"),animationiteration:Us("Animation","AnimationIteration"),animationstart:Us("Animation","AnimationStart"),transitionrun:Us("Transition","TransitionRun"),transitionstart:Us("Transition","TransitionStart"),transitioncancel:Us("Transition","TransitionCancel"),transitionend:Us("Transition","TransitionEnd")},yd={},O_={};Wn&&(O_=document.createElement("div").style,"AnimationEvent"in window||(delete Ga.animationend.animation,delete Ga.animationiteration.animation,delete Ga.animationstart.animation),"TransitionEvent"in window||delete Ga.transitionend.transition);function Ls(n){if(yd[n])return yd[n];if(!Ga[n])return n;var i=Ga[n],a;for(a in i)if(i.hasOwnProperty(a)&&a in O_)return yd[n]=i[a];return n}var M_=Ls("animationend"),P_=Ls("animationiteration"),U_=Ls("animationstart"),$S=Ls("transitionrun"),ZS=Ls("transitionstart"),JS=Ls("transitioncancel"),L_=Ls("transitionend"),B_=new Map,vd="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");vd.push("scrollEnd");function ti(n,i){B_.set(n,i),Jn(i,[n])}var k_=new WeakMap;function Fn(n,i){if(typeof n=="object"&&n!==null){var a=k_.get(n);return a!==void 0?a:(i={value:n,source:i,stack:xa(i)},k_.set(n,i),i)}return{value:n,source:i,stack:xa(i)}}var jn=[],Ha=0,Ed=0;function Gc(){for(var n=Ha,i=Ed=Ha=0;i<n;){var a=jn[i];jn[i++]=null;var l=jn[i];jn[i++]=null;var f=jn[i];jn[i++]=null;var d=jn[i];if(jn[i++]=null,l!==null&&f!==null){var v=l.pending;v===null?f.next=f:(f.next=v.next,v.next=f),l.pending=f}d!==0&&z_(a,f,d)}}function Hc(n,i,a,l){jn[Ha++]=n,jn[Ha++]=i,jn[Ha++]=a,jn[Ha++]=l,Ed|=l,n.lanes|=l,n=n.alternate,n!==null&&(n.lanes|=l)}function Td(n,i,a,l){return Hc(n,i,a,l),Qc(n)}function Qa(n,i){return Hc(n,null,null,i),Qc(n)}function z_(n,i,a){n.lanes|=a;var l=n.alternate;l!==null&&(l.lanes|=a);for(var f=!1,d=n.return;d!==null;)d.childLanes|=a,l=d.alternate,l!==null&&(l.childLanes|=a),d.tag===22&&(n=d.stateNode,n===null||n._visibility&1||(f=!0)),n=d,d=d.return;return n.tag===3?(d=n.stateNode,f&&i!==null&&(f=31-tn(a),n=d.hiddenUpdates,l=n[f],l===null?n[f]=[i]:l.push(i),i.lane=a|536870912),d):null}function Qc(n){if(50<iu)throw iu=0,Rm=null,Error(r(185));for(var i=n.return;i!==null;)n=i,i=n.return;return n.tag===3?n.stateNode:null}var Ka={};function WS(n,i,a,l){this.tag=n,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Rn(n,i,a,l){return new WS(n,i,a,l)}function Ad(n){return n=n.prototype,!(!n||!n.isReactComponent)}function Hi(n,i){var a=n.alternate;return a===null?(a=Rn(n.tag,i,n.key,n.mode),a.elementType=n.elementType,a.type=n.type,a.stateNode=n.stateNode,a.alternate=n,n.alternate=a):(a.pendingProps=i,a.type=n.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=n.flags&65011712,a.childLanes=n.childLanes,a.lanes=n.lanes,a.child=n.child,a.memoizedProps=n.memoizedProps,a.memoizedState=n.memoizedState,a.updateQueue=n.updateQueue,i=n.dependencies,a.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},a.sibling=n.sibling,a.index=n.index,a.ref=n.ref,a.refCleanup=n.refCleanup,a}function q_(n,i){n.flags&=65011714;var a=n.alternate;return a===null?(n.childLanes=0,n.lanes=i,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=a.childLanes,n.lanes=a.lanes,n.child=a.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=a.memoizedProps,n.memoizedState=a.memoizedState,n.updateQueue=a.updateQueue,n.type=a.type,i=a.dependencies,n.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),n}function Kc(n,i,a,l,f,d){var v=0;if(l=n,typeof n=="function")Ad(n)&&(v=1);else if(typeof n=="string")v=e1(n,a,_t.current)?26:n==="html"||n==="head"||n==="body"?27:5;else t:switch(n){case D:return n=Rn(31,a,i,f),n.elementType=D,n.lanes=d,n;case H:return Bs(a.children,f,d,i);case Z:v=8,f|=24;break;case Y:return n=Rn(12,a,i,f|2),n.elementType=Y,n.lanes=d,n;case ft:return n=Rn(13,a,i,f),n.elementType=ft,n.lanes=d,n;case Tt:return n=Rn(19,a,i,f),n.elementType=Tt,n.lanes=d,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case mt:case it:v=10;break t;case ut:v=9;break t;case St:v=11;break t;case N:v=14;break t;case w:v=16,l=null;break t}v=29,a=Error(r(130,n===null?"null":typeof n,"")),l=null}return i=Rn(v,a,i,f),i.elementType=n,i.type=l,i.lanes=d,i}function Bs(n,i,a,l){return n=Rn(7,n,l,i),n.lanes=a,n}function bd(n,i,a){return n=Rn(6,n,null,i),n.lanes=a,n}function Sd(n,i,a){return i=Rn(4,n.children!==null?n.children:[],n.key,i),i.lanes=a,i.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},i}var Ya=[],Xa=0,Yc=null,Xc=0,Gn=[],Hn=0,ks=null,Qi=1,Ki="";function zs(n,i){Ya[Xa++]=Xc,Ya[Xa++]=Yc,Yc=n,Xc=i}function F_(n,i,a){Gn[Hn++]=Qi,Gn[Hn++]=Ki,Gn[Hn++]=ks,ks=n;var l=Qi;n=Ki;var f=32-tn(l)-1;l&=~(1<<f),a+=1;var d=32-tn(i)+f;if(30<d){var v=f-f%5;d=(l&(1<<v)-1).toString(32),l>>=v,f-=v,Qi=1<<32-tn(i)+f|a<<f|l,Ki=d+n}else Qi=1<<d|a<<f|l,Ki=n}function wd(n){n.return!==null&&(zs(n,1),F_(n,1,0))}function Id(n){for(;n===Yc;)Yc=Ya[--Xa],Ya[Xa]=null,Xc=Ya[--Xa],Ya[Xa]=null;for(;n===ks;)ks=Gn[--Hn],Gn[Hn]=null,Ki=Gn[--Hn],Gn[Hn]=null,Qi=Gn[--Hn],Gn[Hn]=null}var fn=null,ge=null,jt=!1,qs=null,yi=!1,Rd=Error(r(519));function Fs(n){var i=Error(r(418,""));throw Pl(Fn(i,n)),Rd}function j_(n){var i=n.stateNode,a=n.type,l=n.memoizedProps;switch(i[Ne]=n,i[Se]=l,a){case"dialog":xt("cancel",i),xt("close",i);break;case"iframe":case"object":case"embed":xt("load",i);break;case"video":case"audio":for(a=0;a<su.length;a++)xt(su[a],i);break;case"source":xt("error",i);break;case"img":case"image":case"link":xt("error",i),xt("load",i);break;case"details":xt("toggle",i);break;case"input":xt("invalid",i),Is(i,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0),Oa(i);break;case"select":xt("invalid",i);break;case"textarea":xt("invalid",i),Rs(i,l.value,l.defaultValue,l.children),Oa(i)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||i.textContent===""+a||l.suppressHydrationWarning===!0||aE(i.textContent,a)?(l.popover!=null&&(xt("beforetoggle",i),xt("toggle",i)),l.onScroll!=null&&xt("scroll",i),l.onScrollEnd!=null&&xt("scrollend",i),l.onClick!=null&&(i.onclick=Vh),i=!0):i=!1,i||Fs(n)}function G_(n){for(fn=n.return;fn;)switch(fn.tag){case 5:case 13:yi=!1;return;case 27:case 3:yi=!0;return;default:fn=fn.return}}function Ol(n){if(n!==fn)return!1;if(!jt)return G_(n),jt=!0,!1;var i=n.tag,a;if((a=i!==3&&i!==27)&&((a=i===5)&&(a=n.type,a=!(a!=="form"&&a!=="button")||jm(n.type,n.memoizedProps)),a=!a),a&&ge&&Fs(n),G_(n),i===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(r(317));t:{for(n=n.nextSibling,i=0;n;){if(n.nodeType===8)if(a=n.data,a==="/$"){if(i===0){ge=ni(n.nextSibling);break t}i--}else a!=="$"&&a!=="$!"&&a!=="$?"||i++;n=n.nextSibling}ge=null}}else i===27?(i=ge,Ur(n.type)?(n=Km,Km=null,ge=n):ge=i):ge=fn?ni(n.stateNode.nextSibling):null;return!0}function Ml(){ge=fn=null,jt=!1}function H_(){var n=qs;return n!==null&&(vn===null?vn=n:vn.push.apply(vn,n),qs=null),n}function Pl(n){qs===null?qs=[n]:qs.push(n)}var Dd=W(null),js=null,Yi=null;function Tr(n,i,a){et(Dd,i._currentValue),i._currentValue=a}function Xi(n){n._currentValue=Dd.current,ot(Dd)}function Vd(n,i,a){for(;n!==null;){var l=n.alternate;if((n.childLanes&i)!==i?(n.childLanes|=i,l!==null&&(l.childLanes|=i)):l!==null&&(l.childLanes&i)!==i&&(l.childLanes|=i),n===a)break;n=n.return}}function Cd(n,i,a,l){var f=n.child;for(f!==null&&(f.return=n);f!==null;){var d=f.dependencies;if(d!==null){var v=f.child;d=d.firstContext;t:for(;d!==null;){var T=d;d=f;for(var I=0;I<i.length;I++)if(T.context===i[I]){d.lanes|=a,T=d.alternate,T!==null&&(T.lanes|=a),Vd(d.return,a,n),l||(v=null);break t}d=T.next}}else if(f.tag===18){if(v=f.return,v===null)throw Error(r(341));v.lanes|=a,d=v.alternate,d!==null&&(d.lanes|=a),Vd(v,a,n),v=null}else v=f.child;if(v!==null)v.return=f;else for(v=f;v!==null;){if(v===n){v=null;break}if(f=v.sibling,f!==null){f.return=v.return,v=f;break}v=v.return}f=v}}function Ul(n,i,a,l){n=null;for(var f=i,d=!1;f!==null;){if(!d){if((f.flags&524288)!==0)d=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var v=f.alternate;if(v===null)throw Error(r(387));if(v=v.memoizedProps,v!==null){var T=f.type;In(f.pendingProps.value,v.value)||(n!==null?n.push(T):n=[T])}}else if(f===Le.current){if(v=f.alternate,v===null)throw Error(r(387));v.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(n!==null?n.push(hu):n=[hu])}f=f.return}n!==null&&Cd(i,n,a,l),i.flags|=262144}function $c(n){for(n=n.firstContext;n!==null;){if(!In(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function Gs(n){js=n,Yi=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function en(n){return Q_(js,n)}function Zc(n,i){return js===null&&Gs(n),Q_(n,i)}function Q_(n,i){var a=i._currentValue;if(i={context:i,memoizedValue:a,next:null},Yi===null){if(n===null)throw Error(r(308));Yi=i,n.dependencies={lanes:0,firstContext:i},n.flags|=524288}else Yi=Yi.next=i;return a}var tw=typeof AbortController<"u"?AbortController:function(){var n=[],i=this.signal={aborted:!1,addEventListener:function(a,l){n.push(l)}};this.abort=function(){i.aborted=!0,n.forEach(function(a){return a()})}},ew=s.unstable_scheduleCallback,nw=s.unstable_NormalPriority,Me={$$typeof:it,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Nd(){return{controller:new tw,data:new Map,refCount:0}}function Ll(n){n.refCount--,n.refCount===0&&ew(nw,function(){n.controller.abort()})}var Bl=null,xd=0,$a=0,Za=null;function iw(n,i){if(Bl===null){var a=Bl=[];xd=0,$a=Mm(),Za={status:"pending",value:void 0,then:function(l){a.push(l)}}}return xd++,i.then(K_,K_),i}function K_(){if(--xd===0&&Bl!==null){Za!==null&&(Za.status="fulfilled");var n=Bl;Bl=null,$a=0,Za=null;for(var i=0;i<n.length;i++)(0,n[i])()}}function rw(n,i){var a=[],l={status:"pending",value:null,reason:null,then:function(f){a.push(f)}};return n.then(function(){l.status="fulfilled",l.value=i;for(var f=0;f<a.length;f++)(0,a[f])(i)},function(f){for(l.status="rejected",l.reason=f,f=0;f<a.length;f++)(0,a[f])(void 0)}),l}var Y_=Q.S;Q.S=function(n,i){typeof i=="object"&&i!==null&&typeof i.then=="function"&&iw(n,i),Y_!==null&&Y_(n,i)};var Hs=W(null);function Od(){var n=Hs.current;return n!==null?n:ie.pooledCache}function Jc(n,i){i===null?et(Hs,Hs.current):et(Hs,i.pool)}function X_(){var n=Od();return n===null?null:{parent:Me._currentValue,pool:n}}var kl=Error(r(460)),$_=Error(r(474)),Wc=Error(r(542)),Md={then:function(){}};function Z_(n){return n=n.status,n==="fulfilled"||n==="rejected"}function th(){}function J_(n,i,a){switch(a=n[a],a===void 0?n.push(i):a!==i&&(i.then(th,th),i=a),i.status){case"fulfilled":return i.value;case"rejected":throw n=i.reason,ty(n),n;default:if(typeof i.status=="string")i.then(th,th);else{if(n=ie,n!==null&&100<n.shellSuspendCounter)throw Error(r(482));n=i,n.status="pending",n.then(function(l){if(i.status==="pending"){var f=i;f.status="fulfilled",f.value=l}},function(l){if(i.status==="pending"){var f=i;f.status="rejected",f.reason=l}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw n=i.reason,ty(n),n}throw zl=i,kl}}var zl=null;function W_(){if(zl===null)throw Error(r(459));var n=zl;return zl=null,n}function ty(n){if(n===kl||n===Wc)throw Error(r(483))}var Ar=!1;function Pd(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Ud(n,i){n=n.updateQueue,i.updateQueue===n&&(i.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function br(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function Sr(n,i,a){var l=n.updateQueue;if(l===null)return null;if(l=l.shared,(Kt&2)!==0){var f=l.pending;return f===null?i.next=i:(i.next=f.next,f.next=i),l.pending=i,i=Qc(n),z_(n,null,a),i}return Hc(n,l,i,a),Qc(n)}function ql(n,i,a){if(i=i.updateQueue,i!==null&&(i=i.shared,(a&4194048)!==0)){var l=i.lanes;l&=n.pendingLanes,a|=l,i.lanes=a,gl(n,a)}}function Ld(n,i){var a=n.updateQueue,l=n.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var f=null,d=null;if(a=a.firstBaseUpdate,a!==null){do{var v={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};d===null?f=d=v:d=d.next=v,a=a.next}while(a!==null);d===null?f=d=i:d=d.next=i}else f=d=i;a={baseState:l.baseState,firstBaseUpdate:f,lastBaseUpdate:d,shared:l.shared,callbacks:l.callbacks},n.updateQueue=a;return}n=a.lastBaseUpdate,n===null?a.firstBaseUpdate=i:n.next=i,a.lastBaseUpdate=i}var Bd=!1;function Fl(){if(Bd){var n=Za;if(n!==null)throw n}}function jl(n,i,a,l){Bd=!1;var f=n.updateQueue;Ar=!1;var d=f.firstBaseUpdate,v=f.lastBaseUpdate,T=f.shared.pending;if(T!==null){f.shared.pending=null;var I=T,z=I.next;I.next=null,v===null?d=z:v.next=z,v=I;var K=n.alternate;K!==null&&(K=K.updateQueue,T=K.lastBaseUpdate,T!==v&&(T===null?K.firstBaseUpdate=z:T.next=z,K.lastBaseUpdate=I))}if(d!==null){var $=f.baseState;v=0,K=z=I=null,T=d;do{var q=T.lane&-536870913,F=q!==T.lane;if(F?(Bt&q)===q:(l&q)===q){q!==0&&q===$a&&(Bd=!0),K!==null&&(K=K.next={lane:0,tag:T.tag,payload:T.payload,callback:null,next:null});t:{var Et=n,yt=T;q=i;var te=a;switch(yt.tag){case 1:if(Et=yt.payload,typeof Et=="function"){$=Et.call(te,$,q);break t}$=Et;break t;case 3:Et.flags=Et.flags&-65537|128;case 0:if(Et=yt.payload,q=typeof Et=="function"?Et.call(te,$,q):Et,q==null)break t;$=E({},$,q);break t;case 2:Ar=!0}}q=T.callback,q!==null&&(n.flags|=64,F&&(n.flags|=8192),F=f.callbacks,F===null?f.callbacks=[q]:F.push(q))}else F={lane:q,tag:T.tag,payload:T.payload,callback:T.callback,next:null},K===null?(z=K=F,I=$):K=K.next=F,v|=q;if(T=T.next,T===null){if(T=f.shared.pending,T===null)break;F=T,T=F.next,F.next=null,f.lastBaseUpdate=F,f.shared.pending=null}}while(!0);K===null&&(I=$),f.baseState=I,f.firstBaseUpdate=z,f.lastBaseUpdate=K,d===null&&(f.shared.lanes=0),xr|=v,n.lanes=v,n.memoizedState=$}}function ey(n,i){if(typeof n!="function")throw Error(r(191,n));n.call(i)}function ny(n,i){var a=n.callbacks;if(a!==null)for(n.callbacks=null,n=0;n<a.length;n++)ey(a[n],i)}var Ja=W(null),eh=W(0);function iy(n,i){n=nr,et(eh,n),et(Ja,i),nr=n|i.baseLanes}function kd(){et(eh,nr),et(Ja,Ja.current)}function zd(){nr=eh.current,ot(Ja),ot(eh)}var wr=0,Dt=null,Jt=null,Ie=null,nh=!1,Wa=!1,Qs=!1,ih=0,Gl=0,to=null,sw=0;function ve(){throw Error(r(321))}function qd(n,i){if(i===null)return!1;for(var a=0;a<i.length&&a<n.length;a++)if(!In(n[a],i[a]))return!1;return!0}function Fd(n,i,a,l,f,d){return wr=d,Dt=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,Q.H=n===null||n.memoizedState===null?zy:qy,Qs=!1,d=a(l,f),Qs=!1,Wa&&(d=sy(i,a,l,f)),ry(n),d}function ry(n){Q.H=uh;var i=Jt!==null&&Jt.next!==null;if(wr=0,Ie=Jt=Dt=null,nh=!1,Gl=0,to=null,i)throw Error(r(300));n===null||ze||(n=n.dependencies,n!==null&&$c(n)&&(ze=!0))}function sy(n,i,a,l){Dt=n;var f=0;do{if(Wa&&(to=null),Gl=0,Wa=!1,25<=f)throw Error(r(301));if(f+=1,Ie=Jt=null,n.updateQueue!=null){var d=n.updateQueue;d.lastEffect=null,d.events=null,d.stores=null,d.memoCache!=null&&(d.memoCache.index=0)}Q.H=fw,d=i(a,l)}while(Wa);return d}function aw(){var n=Q.H,i=n.useState()[0];return i=typeof i.then=="function"?Hl(i):i,n=n.useState()[0],(Jt!==null?Jt.memoizedState:null)!==n&&(Dt.flags|=1024),i}function jd(){var n=ih!==0;return ih=0,n}function Gd(n,i,a){i.updateQueue=n.updateQueue,i.flags&=-2053,n.lanes&=~a}function Hd(n){if(nh){for(n=n.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}nh=!1}wr=0,Ie=Jt=Dt=null,Wa=!1,Gl=ih=0,to=null}function _n(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ie===null?Dt.memoizedState=Ie=n:Ie=Ie.next=n,Ie}function Re(){if(Jt===null){var n=Dt.alternate;n=n!==null?n.memoizedState:null}else n=Jt.next;var i=Ie===null?Dt.memoizedState:Ie.next;if(i!==null)Ie=i,Jt=n;else{if(n===null)throw Dt.alternate===null?Error(r(467)):Error(r(310));Jt=n,n={memoizedState:Jt.memoizedState,baseState:Jt.baseState,baseQueue:Jt.baseQueue,queue:Jt.queue,next:null},Ie===null?Dt.memoizedState=Ie=n:Ie=Ie.next=n}return Ie}function Qd(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Hl(n){var i=Gl;return Gl+=1,to===null&&(to=[]),n=J_(to,n,i),i=Dt,(Ie===null?i.memoizedState:Ie.next)===null&&(i=i.alternate,Q.H=i===null||i.memoizedState===null?zy:qy),n}function rh(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return Hl(n);if(n.$$typeof===it)return en(n)}throw Error(r(438,String(n)))}function Kd(n){var i=null,a=Dt.updateQueue;if(a!==null&&(i=a.memoCache),i==null){var l=Dt.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(i={data:l.data.map(function(f){return f.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),a===null&&(a=Qd(),Dt.updateQueue=a),a.memoCache=i,a=i.data[i.index],a===void 0)for(a=i.data[i.index]=Array(n),l=0;l<n;l++)a[l]=x;return i.index++,a}function $i(n,i){return typeof i=="function"?i(n):i}function sh(n){var i=Re();return Yd(i,Jt,n)}function Yd(n,i,a){var l=n.queue;if(l===null)throw Error(r(311));l.lastRenderedReducer=a;var f=n.baseQueue,d=l.pending;if(d!==null){if(f!==null){var v=f.next;f.next=d.next,d.next=v}i.baseQueue=f=d,l.pending=null}if(d=n.baseState,f===null)n.memoizedState=d;else{i=f.next;var T=v=null,I=null,z=i,K=!1;do{var $=z.lane&-536870913;if($!==z.lane?(Bt&$)===$:(wr&$)===$){var q=z.revertLane;if(q===0)I!==null&&(I=I.next={lane:0,revertLane:0,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null}),$===$a&&(K=!0);else if((wr&q)===q){z=z.next,q===$a&&(K=!0);continue}else $={lane:0,revertLane:z.revertLane,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null},I===null?(T=I=$,v=d):I=I.next=$,Dt.lanes|=q,xr|=q;$=z.action,Qs&&a(d,$),d=z.hasEagerState?z.eagerState:a(d,$)}else q={lane:$,revertLane:z.revertLane,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null},I===null?(T=I=q,v=d):I=I.next=q,Dt.lanes|=$,xr|=$;z=z.next}while(z!==null&&z!==i);if(I===null?v=d:I.next=T,!In(d,n.memoizedState)&&(ze=!0,K&&(a=Za,a!==null)))throw a;n.memoizedState=d,n.baseState=v,n.baseQueue=I,l.lastRenderedState=d}return f===null&&(l.lanes=0),[n.memoizedState,l.dispatch]}function Xd(n){var i=Re(),a=i.queue;if(a===null)throw Error(r(311));a.lastRenderedReducer=n;var l=a.dispatch,f=a.pending,d=i.memoizedState;if(f!==null){a.pending=null;var v=f=f.next;do d=n(d,v.action),v=v.next;while(v!==f);In(d,i.memoizedState)||(ze=!0),i.memoizedState=d,i.baseQueue===null&&(i.baseState=d),a.lastRenderedState=d}return[d,l]}function ay(n,i,a){var l=Dt,f=Re(),d=jt;if(d){if(a===void 0)throw Error(r(407));a=a()}else a=i();var v=!In((Jt||f).memoizedState,a);v&&(f.memoizedState=a,ze=!0),f=f.queue;var T=uy.bind(null,l,f,n);if(Ql(2048,8,T,[n]),f.getSnapshot!==i||v||Ie!==null&&Ie.memoizedState.tag&1){if(l.flags|=2048,eo(9,ah(),ly.bind(null,l,f,a,i),null),ie===null)throw Error(r(349));d||(wr&124)!==0||oy(l,i,a)}return a}function oy(n,i,a){n.flags|=16384,n={getSnapshot:i,value:a},i=Dt.updateQueue,i===null?(i=Qd(),Dt.updateQueue=i,i.stores=[n]):(a=i.stores,a===null?i.stores=[n]:a.push(n))}function ly(n,i,a,l){i.value=a,i.getSnapshot=l,cy(i)&&hy(n)}function uy(n,i,a){return a(function(){cy(i)&&hy(n)})}function cy(n){var i=n.getSnapshot;n=n.value;try{var a=i();return!In(n,a)}catch{return!0}}function hy(n){var i=Qa(n,2);i!==null&&xn(i,n,2)}function $d(n){var i=_n();if(typeof n=="function"){var a=n;if(n=a(),Qs){Sn(!0);try{a()}finally{Sn(!1)}}}return i.memoizedState=i.baseState=n,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:$i,lastRenderedState:n},i}function fy(n,i,a,l){return n.baseState=a,Yd(n,Jt,typeof l=="function"?l:$i)}function ow(n,i,a,l,f){if(lh(n))throw Error(r(485));if(n=i.action,n!==null){var d={payload:f,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(v){d.listeners.push(v)}};Q.T!==null?a(!0):d.isTransition=!1,l(d),a=i.pending,a===null?(d.next=i.pending=d,dy(i,d)):(d.next=a.next,i.pending=a.next=d)}}function dy(n,i){var a=i.action,l=i.payload,f=n.state;if(i.isTransition){var d=Q.T,v={};Q.T=v;try{var T=a(f,l),I=Q.S;I!==null&&I(v,T),my(n,i,T)}catch(z){Zd(n,i,z)}finally{Q.T=d}}else try{d=a(f,l),my(n,i,d)}catch(z){Zd(n,i,z)}}function my(n,i,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){gy(n,i,l)},function(l){return Zd(n,i,l)}):gy(n,i,a)}function gy(n,i,a){i.status="fulfilled",i.value=a,py(i),n.state=a,i=n.pending,i!==null&&(a=i.next,a===i?n.pending=null:(a=a.next,i.next=a,dy(n,a)))}function Zd(n,i,a){var l=n.pending;if(n.pending=null,l!==null){l=l.next;do i.status="rejected",i.reason=a,py(i),i=i.next;while(i!==l)}n.action=null}function py(n){n=n.listeners;for(var i=0;i<n.length;i++)(0,n[i])()}function _y(n,i){return i}function yy(n,i){if(jt){var a=ie.formState;if(a!==null){t:{var l=Dt;if(jt){if(ge){e:{for(var f=ge,d=yi;f.nodeType!==8;){if(!d){f=null;break e}if(f=ni(f.nextSibling),f===null){f=null;break e}}d=f.data,f=d==="F!"||d==="F"?f:null}if(f){ge=ni(f.nextSibling),l=f.data==="F!";break t}}Fs(l)}l=!1}l&&(i=a[0])}}return a=_n(),a.memoizedState=a.baseState=i,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:_y,lastRenderedState:i},a.queue=l,a=Ly.bind(null,Dt,l),l.dispatch=a,l=$d(!1),d=nm.bind(null,Dt,!1,l.queue),l=_n(),f={state:i,dispatch:null,action:n,pending:null},l.queue=f,a=ow.bind(null,Dt,f,d,a),f.dispatch=a,l.memoizedState=n,[i,a,!1]}function vy(n){var i=Re();return Ey(i,Jt,n)}function Ey(n,i,a){if(i=Yd(n,i,_y)[0],n=sh($i)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var l=Hl(i)}catch(v){throw v===kl?Wc:v}else l=i;i=Re();var f=i.queue,d=f.dispatch;return a!==i.memoizedState&&(Dt.flags|=2048,eo(9,ah(),lw.bind(null,f,a),null)),[l,d,n]}function lw(n,i){n.action=i}function Ty(n){var i=Re(),a=Jt;if(a!==null)return Ey(i,a,n);Re(),i=i.memoizedState,a=Re();var l=a.queue.dispatch;return a.memoizedState=n,[i,l,!1]}function eo(n,i,a,l){return n={tag:n,create:a,deps:l,inst:i,next:null},i=Dt.updateQueue,i===null&&(i=Qd(),Dt.updateQueue=i),a=i.lastEffect,a===null?i.lastEffect=n.next=n:(l=a.next,a.next=n,n.next=l,i.lastEffect=n),n}function ah(){return{destroy:void 0,resource:void 0}}function Ay(){return Re().memoizedState}function oh(n,i,a,l){var f=_n();l=l===void 0?null:l,Dt.flags|=n,f.memoizedState=eo(1|i,ah(),a,l)}function Ql(n,i,a,l){var f=Re();l=l===void 0?null:l;var d=f.memoizedState.inst;Jt!==null&&l!==null&&qd(l,Jt.memoizedState.deps)?f.memoizedState=eo(i,d,a,l):(Dt.flags|=n,f.memoizedState=eo(1|i,d,a,l))}function by(n,i){oh(8390656,8,n,i)}function Sy(n,i){Ql(2048,8,n,i)}function wy(n,i){return Ql(4,2,n,i)}function Iy(n,i){return Ql(4,4,n,i)}function Ry(n,i){if(typeof i=="function"){n=n();var a=i(n);return function(){typeof a=="function"?a():i(null)}}if(i!=null)return n=n(),i.current=n,function(){i.current=null}}function Dy(n,i,a){a=a!=null?a.concat([n]):null,Ql(4,4,Ry.bind(null,i,n),a)}function Jd(){}function Vy(n,i){var a=Re();i=i===void 0?null:i;var l=a.memoizedState;return i!==null&&qd(i,l[1])?l[0]:(a.memoizedState=[n,i],n)}function Cy(n,i){var a=Re();i=i===void 0?null:i;var l=a.memoizedState;if(i!==null&&qd(i,l[1]))return l[0];if(l=n(),Qs){Sn(!0);try{n()}finally{Sn(!1)}}return a.memoizedState=[l,i],l}function Wd(n,i,a){return a===void 0||(wr&1073741824)!==0?n.memoizedState=i:(n.memoizedState=a,n=Ov(),Dt.lanes|=n,xr|=n,a)}function Ny(n,i,a,l){return In(a,i)?a:Ja.current!==null?(n=Wd(n,a,l),In(n,i)||(ze=!0),n):(wr&42)===0?(ze=!0,n.memoizedState=a):(n=Ov(),Dt.lanes|=n,xr|=n,i)}function xy(n,i,a,l,f){var d=st.p;st.p=d!==0&&8>d?d:8;var v=Q.T,T={};Q.T=T,nm(n,!1,i,a);try{var I=f(),z=Q.S;if(z!==null&&z(T,I),I!==null&&typeof I=="object"&&typeof I.then=="function"){var K=rw(I,l);Kl(n,i,K,Nn(n))}else Kl(n,i,l,Nn(n))}catch($){Kl(n,i,{then:function(){},status:"rejected",reason:$},Nn())}finally{st.p=d,Q.T=v}}function uw(){}function tm(n,i,a,l){if(n.tag!==5)throw Error(r(476));var f=Oy(n).queue;xy(n,f,i,pt,a===null?uw:function(){return My(n),a(l)})}function Oy(n){var i=n.memoizedState;if(i!==null)return i;i={memoizedState:pt,baseState:pt,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:$i,lastRenderedState:pt},next:null};var a={};return i.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:$i,lastRenderedState:a},next:null},n.memoizedState=i,n=n.alternate,n!==null&&(n.memoizedState=i),i}function My(n){var i=Oy(n).next.queue;Kl(n,i,{},Nn())}function em(){return en(hu)}function Py(){return Re().memoizedState}function Uy(){return Re().memoizedState}function cw(n){for(var i=n.return;i!==null;){switch(i.tag){case 24:case 3:var a=Nn();n=br(a);var l=Sr(i,n,a);l!==null&&(xn(l,i,a),ql(l,i,a)),i={cache:Nd()},n.payload=i;return}i=i.return}}function hw(n,i,a){var l=Nn();a={lane:l,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null},lh(n)?By(i,a):(a=Td(n,i,a,l),a!==null&&(xn(a,n,l),ky(a,i,l)))}function Ly(n,i,a){var l=Nn();Kl(n,i,a,l)}function Kl(n,i,a,l){var f={lane:l,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null};if(lh(n))By(i,f);else{var d=n.alternate;if(n.lanes===0&&(d===null||d.lanes===0)&&(d=i.lastRenderedReducer,d!==null))try{var v=i.lastRenderedState,T=d(v,a);if(f.hasEagerState=!0,f.eagerState=T,In(T,v))return Hc(n,i,f,0),ie===null&&Gc(),!1}catch{}finally{}if(a=Td(n,i,f,l),a!==null)return xn(a,n,l),ky(a,i,l),!0}return!1}function nm(n,i,a,l){if(l={lane:2,revertLane:Mm(),action:l,hasEagerState:!1,eagerState:null,next:null},lh(n)){if(i)throw Error(r(479))}else i=Td(n,a,l,2),i!==null&&xn(i,n,2)}function lh(n){var i=n.alternate;return n===Dt||i!==null&&i===Dt}function By(n,i){Wa=nh=!0;var a=n.pending;a===null?i.next=i:(i.next=a.next,a.next=i),n.pending=i}function ky(n,i,a){if((a&4194048)!==0){var l=i.lanes;l&=n.pendingLanes,a|=l,i.lanes=a,gl(n,a)}}var uh={readContext:en,use:rh,useCallback:ve,useContext:ve,useEffect:ve,useImperativeHandle:ve,useLayoutEffect:ve,useInsertionEffect:ve,useMemo:ve,useReducer:ve,useRef:ve,useState:ve,useDebugValue:ve,useDeferredValue:ve,useTransition:ve,useSyncExternalStore:ve,useId:ve,useHostTransitionStatus:ve,useFormState:ve,useActionState:ve,useOptimistic:ve,useMemoCache:ve,useCacheRefresh:ve},zy={readContext:en,use:rh,useCallback:function(n,i){return _n().memoizedState=[n,i===void 0?null:i],n},useContext:en,useEffect:by,useImperativeHandle:function(n,i,a){a=a!=null?a.concat([n]):null,oh(4194308,4,Ry.bind(null,i,n),a)},useLayoutEffect:function(n,i){return oh(4194308,4,n,i)},useInsertionEffect:function(n,i){oh(4,2,n,i)},useMemo:function(n,i){var a=_n();i=i===void 0?null:i;var l=n();if(Qs){Sn(!0);try{n()}finally{Sn(!1)}}return a.memoizedState=[l,i],l},useReducer:function(n,i,a){var l=_n();if(a!==void 0){var f=a(i);if(Qs){Sn(!0);try{a(i)}finally{Sn(!1)}}}else f=i;return l.memoizedState=l.baseState=f,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:f},l.queue=n,n=n.dispatch=hw.bind(null,Dt,n),[l.memoizedState,n]},useRef:function(n){var i=_n();return n={current:n},i.memoizedState=n},useState:function(n){n=$d(n);var i=n.queue,a=Ly.bind(null,Dt,i);return i.dispatch=a,[n.memoizedState,a]},useDebugValue:Jd,useDeferredValue:function(n,i){var a=_n();return Wd(a,n,i)},useTransition:function(){var n=$d(!1);return n=xy.bind(null,Dt,n.queue,!0,!1),_n().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,i,a){var l=Dt,f=_n();if(jt){if(a===void 0)throw Error(r(407));a=a()}else{if(a=i(),ie===null)throw Error(r(349));(Bt&124)!==0||oy(l,i,a)}f.memoizedState=a;var d={value:a,getSnapshot:i};return f.queue=d,by(uy.bind(null,l,d,n),[n]),l.flags|=2048,eo(9,ah(),ly.bind(null,l,d,a,i),null),a},useId:function(){var n=_n(),i=ie.identifierPrefix;if(jt){var a=Ki,l=Qi;a=(l&~(1<<32-tn(l)-1)).toString(32)+a,i=""+i+"R"+a,a=ih++,0<a&&(i+="H"+a.toString(32)),i+=""}else a=sw++,i=""+i+"r"+a.toString(32)+"";return n.memoizedState=i},useHostTransitionStatus:em,useFormState:yy,useActionState:yy,useOptimistic:function(n){var i=_n();i.memoizedState=i.baseState=n;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=a,i=nm.bind(null,Dt,!0,a),a.dispatch=i,[n,i]},useMemoCache:Kd,useCacheRefresh:function(){return _n().memoizedState=cw.bind(null,Dt)}},qy={readContext:en,use:rh,useCallback:Vy,useContext:en,useEffect:Sy,useImperativeHandle:Dy,useInsertionEffect:wy,useLayoutEffect:Iy,useMemo:Cy,useReducer:sh,useRef:Ay,useState:function(){return sh($i)},useDebugValue:Jd,useDeferredValue:function(n,i){var a=Re();return Ny(a,Jt.memoizedState,n,i)},useTransition:function(){var n=sh($i)[0],i=Re().memoizedState;return[typeof n=="boolean"?n:Hl(n),i]},useSyncExternalStore:ay,useId:Py,useHostTransitionStatus:em,useFormState:vy,useActionState:vy,useOptimistic:function(n,i){var a=Re();return fy(a,Jt,n,i)},useMemoCache:Kd,useCacheRefresh:Uy},fw={readContext:en,use:rh,useCallback:Vy,useContext:en,useEffect:Sy,useImperativeHandle:Dy,useInsertionEffect:wy,useLayoutEffect:Iy,useMemo:Cy,useReducer:Xd,useRef:Ay,useState:function(){return Xd($i)},useDebugValue:Jd,useDeferredValue:function(n,i){var a=Re();return Jt===null?Wd(a,n,i):Ny(a,Jt.memoizedState,n,i)},useTransition:function(){var n=Xd($i)[0],i=Re().memoizedState;return[typeof n=="boolean"?n:Hl(n),i]},useSyncExternalStore:ay,useId:Py,useHostTransitionStatus:em,useFormState:Ty,useActionState:Ty,useOptimistic:function(n,i){var a=Re();return Jt!==null?fy(a,Jt,n,i):(a.baseState=n,[n,a.queue.dispatch])},useMemoCache:Kd,useCacheRefresh:Uy},no=null,Yl=0;function ch(n){var i=Yl;return Yl+=1,no===null&&(no=[]),J_(no,n,i)}function Xl(n,i){i=i.props.ref,n.ref=i!==void 0?i:null}function hh(n,i){throw i.$$typeof===A?Error(r(525)):(n=Object.prototype.toString.call(i),Error(r(31,n==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":n)))}function Fy(n){var i=n._init;return i(n._payload)}function jy(n){function i(P,C){if(n){var k=P.deletions;k===null?(P.deletions=[C],P.flags|=16):k.push(C)}}function a(P,C){if(!n)return null;for(;C!==null;)i(P,C),C=C.sibling;return null}function l(P){for(var C=new Map;P!==null;)P.key!==null?C.set(P.key,P):C.set(P.index,P),P=P.sibling;return C}function f(P,C){return P=Hi(P,C),P.index=0,P.sibling=null,P}function d(P,C,k){return P.index=k,n?(k=P.alternate,k!==null?(k=k.index,k<C?(P.flags|=67108866,C):k):(P.flags|=67108866,C)):(P.flags|=1048576,C)}function v(P){return n&&P.alternate===null&&(P.flags|=67108866),P}function T(P,C,k,X){return C===null||C.tag!==6?(C=bd(k,P.mode,X),C.return=P,C):(C=f(C,k),C.return=P,C)}function I(P,C,k,X){var ct=k.type;return ct===H?K(P,C,k.props.children,X,k.key):C!==null&&(C.elementType===ct||typeof ct=="object"&&ct!==null&&ct.$$typeof===w&&Fy(ct)===C.type)?(C=f(C,k.props),Xl(C,k),C.return=P,C):(C=Kc(k.type,k.key,k.props,null,P.mode,X),Xl(C,k),C.return=P,C)}function z(P,C,k,X){return C===null||C.tag!==4||C.stateNode.containerInfo!==k.containerInfo||C.stateNode.implementation!==k.implementation?(C=Sd(k,P.mode,X),C.return=P,C):(C=f(C,k.children||[]),C.return=P,C)}function K(P,C,k,X,ct){return C===null||C.tag!==7?(C=Bs(k,P.mode,X,ct),C.return=P,C):(C=f(C,k),C.return=P,C)}function $(P,C,k){if(typeof C=="string"&&C!==""||typeof C=="number"||typeof C=="bigint")return C=bd(""+C,P.mode,k),C.return=P,C;if(typeof C=="object"&&C!==null){switch(C.$$typeof){case S:return k=Kc(C.type,C.key,C.props,null,P.mode,k),Xl(k,C),k.return=P,k;case O:return C=Sd(C,P.mode,k),C.return=P,C;case w:var X=C._init;return C=X(C._payload),$(P,C,k)}if(de(C)||U(C))return C=Bs(C,P.mode,k,null),C.return=P,C;if(typeof C.then=="function")return $(P,ch(C),k);if(C.$$typeof===it)return $(P,Zc(P,C),k);hh(P,C)}return null}function q(P,C,k,X){var ct=C!==null?C.key:null;if(typeof k=="string"&&k!==""||typeof k=="number"||typeof k=="bigint")return ct!==null?null:T(P,C,""+k,X);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case S:return k.key===ct?I(P,C,k,X):null;case O:return k.key===ct?z(P,C,k,X):null;case w:return ct=k._init,k=ct(k._payload),q(P,C,k,X)}if(de(k)||U(k))return ct!==null?null:K(P,C,k,X,null);if(typeof k.then=="function")return q(P,C,ch(k),X);if(k.$$typeof===it)return q(P,C,Zc(P,k),X);hh(P,k)}return null}function F(P,C,k,X,ct){if(typeof X=="string"&&X!==""||typeof X=="number"||typeof X=="bigint")return P=P.get(k)||null,T(C,P,""+X,ct);if(typeof X=="object"&&X!==null){switch(X.$$typeof){case S:return P=P.get(X.key===null?k:X.key)||null,I(C,P,X,ct);case O:return P=P.get(X.key===null?k:X.key)||null,z(C,P,X,ct);case w:var Ct=X._init;return X=Ct(X._payload),F(P,C,k,X,ct)}if(de(X)||U(X))return P=P.get(k)||null,K(C,P,X,ct,null);if(typeof X.then=="function")return F(P,C,k,ch(X),ct);if(X.$$typeof===it)return F(P,C,k,Zc(C,X),ct);hh(C,X)}return null}function Et(P,C,k,X){for(var ct=null,Ct=null,gt=C,vt=C=0,Fe=null;gt!==null&&vt<k.length;vt++){gt.index>vt?(Fe=gt,gt=null):Fe=gt.sibling;var zt=q(P,gt,k[vt],X);if(zt===null){gt===null&&(gt=Fe);break}n&&gt&&zt.alternate===null&&i(P,gt),C=d(zt,C,vt),Ct===null?ct=zt:Ct.sibling=zt,Ct=zt,gt=Fe}if(vt===k.length)return a(P,gt),jt&&zs(P,vt),ct;if(gt===null){for(;vt<k.length;vt++)gt=$(P,k[vt],X),gt!==null&&(C=d(gt,C,vt),Ct===null?ct=gt:Ct.sibling=gt,Ct=gt);return jt&&zs(P,vt),ct}for(gt=l(gt);vt<k.length;vt++)Fe=F(gt,P,vt,k[vt],X),Fe!==null&&(n&&Fe.alternate!==null&&gt.delete(Fe.key===null?vt:Fe.key),C=d(Fe,C,vt),Ct===null?ct=Fe:Ct.sibling=Fe,Ct=Fe);return n&&gt.forEach(function(qr){return i(P,qr)}),jt&&zs(P,vt),ct}function yt(P,C,k,X){if(k==null)throw Error(r(151));for(var ct=null,Ct=null,gt=C,vt=C=0,Fe=null,zt=k.next();gt!==null&&!zt.done;vt++,zt=k.next()){gt.index>vt?(Fe=gt,gt=null):Fe=gt.sibling;var qr=q(P,gt,zt.value,X);if(qr===null){gt===null&&(gt=Fe);break}n&&gt&&qr.alternate===null&&i(P,gt),C=d(qr,C,vt),Ct===null?ct=qr:Ct.sibling=qr,Ct=qr,gt=Fe}if(zt.done)return a(P,gt),jt&&zs(P,vt),ct;if(gt===null){for(;!zt.done;vt++,zt=k.next())zt=$(P,zt.value,X),zt!==null&&(C=d(zt,C,vt),Ct===null?ct=zt:Ct.sibling=zt,Ct=zt);return jt&&zs(P,vt),ct}for(gt=l(gt);!zt.done;vt++,zt=k.next())zt=F(gt,P,vt,zt.value,X),zt!==null&&(n&&zt.alternate!==null&&gt.delete(zt.key===null?vt:zt.key),C=d(zt,C,vt),Ct===null?ct=zt:Ct.sibling=zt,Ct=zt);return n&&gt.forEach(function(d1){return i(P,d1)}),jt&&zs(P,vt),ct}function te(P,C,k,X){if(typeof k=="object"&&k!==null&&k.type===H&&k.key===null&&(k=k.props.children),typeof k=="object"&&k!==null){switch(k.$$typeof){case S:t:{for(var ct=k.key;C!==null;){if(C.key===ct){if(ct=k.type,ct===H){if(C.tag===7){a(P,C.sibling),X=f(C,k.props.children),X.return=P,P=X;break t}}else if(C.elementType===ct||typeof ct=="object"&&ct!==null&&ct.$$typeof===w&&Fy(ct)===C.type){a(P,C.sibling),X=f(C,k.props),Xl(X,k),X.return=P,P=X;break t}a(P,C);break}else i(P,C);C=C.sibling}k.type===H?(X=Bs(k.props.children,P.mode,X,k.key),X.return=P,P=X):(X=Kc(k.type,k.key,k.props,null,P.mode,X),Xl(X,k),X.return=P,P=X)}return v(P);case O:t:{for(ct=k.key;C!==null;){if(C.key===ct)if(C.tag===4&&C.stateNode.containerInfo===k.containerInfo&&C.stateNode.implementation===k.implementation){a(P,C.sibling),X=f(C,k.children||[]),X.return=P,P=X;break t}else{a(P,C);break}else i(P,C);C=C.sibling}X=Sd(k,P.mode,X),X.return=P,P=X}return v(P);case w:return ct=k._init,k=ct(k._payload),te(P,C,k,X)}if(de(k))return Et(P,C,k,X);if(U(k)){if(ct=U(k),typeof ct!="function")throw Error(r(150));return k=ct.call(k),yt(P,C,k,X)}if(typeof k.then=="function")return te(P,C,ch(k),X);if(k.$$typeof===it)return te(P,C,Zc(P,k),X);hh(P,k)}return typeof k=="string"&&k!==""||typeof k=="number"||typeof k=="bigint"?(k=""+k,C!==null&&C.tag===6?(a(P,C.sibling),X=f(C,k),X.return=P,P=X):(a(P,C),X=bd(k,P.mode,X),X.return=P,P=X),v(P)):a(P,C)}return function(P,C,k,X){try{Yl=0;var ct=te(P,C,k,X);return no=null,ct}catch(gt){if(gt===kl||gt===Wc)throw gt;var Ct=Rn(29,gt,null,P.mode);return Ct.lanes=X,Ct.return=P,Ct}finally{}}}var io=jy(!0),Gy=jy(!1),Qn=W(null),vi=null;function Ir(n){var i=n.alternate;et(Pe,Pe.current&1),et(Qn,n),vi===null&&(i===null||Ja.current!==null||i.memoizedState!==null)&&(vi=n)}function Hy(n){if(n.tag===22){if(et(Pe,Pe.current),et(Qn,n),vi===null){var i=n.alternate;i!==null&&i.memoizedState!==null&&(vi=n)}}else Rr()}function Rr(){et(Pe,Pe.current),et(Qn,Qn.current)}function Zi(n){ot(Qn),vi===n&&(vi=null),ot(Pe)}var Pe=W(0);function fh(n){for(var i=n;i!==null;){if(i.tag===13){var a=i.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||Qm(a)))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}function im(n,i,a,l){i=n.memoizedState,a=a(l,i),a=a==null?i:E({},i,a),n.memoizedState=a,n.lanes===0&&(n.updateQueue.baseState=a)}var rm={enqueueSetState:function(n,i,a){n=n._reactInternals;var l=Nn(),f=br(l);f.payload=i,a!=null&&(f.callback=a),i=Sr(n,f,l),i!==null&&(xn(i,n,l),ql(i,n,l))},enqueueReplaceState:function(n,i,a){n=n._reactInternals;var l=Nn(),f=br(l);f.tag=1,f.payload=i,a!=null&&(f.callback=a),i=Sr(n,f,l),i!==null&&(xn(i,n,l),ql(i,n,l))},enqueueForceUpdate:function(n,i){n=n._reactInternals;var a=Nn(),l=br(a);l.tag=2,i!=null&&(l.callback=i),i=Sr(n,l,a),i!==null&&(xn(i,n,a),ql(i,n,a))}};function Qy(n,i,a,l,f,d,v){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(l,d,v):i.prototype&&i.prototype.isPureReactComponent?!Nl(a,l)||!Nl(f,d):!0}function Ky(n,i,a,l){n=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(a,l),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(a,l),i.state!==n&&rm.enqueueReplaceState(i,i.state,null)}function Ks(n,i){var a=i;if("ref"in i){a={};for(var l in i)l!=="ref"&&(a[l]=i[l])}if(n=n.defaultProps){a===i&&(a=E({},a));for(var f in n)a[f]===void 0&&(a[f]=n[f])}return a}var dh=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)};function Yy(n){dh(n)}function Xy(n){console.error(n)}function $y(n){dh(n)}function mh(n,i){try{var a=n.onUncaughtError;a(i.value,{componentStack:i.stack})}catch(l){setTimeout(function(){throw l})}}function Zy(n,i,a){try{var l=n.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function sm(n,i,a){return a=br(a),a.tag=3,a.payload={element:null},a.callback=function(){mh(n,i)},a}function Jy(n){return n=br(n),n.tag=3,n}function Wy(n,i,a,l){var f=a.type.getDerivedStateFromError;if(typeof f=="function"){var d=l.value;n.payload=function(){return f(d)},n.callback=function(){Zy(i,a,l)}}var v=a.stateNode;v!==null&&typeof v.componentDidCatch=="function"&&(n.callback=function(){Zy(i,a,l),typeof f!="function"&&(Or===null?Or=new Set([this]):Or.add(this));var T=l.stack;this.componentDidCatch(l.value,{componentStack:T!==null?T:""})})}function dw(n,i,a,l,f){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(i=a.alternate,i!==null&&Ul(i,a,f,!0),a=Qn.current,a!==null){switch(a.tag){case 13:return vi===null?Vm():a.alternate===null&&pe===0&&(pe=3),a.flags&=-257,a.flags|=65536,a.lanes=f,l===Md?a.flags|=16384:(i=a.updateQueue,i===null?a.updateQueue=new Set([l]):i.add(l),Nm(n,l,f)),!1;case 22:return a.flags|=65536,l===Md?a.flags|=16384:(i=a.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=i):(a=i.retryQueue,a===null?i.retryQueue=new Set([l]):a.add(l)),Nm(n,l,f)),!1}throw Error(r(435,a.tag))}return Nm(n,l,f),Vm(),!1}if(jt)return i=Qn.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=f,l!==Rd&&(n=Error(r(422),{cause:l}),Pl(Fn(n,a)))):(l!==Rd&&(i=Error(r(423),{cause:l}),Pl(Fn(i,a))),n=n.current.alternate,n.flags|=65536,f&=-f,n.lanes|=f,l=Fn(l,a),f=sm(n.stateNode,l,f),Ld(n,f),pe!==4&&(pe=2)),!1;var d=Error(r(520),{cause:l});if(d=Fn(d,a),nu===null?nu=[d]:nu.push(d),pe!==4&&(pe=2),i===null)return!0;l=Fn(l,a),a=i;do{switch(a.tag){case 3:return a.flags|=65536,n=f&-f,a.lanes|=n,n=sm(a.stateNode,l,n),Ld(a,n),!1;case 1:if(i=a.type,d=a.stateNode,(a.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||d!==null&&typeof d.componentDidCatch=="function"&&(Or===null||!Or.has(d))))return a.flags|=65536,f&=-f,a.lanes|=f,f=Jy(f),Wy(f,n,a,l),Ld(a,f),!1}a=a.return}while(a!==null);return!1}var tv=Error(r(461)),ze=!1;function Ye(n,i,a,l){i.child=n===null?Gy(i,null,a,l):io(i,n.child,a,l)}function ev(n,i,a,l,f){a=a.render;var d=i.ref;if("ref"in l){var v={};for(var T in l)T!=="ref"&&(v[T]=l[T])}else v=l;return Gs(i),l=Fd(n,i,a,v,d,f),T=jd(),n!==null&&!ze?(Gd(n,i,f),Ji(n,i,f)):(jt&&T&&wd(i),i.flags|=1,Ye(n,i,l,f),i.child)}function nv(n,i,a,l,f){if(n===null){var d=a.type;return typeof d=="function"&&!Ad(d)&&d.defaultProps===void 0&&a.compare===null?(i.tag=15,i.type=d,iv(n,i,d,l,f)):(n=Kc(a.type,null,l,i,i.mode,f),n.ref=i.ref,n.return=i,i.child=n)}if(d=n.child,!dm(n,f)){var v=d.memoizedProps;if(a=a.compare,a=a!==null?a:Nl,a(v,l)&&n.ref===i.ref)return Ji(n,i,f)}return i.flags|=1,n=Hi(d,l),n.ref=i.ref,n.return=i,i.child=n}function iv(n,i,a,l,f){if(n!==null){var d=n.memoizedProps;if(Nl(d,l)&&n.ref===i.ref)if(ze=!1,i.pendingProps=l=d,dm(n,f))(n.flags&131072)!==0&&(ze=!0);else return i.lanes=n.lanes,Ji(n,i,f)}return am(n,i,a,l,f)}function rv(n,i,a){var l=i.pendingProps,f=l.children,d=n!==null?n.memoizedState:null;if(l.mode==="hidden"){if((i.flags&128)!==0){if(l=d!==null?d.baseLanes|a:a,n!==null){for(f=i.child=n.child,d=0;f!==null;)d=d|f.lanes|f.childLanes,f=f.sibling;i.childLanes=d&~l}else i.childLanes=0,i.child=null;return sv(n,i,l,a)}if((a&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},n!==null&&Jc(i,d!==null?d.cachePool:null),d!==null?iy(i,d):kd(),Hy(i);else return i.lanes=i.childLanes=536870912,sv(n,i,d!==null?d.baseLanes|a:a,a)}else d!==null?(Jc(i,d.cachePool),iy(i,d),Rr(),i.memoizedState=null):(n!==null&&Jc(i,null),kd(),Rr());return Ye(n,i,f,a),i.child}function sv(n,i,a,l){var f=Od();return f=f===null?null:{parent:Me._currentValue,pool:f},i.memoizedState={baseLanes:a,cachePool:f},n!==null&&Jc(i,null),kd(),Hy(i),n!==null&&Ul(n,i,l,!0),null}function gh(n,i){var a=i.ref;if(a===null)n!==null&&n.ref!==null&&(i.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(r(284));(n===null||n.ref!==a)&&(i.flags|=4194816)}}function am(n,i,a,l,f){return Gs(i),a=Fd(n,i,a,l,void 0,f),l=jd(),n!==null&&!ze?(Gd(n,i,f),Ji(n,i,f)):(jt&&l&&wd(i),i.flags|=1,Ye(n,i,a,f),i.child)}function av(n,i,a,l,f,d){return Gs(i),i.updateQueue=null,a=sy(i,l,a,f),ry(n),l=jd(),n!==null&&!ze?(Gd(n,i,d),Ji(n,i,d)):(jt&&l&&wd(i),i.flags|=1,Ye(n,i,a,d),i.child)}function ov(n,i,a,l,f){if(Gs(i),i.stateNode===null){var d=Ka,v=a.contextType;typeof v=="object"&&v!==null&&(d=en(v)),d=new a(l,d),i.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=rm,i.stateNode=d,d._reactInternals=i,d=i.stateNode,d.props=l,d.state=i.memoizedState,d.refs={},Pd(i),v=a.contextType,d.context=typeof v=="object"&&v!==null?en(v):Ka,d.state=i.memoizedState,v=a.getDerivedStateFromProps,typeof v=="function"&&(im(i,a,v,l),d.state=i.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(v=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),v!==d.state&&rm.enqueueReplaceState(d,d.state,null),jl(i,l,d,f),Fl(),d.state=i.memoizedState),typeof d.componentDidMount=="function"&&(i.flags|=4194308),l=!0}else if(n===null){d=i.stateNode;var T=i.memoizedProps,I=Ks(a,T);d.props=I;var z=d.context,K=a.contextType;v=Ka,typeof K=="object"&&K!==null&&(v=en(K));var $=a.getDerivedStateFromProps;K=typeof $=="function"||typeof d.getSnapshotBeforeUpdate=="function",T=i.pendingProps!==T,K||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(T||z!==v)&&Ky(i,d,l,v),Ar=!1;var q=i.memoizedState;d.state=q,jl(i,l,d,f),Fl(),z=i.memoizedState,T||q!==z||Ar?(typeof $=="function"&&(im(i,a,$,l),z=i.memoizedState),(I=Ar||Qy(i,a,I,l,q,z,v))?(K||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(i.flags|=4194308)):(typeof d.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=l,i.memoizedState=z),d.props=l,d.state=z,d.context=v,l=I):(typeof d.componentDidMount=="function"&&(i.flags|=4194308),l=!1)}else{d=i.stateNode,Ud(n,i),v=i.memoizedProps,K=Ks(a,v),d.props=K,$=i.pendingProps,q=d.context,z=a.contextType,I=Ka,typeof z=="object"&&z!==null&&(I=en(z)),T=a.getDerivedStateFromProps,(z=typeof T=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(v!==$||q!==I)&&Ky(i,d,l,I),Ar=!1,q=i.memoizedState,d.state=q,jl(i,l,d,f),Fl();var F=i.memoizedState;v!==$||q!==F||Ar||n!==null&&n.dependencies!==null&&$c(n.dependencies)?(typeof T=="function"&&(im(i,a,T,l),F=i.memoizedState),(K=Ar||Qy(i,a,K,l,q,F,I)||n!==null&&n.dependencies!==null&&$c(n.dependencies))?(z||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(l,F,I),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(l,F,I)),typeof d.componentDidUpdate=="function"&&(i.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof d.componentDidUpdate!="function"||v===n.memoizedProps&&q===n.memoizedState||(i.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||v===n.memoizedProps&&q===n.memoizedState||(i.flags|=1024),i.memoizedProps=l,i.memoizedState=F),d.props=l,d.state=F,d.context=I,l=K):(typeof d.componentDidUpdate!="function"||v===n.memoizedProps&&q===n.memoizedState||(i.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||v===n.memoizedProps&&q===n.memoizedState||(i.flags|=1024),l=!1)}return d=l,gh(n,i),l=(i.flags&128)!==0,d||l?(d=i.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:d.render(),i.flags|=1,n!==null&&l?(i.child=io(i,n.child,null,f),i.child=io(i,null,a,f)):Ye(n,i,a,f),i.memoizedState=d.state,n=i.child):n=Ji(n,i,f),n}function lv(n,i,a,l){return Ml(),i.flags|=256,Ye(n,i,a,l),i.child}var om={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function lm(n){return{baseLanes:n,cachePool:X_()}}function um(n,i,a){return n=n!==null?n.childLanes&~a:0,i&&(n|=Kn),n}function uv(n,i,a){var l=i.pendingProps,f=!1,d=(i.flags&128)!==0,v;if((v=d)||(v=n!==null&&n.memoizedState===null?!1:(Pe.current&2)!==0),v&&(f=!0,i.flags&=-129),v=(i.flags&32)!==0,i.flags&=-33,n===null){if(jt){if(f?Ir(i):Rr(),jt){var T=ge,I;if(I=T){t:{for(I=T,T=yi;I.nodeType!==8;){if(!T){T=null;break t}if(I=ni(I.nextSibling),I===null){T=null;break t}}T=I}T!==null?(i.memoizedState={dehydrated:T,treeContext:ks!==null?{id:Qi,overflow:Ki}:null,retryLane:536870912,hydrationErrors:null},I=Rn(18,null,null,0),I.stateNode=T,I.return=i,i.child=I,fn=i,ge=null,I=!0):I=!1}I||Fs(i)}if(T=i.memoizedState,T!==null&&(T=T.dehydrated,T!==null))return Qm(T)?i.lanes=32:i.lanes=536870912,null;Zi(i)}return T=l.children,l=l.fallback,f?(Rr(),f=i.mode,T=ph({mode:"hidden",children:T},f),l=Bs(l,f,a,null),T.return=i,l.return=i,T.sibling=l,i.child=T,f=i.child,f.memoizedState=lm(a),f.childLanes=um(n,v,a),i.memoizedState=om,l):(Ir(i),cm(i,T))}if(I=n.memoizedState,I!==null&&(T=I.dehydrated,T!==null)){if(d)i.flags&256?(Ir(i),i.flags&=-257,i=hm(n,i,a)):i.memoizedState!==null?(Rr(),i.child=n.child,i.flags|=128,i=null):(Rr(),f=l.fallback,T=i.mode,l=ph({mode:"visible",children:l.children},T),f=Bs(f,T,a,null),f.flags|=2,l.return=i,f.return=i,l.sibling=f,i.child=l,io(i,n.child,null,a),l=i.child,l.memoizedState=lm(a),l.childLanes=um(n,v,a),i.memoizedState=om,i=f);else if(Ir(i),Qm(T)){if(v=T.nextSibling&&T.nextSibling.dataset,v)var z=v.dgst;v=z,l=Error(r(419)),l.stack="",l.digest=v,Pl({value:l,source:null,stack:null}),i=hm(n,i,a)}else if(ze||Ul(n,i,a,!1),v=(a&n.childLanes)!==0,ze||v){if(v=ie,v!==null&&(l=a&-a,l=(l&42)!==0?1:mr(l),l=(l&(v.suspendedLanes|a))!==0?0:l,l!==0&&l!==I.retryLane))throw I.retryLane=l,Qa(n,l),xn(v,n,l),tv;T.data==="$?"||Vm(),i=hm(n,i,a)}else T.data==="$?"?(i.flags|=192,i.child=n.child,i=null):(n=I.treeContext,ge=ni(T.nextSibling),fn=i,jt=!0,qs=null,yi=!1,n!==null&&(Gn[Hn++]=Qi,Gn[Hn++]=Ki,Gn[Hn++]=ks,Qi=n.id,Ki=n.overflow,ks=i),i=cm(i,l.children),i.flags|=4096);return i}return f?(Rr(),f=l.fallback,T=i.mode,I=n.child,z=I.sibling,l=Hi(I,{mode:"hidden",children:l.children}),l.subtreeFlags=I.subtreeFlags&65011712,z!==null?f=Hi(z,f):(f=Bs(f,T,a,null),f.flags|=2),f.return=i,l.return=i,l.sibling=f,i.child=l,l=f,f=i.child,T=n.child.memoizedState,T===null?T=lm(a):(I=T.cachePool,I!==null?(z=Me._currentValue,I=I.parent!==z?{parent:z,pool:z}:I):I=X_(),T={baseLanes:T.baseLanes|a,cachePool:I}),f.memoizedState=T,f.childLanes=um(n,v,a),i.memoizedState=om,l):(Ir(i),a=n.child,n=a.sibling,a=Hi(a,{mode:"visible",children:l.children}),a.return=i,a.sibling=null,n!==null&&(v=i.deletions,v===null?(i.deletions=[n],i.flags|=16):v.push(n)),i.child=a,i.memoizedState=null,a)}function cm(n,i){return i=ph({mode:"visible",children:i},n.mode),i.return=n,n.child=i}function ph(n,i){return n=Rn(22,n,null,i),n.lanes=0,n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},n}function hm(n,i,a){return io(i,n.child,null,a),n=cm(i,i.pendingProps.children),n.flags|=2,i.memoizedState=null,n}function cv(n,i,a){n.lanes|=i;var l=n.alternate;l!==null&&(l.lanes|=i),Vd(n.return,i,a)}function fm(n,i,a,l,f){var d=n.memoizedState;d===null?n.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:f}:(d.isBackwards=i,d.rendering=null,d.renderingStartTime=0,d.last=l,d.tail=a,d.tailMode=f)}function hv(n,i,a){var l=i.pendingProps,f=l.revealOrder,d=l.tail;if(Ye(n,i,l.children,a),l=Pe.current,(l&2)!==0)l=l&1|2,i.flags|=128;else{if(n!==null&&(n.flags&128)!==0)t:for(n=i.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&cv(n,a,i);else if(n.tag===19)cv(n,a,i);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===i)break t;for(;n.sibling===null;){if(n.return===null||n.return===i)break t;n=n.return}n.sibling.return=n.return,n=n.sibling}l&=1}switch(et(Pe,l),f){case"forwards":for(a=i.child,f=null;a!==null;)n=a.alternate,n!==null&&fh(n)===null&&(f=a),a=a.sibling;a=f,a===null?(f=i.child,i.child=null):(f=a.sibling,a.sibling=null),fm(i,!1,f,a,d);break;case"backwards":for(a=null,f=i.child,i.child=null;f!==null;){if(n=f.alternate,n!==null&&fh(n)===null){i.child=f;break}n=f.sibling,f.sibling=a,a=f,f=n}fm(i,!0,a,null,d);break;case"together":fm(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function Ji(n,i,a){if(n!==null&&(i.dependencies=n.dependencies),xr|=i.lanes,(a&i.childLanes)===0)if(n!==null){if(Ul(n,i,a,!1),(a&i.childLanes)===0)return null}else return null;if(n!==null&&i.child!==n.child)throw Error(r(153));if(i.child!==null){for(n=i.child,a=Hi(n,n.pendingProps),i.child=a,a.return=i;n.sibling!==null;)n=n.sibling,a=a.sibling=Hi(n,n.pendingProps),a.return=i;a.sibling=null}return i.child}function dm(n,i){return(n.lanes&i)!==0?!0:(n=n.dependencies,!!(n!==null&&$c(n)))}function mw(n,i,a){switch(i.tag){case 3:ne(i,i.stateNode.containerInfo),Tr(i,Me,n.memoizedState.cache),Ml();break;case 27:case 5:dr(i);break;case 4:ne(i,i.stateNode.containerInfo);break;case 10:Tr(i,i.type,i.memoizedProps.value);break;case 13:var l=i.memoizedState;if(l!==null)return l.dehydrated!==null?(Ir(i),i.flags|=128,null):(a&i.child.childLanes)!==0?uv(n,i,a):(Ir(i),n=Ji(n,i,a),n!==null?n.sibling:null);Ir(i);break;case 19:var f=(n.flags&128)!==0;if(l=(a&i.childLanes)!==0,l||(Ul(n,i,a,!1),l=(a&i.childLanes)!==0),f){if(l)return hv(n,i,a);i.flags|=128}if(f=i.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),et(Pe,Pe.current),l)break;return null;case 22:case 23:return i.lanes=0,rv(n,i,a);case 24:Tr(i,Me,n.memoizedState.cache)}return Ji(n,i,a)}function fv(n,i,a){if(n!==null)if(n.memoizedProps!==i.pendingProps)ze=!0;else{if(!dm(n,a)&&(i.flags&128)===0)return ze=!1,mw(n,i,a);ze=(n.flags&131072)!==0}else ze=!1,jt&&(i.flags&1048576)!==0&&F_(i,Xc,i.index);switch(i.lanes=0,i.tag){case 16:t:{n=i.pendingProps;var l=i.elementType,f=l._init;if(l=f(l._payload),i.type=l,typeof l=="function")Ad(l)?(n=Ks(l,n),i.tag=1,i=ov(null,i,l,n,a)):(i.tag=0,i=am(null,i,l,n,a));else{if(l!=null){if(f=l.$$typeof,f===St){i.tag=11,i=ev(null,i,l,n,a);break t}else if(f===N){i.tag=14,i=nv(null,i,l,n,a);break t}}throw i=He(l)||l,Error(r(306,i,""))}}return i;case 0:return am(n,i,i.type,i.pendingProps,a);case 1:return l=i.type,f=Ks(l,i.pendingProps),ov(n,i,l,f,a);case 3:t:{if(ne(i,i.stateNode.containerInfo),n===null)throw Error(r(387));l=i.pendingProps;var d=i.memoizedState;f=d.element,Ud(n,i),jl(i,l,null,a);var v=i.memoizedState;if(l=v.cache,Tr(i,Me,l),l!==d.cache&&Cd(i,[Me],a,!0),Fl(),l=v.element,d.isDehydrated)if(d={element:l,isDehydrated:!1,cache:v.cache},i.updateQueue.baseState=d,i.memoizedState=d,i.flags&256){i=lv(n,i,l,a);break t}else if(l!==f){f=Fn(Error(r(424)),i),Pl(f),i=lv(n,i,l,a);break t}else{switch(n=i.stateNode.containerInfo,n.nodeType){case 9:n=n.body;break;default:n=n.nodeName==="HTML"?n.ownerDocument.body:n}for(ge=ni(n.firstChild),fn=i,jt=!0,qs=null,yi=!0,a=Gy(i,null,l,a),i.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(Ml(),l===f){i=Ji(n,i,a);break t}Ye(n,i,l,a)}i=i.child}return i;case 26:return gh(n,i),n===null?(a=pE(i.type,null,i.pendingProps,null))?i.memoizedState=a:jt||(a=i.type,n=i.pendingProps,l=Ch(At.current).createElement(a),l[Ne]=i,l[Se]=n,$e(l,a,n),ye(l),i.stateNode=l):i.memoizedState=pE(i.type,n.memoizedProps,i.pendingProps,n.memoizedState),null;case 27:return dr(i),n===null&&jt&&(l=i.stateNode=dE(i.type,i.pendingProps,At.current),fn=i,yi=!0,f=ge,Ur(i.type)?(Km=f,ge=ni(l.firstChild)):ge=f),Ye(n,i,i.pendingProps.children,a),gh(n,i),n===null&&(i.flags|=4194304),i.child;case 5:return n===null&&jt&&((f=l=ge)&&(l=Fw(l,i.type,i.pendingProps,yi),l!==null?(i.stateNode=l,fn=i,ge=ni(l.firstChild),yi=!1,f=!0):f=!1),f||Fs(i)),dr(i),f=i.type,d=i.pendingProps,v=n!==null?n.memoizedProps:null,l=d.children,jm(f,d)?l=null:v!==null&&jm(f,v)&&(i.flags|=32),i.memoizedState!==null&&(f=Fd(n,i,aw,null,null,a),hu._currentValue=f),gh(n,i),Ye(n,i,l,a),i.child;case 6:return n===null&&jt&&((n=a=ge)&&(a=jw(a,i.pendingProps,yi),a!==null?(i.stateNode=a,fn=i,ge=null,n=!0):n=!1),n||Fs(i)),null;case 13:return uv(n,i,a);case 4:return ne(i,i.stateNode.containerInfo),l=i.pendingProps,n===null?i.child=io(i,null,l,a):Ye(n,i,l,a),i.child;case 11:return ev(n,i,i.type,i.pendingProps,a);case 7:return Ye(n,i,i.pendingProps,a),i.child;case 8:return Ye(n,i,i.pendingProps.children,a),i.child;case 12:return Ye(n,i,i.pendingProps.children,a),i.child;case 10:return l=i.pendingProps,Tr(i,i.type,l.value),Ye(n,i,l.children,a),i.child;case 9:return f=i.type._context,l=i.pendingProps.children,Gs(i),f=en(f),l=l(f),i.flags|=1,Ye(n,i,l,a),i.child;case 14:return nv(n,i,i.type,i.pendingProps,a);case 15:return iv(n,i,i.type,i.pendingProps,a);case 19:return hv(n,i,a);case 31:return l=i.pendingProps,a=i.mode,l={mode:l.mode,children:l.children},n===null?(a=ph(l,a),a.ref=i.ref,i.child=a,a.return=i,i=a):(a=Hi(n.child,l),a.ref=i.ref,i.child=a,a.return=i,i=a),i;case 22:return rv(n,i,a);case 24:return Gs(i),l=en(Me),n===null?(f=Od(),f===null&&(f=ie,d=Nd(),f.pooledCache=d,d.refCount++,d!==null&&(f.pooledCacheLanes|=a),f=d),i.memoizedState={parent:l,cache:f},Pd(i),Tr(i,Me,f)):((n.lanes&a)!==0&&(Ud(n,i),jl(i,null,null,a),Fl()),f=n.memoizedState,d=i.memoizedState,f.parent!==l?(f={parent:l,cache:l},i.memoizedState=f,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=f),Tr(i,Me,l)):(l=d.cache,Tr(i,Me,l),l!==f.cache&&Cd(i,[Me],a,!0))),Ye(n,i,i.pendingProps.children,a),i.child;case 29:throw i.pendingProps}throw Error(r(156,i.tag))}function Wi(n){n.flags|=4}function dv(n,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!TE(i)){if(i=Qn.current,i!==null&&((Bt&4194048)===Bt?vi!==null:(Bt&62914560)!==Bt&&(Bt&536870912)===0||i!==vi))throw zl=Md,$_;n.flags|=8192}}function _h(n,i){i!==null&&(n.flags|=4),n.flags&16384&&(i=n.tag!==22?dl():536870912,n.lanes|=i,oo|=i)}function $l(n,i){if(!jt)switch(n.tailMode){case"hidden":i=n.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?n.tail=null:a.sibling=null;break;case"collapsed":a=n.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?i||n.tail===null?n.tail=null:n.tail.sibling=null:l.sibling=null}}function fe(n){var i=n.alternate!==null&&n.alternate.child===n.child,a=0,l=0;if(i)for(var f=n.child;f!==null;)a|=f.lanes|f.childLanes,l|=f.subtreeFlags&65011712,l|=f.flags&65011712,f.return=n,f=f.sibling;else for(f=n.child;f!==null;)a|=f.lanes|f.childLanes,l|=f.subtreeFlags,l|=f.flags,f.return=n,f=f.sibling;return n.subtreeFlags|=l,n.childLanes=a,i}function gw(n,i,a){var l=i.pendingProps;switch(Id(i),i.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return fe(i),null;case 1:return fe(i),null;case 3:return a=i.stateNode,l=null,n!==null&&(l=n.memoizedState.cache),i.memoizedState.cache!==l&&(i.flags|=2048),Xi(Me),ai(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(n===null||n.child===null)&&(Ol(i)?Wi(i):n===null||n.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,H_())),fe(i),null;case 26:return a=i.memoizedState,n===null?(Wi(i),a!==null?(fe(i),dv(i,a)):(fe(i),i.flags&=-16777217)):a?a!==n.memoizedState?(Wi(i),fe(i),dv(i,a)):(fe(i),i.flags&=-16777217):(n.memoizedProps!==l&&Wi(i),fe(i),i.flags&=-16777217),null;case 27:xi(i),a=At.current;var f=i.type;if(n!==null&&i.stateNode!=null)n.memoizedProps!==l&&Wi(i);else{if(!l){if(i.stateNode===null)throw Error(r(166));return fe(i),null}n=_t.current,Ol(i)?j_(i):(n=dE(f,l,a),i.stateNode=n,Wi(i))}return fe(i),null;case 5:if(xi(i),a=i.type,n!==null&&i.stateNode!=null)n.memoizedProps!==l&&Wi(i);else{if(!l){if(i.stateNode===null)throw Error(r(166));return fe(i),null}if(n=_t.current,Ol(i))j_(i);else{switch(f=Ch(At.current),n){case 1:n=f.createElementNS("http://www.w3.org/2000/svg",a);break;case 2:n=f.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;default:switch(a){case"svg":n=f.createElementNS("http://www.w3.org/2000/svg",a);break;case"math":n=f.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;case"script":n=f.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild);break;case"select":n=typeof l.is=="string"?f.createElement("select",{is:l.is}):f.createElement("select"),l.multiple?n.multiple=!0:l.size&&(n.size=l.size);break;default:n=typeof l.is=="string"?f.createElement(a,{is:l.is}):f.createElement(a)}}n[Ne]=i,n[Se]=l;t:for(f=i.child;f!==null;){if(f.tag===5||f.tag===6)n.appendChild(f.stateNode);else if(f.tag!==4&&f.tag!==27&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===i)break t;for(;f.sibling===null;){if(f.return===null||f.return===i)break t;f=f.return}f.sibling.return=f.return,f=f.sibling}i.stateNode=n;t:switch($e(n,a,l),a){case"button":case"input":case"select":case"textarea":n=!!l.autoFocus;break t;case"img":n=!0;break t;default:n=!1}n&&Wi(i)}}return fe(i),i.flags&=-16777217,null;case 6:if(n&&i.stateNode!=null)n.memoizedProps!==l&&Wi(i);else{if(typeof l!="string"&&i.stateNode===null)throw Error(r(166));if(n=At.current,Ol(i)){if(n=i.stateNode,a=i.memoizedProps,l=null,f=fn,f!==null)switch(f.tag){case 27:case 5:l=f.memoizedProps}n[Ne]=i,n=!!(n.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||aE(n.nodeValue,a)),n||Fs(i)}else n=Ch(n).createTextNode(l),n[Ne]=i,i.stateNode=n}return fe(i),null;case 13:if(l=i.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(f=Ol(i),l!==null&&l.dehydrated!==null){if(n===null){if(!f)throw Error(r(318));if(f=i.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(r(317));f[Ne]=i}else Ml(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;fe(i),f=!1}else f=H_(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=f),f=!0;if(!f)return i.flags&256?(Zi(i),i):(Zi(i),null)}if(Zi(i),(i.flags&128)!==0)return i.lanes=a,i;if(a=l!==null,n=n!==null&&n.memoizedState!==null,a){l=i.child,f=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(f=l.alternate.memoizedState.cachePool.pool);var d=null;l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(d=l.memoizedState.cachePool.pool),d!==f&&(l.flags|=2048)}return a!==n&&a&&(i.child.flags|=8192),_h(i,i.updateQueue),fe(i),null;case 4:return ai(),n===null&&Bm(i.stateNode.containerInfo),fe(i),null;case 10:return Xi(i.type),fe(i),null;case 19:if(ot(Pe),f=i.memoizedState,f===null)return fe(i),null;if(l=(i.flags&128)!==0,d=f.rendering,d===null)if(l)$l(f,!1);else{if(pe!==0||n!==null&&(n.flags&128)!==0)for(n=i.child;n!==null;){if(d=fh(n),d!==null){for(i.flags|=128,$l(f,!1),n=d.updateQueue,i.updateQueue=n,_h(i,n),i.subtreeFlags=0,n=a,a=i.child;a!==null;)q_(a,n),a=a.sibling;return et(Pe,Pe.current&1|2),i.child}n=n.sibling}f.tail!==null&&Un()>Eh&&(i.flags|=128,l=!0,$l(f,!1),i.lanes=4194304)}else{if(!l)if(n=fh(d),n!==null){if(i.flags|=128,l=!0,n=n.updateQueue,i.updateQueue=n,_h(i,n),$l(f,!0),f.tail===null&&f.tailMode==="hidden"&&!d.alternate&&!jt)return fe(i),null}else 2*Un()-f.renderingStartTime>Eh&&a!==536870912&&(i.flags|=128,l=!0,$l(f,!1),i.lanes=4194304);f.isBackwards?(d.sibling=i.child,i.child=d):(n=f.last,n!==null?n.sibling=d:i.child=d,f.last=d)}return f.tail!==null?(i=f.tail,f.rendering=i,f.tail=i.sibling,f.renderingStartTime=Un(),i.sibling=null,n=Pe.current,et(Pe,l?n&1|2:n&1),i):(fe(i),null);case 22:case 23:return Zi(i),zd(),l=i.memoizedState!==null,n!==null?n.memoizedState!==null!==l&&(i.flags|=8192):l&&(i.flags|=8192),l?(a&536870912)!==0&&(i.flags&128)===0&&(fe(i),i.subtreeFlags&6&&(i.flags|=8192)):fe(i),a=i.updateQueue,a!==null&&_h(i,a.retryQueue),a=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(a=n.memoizedState.cachePool.pool),l=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),l!==a&&(i.flags|=2048),n!==null&&ot(Hs),null;case 24:return a=null,n!==null&&(a=n.memoizedState.cache),i.memoizedState.cache!==a&&(i.flags|=2048),Xi(Me),fe(i),null;case 25:return null;case 30:return null}throw Error(r(156,i.tag))}function pw(n,i){switch(Id(i),i.tag){case 1:return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 3:return Xi(Me),ai(),n=i.flags,(n&65536)!==0&&(n&128)===0?(i.flags=n&-65537|128,i):null;case 26:case 27:case 5:return xi(i),null;case 13:if(Zi(i),n=i.memoizedState,n!==null&&n.dehydrated!==null){if(i.alternate===null)throw Error(r(340));Ml()}return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 19:return ot(Pe),null;case 4:return ai(),null;case 10:return Xi(i.type),null;case 22:case 23:return Zi(i),zd(),n!==null&&ot(Hs),n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 24:return Xi(Me),null;case 25:return null;default:return null}}function mv(n,i){switch(Id(i),i.tag){case 3:Xi(Me),ai();break;case 26:case 27:case 5:xi(i);break;case 4:ai();break;case 13:Zi(i);break;case 19:ot(Pe);break;case 10:Xi(i.type);break;case 22:case 23:Zi(i),zd(),n!==null&&ot(Hs);break;case 24:Xi(Me)}}function Zl(n,i){try{var a=i.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var f=l.next;a=f;do{if((a.tag&n)===n){l=void 0;var d=a.create,v=a.inst;l=d(),v.destroy=l}a=a.next}while(a!==f)}}catch(T){ee(i,i.return,T)}}function Dr(n,i,a){try{var l=i.updateQueue,f=l!==null?l.lastEffect:null;if(f!==null){var d=f.next;l=d;do{if((l.tag&n)===n){var v=l.inst,T=v.destroy;if(T!==void 0){v.destroy=void 0,f=i;var I=a,z=T;try{z()}catch(K){ee(f,I,K)}}}l=l.next}while(l!==d)}}catch(K){ee(i,i.return,K)}}function gv(n){var i=n.updateQueue;if(i!==null){var a=n.stateNode;try{ny(i,a)}catch(l){ee(n,n.return,l)}}}function pv(n,i,a){a.props=Ks(n.type,n.memoizedProps),a.state=n.memoizedState;try{a.componentWillUnmount()}catch(l){ee(n,i,l)}}function Jl(n,i){try{var a=n.ref;if(a!==null){switch(n.tag){case 26:case 27:case 5:var l=n.stateNode;break;case 30:l=n.stateNode;break;default:l=n.stateNode}typeof a=="function"?n.refCleanup=a(l):a.current=l}}catch(f){ee(n,i,f)}}function Ei(n,i){var a=n.ref,l=n.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(f){ee(n,i,f)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(f){ee(n,i,f)}else a.current=null}function _v(n){var i=n.type,a=n.memoizedProps,l=n.stateNode;try{t:switch(i){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break t;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(f){ee(n,n.return,f)}}function mm(n,i,a){try{var l=n.stateNode;Lw(l,n.type,a,i),l[Se]=i}catch(f){ee(n,n.return,f)}}function yv(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&Ur(n.type)||n.tag===4}function gm(n){t:for(;;){for(;n.sibling===null;){if(n.return===null||yv(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&Ur(n.type)||n.flags&2||n.child===null||n.tag===4)continue t;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function pm(n,i,a){var l=n.tag;if(l===5||l===6)n=n.stateNode,i?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(n,i):(i=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,i.appendChild(n),a=a._reactRootContainer,a!=null||i.onclick!==null||(i.onclick=Vh));else if(l!==4&&(l===27&&Ur(n.type)&&(a=n.stateNode,i=null),n=n.child,n!==null))for(pm(n,i,a),n=n.sibling;n!==null;)pm(n,i,a),n=n.sibling}function yh(n,i,a){var l=n.tag;if(l===5||l===6)n=n.stateNode,i?a.insertBefore(n,i):a.appendChild(n);else if(l!==4&&(l===27&&Ur(n.type)&&(a=n.stateNode),n=n.child,n!==null))for(yh(n,i,a),n=n.sibling;n!==null;)yh(n,i,a),n=n.sibling}function vv(n){var i=n.stateNode,a=n.memoizedProps;try{for(var l=n.type,f=i.attributes;f.length;)i.removeAttributeNode(f[0]);$e(i,l,a),i[Ne]=n,i[Se]=a}catch(d){ee(n,n.return,d)}}var tr=!1,Ee=!1,_m=!1,Ev=typeof WeakSet=="function"?WeakSet:Set,qe=null;function _w(n,i){if(n=n.containerInfo,qm=Uh,n=N_(n),gd(n)){if("selectionStart"in n)var a={start:n.selectionStart,end:n.selectionEnd};else t:{a=(a=n.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var f=l.anchorOffset,d=l.focusNode;l=l.focusOffset;try{a.nodeType,d.nodeType}catch{a=null;break t}var v=0,T=-1,I=-1,z=0,K=0,$=n,q=null;e:for(;;){for(var F;$!==a||f!==0&&$.nodeType!==3||(T=v+f),$!==d||l!==0&&$.nodeType!==3||(I=v+l),$.nodeType===3&&(v+=$.nodeValue.length),(F=$.firstChild)!==null;)q=$,$=F;for(;;){if($===n)break e;if(q===a&&++z===f&&(T=v),q===d&&++K===l&&(I=v),(F=$.nextSibling)!==null)break;$=q,q=$.parentNode}$=F}a=T===-1||I===-1?null:{start:T,end:I}}else a=null}a=a||{start:0,end:0}}else a=null;for(Fm={focusedElem:n,selectionRange:a},Uh=!1,qe=i;qe!==null;)if(i=qe,n=i.child,(i.subtreeFlags&1024)!==0&&n!==null)n.return=i,qe=n;else for(;qe!==null;){switch(i=qe,d=i.alternate,n=i.flags,i.tag){case 0:break;case 11:case 15:break;case 1:if((n&1024)!==0&&d!==null){n=void 0,a=i,f=d.memoizedProps,d=d.memoizedState,l=a.stateNode;try{var Et=Ks(a.type,f,a.elementType===a.type);n=l.getSnapshotBeforeUpdate(Et,d),l.__reactInternalSnapshotBeforeUpdate=n}catch(yt){ee(a,a.return,yt)}}break;case 3:if((n&1024)!==0){if(n=i.stateNode.containerInfo,a=n.nodeType,a===9)Hm(n);else if(a===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":Hm(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(r(163))}if(n=i.sibling,n!==null){n.return=i.return,qe=n;break}qe=i.return}}function Tv(n,i,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:Vr(n,a),l&4&&Zl(5,a);break;case 1:if(Vr(n,a),l&4)if(n=a.stateNode,i===null)try{n.componentDidMount()}catch(v){ee(a,a.return,v)}else{var f=Ks(a.type,i.memoizedProps);i=i.memoizedState;try{n.componentDidUpdate(f,i,n.__reactInternalSnapshotBeforeUpdate)}catch(v){ee(a,a.return,v)}}l&64&&gv(a),l&512&&Jl(a,a.return);break;case 3:if(Vr(n,a),l&64&&(n=a.updateQueue,n!==null)){if(i=null,a.child!==null)switch(a.child.tag){case 27:case 5:i=a.child.stateNode;break;case 1:i=a.child.stateNode}try{ny(n,i)}catch(v){ee(a,a.return,v)}}break;case 27:i===null&&l&4&&vv(a);case 26:case 5:Vr(n,a),i===null&&l&4&&_v(a),l&512&&Jl(a,a.return);break;case 12:Vr(n,a);break;case 13:Vr(n,a),l&4&&Sv(n,a),l&64&&(n=a.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(a=Iw.bind(null,a),Gw(n,a))));break;case 22:if(l=a.memoizedState!==null||tr,!l){i=i!==null&&i.memoizedState!==null||Ee,f=tr;var d=Ee;tr=l,(Ee=i)&&!d?Cr(n,a,(a.subtreeFlags&8772)!==0):Vr(n,a),tr=f,Ee=d}break;case 30:break;default:Vr(n,a)}}function Av(n){var i=n.alternate;i!==null&&(n.alternate=null,Av(i)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(i=n.stateNode,i!==null&&_r(i)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var le=null,yn=!1;function er(n,i,a){for(a=a.child;a!==null;)bv(n,i,a),a=a.sibling}function bv(n,i,a){if(Qt&&typeof Qt.onCommitFiberUnmount=="function")try{Qt.onCommitFiberUnmount(me,a)}catch{}switch(a.tag){case 26:Ee||Ei(a,i),er(n,i,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:Ee||Ei(a,i);var l=le,f=yn;Ur(a.type)&&(le=a.stateNode,yn=!1),er(n,i,a),ou(a.stateNode),le=l,yn=f;break;case 5:Ee||Ei(a,i);case 6:if(l=le,f=yn,le=null,er(n,i,a),le=l,yn=f,le!==null)if(yn)try{(le.nodeType===9?le.body:le.nodeName==="HTML"?le.ownerDocument.body:le).removeChild(a.stateNode)}catch(d){ee(a,i,d)}else try{le.removeChild(a.stateNode)}catch(d){ee(a,i,d)}break;case 18:le!==null&&(yn?(n=le,hE(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,a.stateNode),gu(n)):hE(le,a.stateNode));break;case 4:l=le,f=yn,le=a.stateNode.containerInfo,yn=!0,er(n,i,a),le=l,yn=f;break;case 0:case 11:case 14:case 15:Ee||Dr(2,a,i),Ee||Dr(4,a,i),er(n,i,a);break;case 1:Ee||(Ei(a,i),l=a.stateNode,typeof l.componentWillUnmount=="function"&&pv(a,i,l)),er(n,i,a);break;case 21:er(n,i,a);break;case 22:Ee=(l=Ee)||a.memoizedState!==null,er(n,i,a),Ee=l;break;default:er(n,i,a)}}function Sv(n,i){if(i.memoizedState===null&&(n=i.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{gu(n)}catch(a){ee(i,i.return,a)}}function yw(n){switch(n.tag){case 13:case 19:var i=n.stateNode;return i===null&&(i=n.stateNode=new Ev),i;case 22:return n=n.stateNode,i=n._retryCache,i===null&&(i=n._retryCache=new Ev),i;default:throw Error(r(435,n.tag))}}function ym(n,i){var a=yw(n);i.forEach(function(l){var f=Rw.bind(null,n,l);a.has(l)||(a.add(l),l.then(f,f))})}function Dn(n,i){var a=i.deletions;if(a!==null)for(var l=0;l<a.length;l++){var f=a[l],d=n,v=i,T=v;t:for(;T!==null;){switch(T.tag){case 27:if(Ur(T.type)){le=T.stateNode,yn=!1;break t}break;case 5:le=T.stateNode,yn=!1;break t;case 3:case 4:le=T.stateNode.containerInfo,yn=!0;break t}T=T.return}if(le===null)throw Error(r(160));bv(d,v,f),le=null,yn=!1,d=f.alternate,d!==null&&(d.return=null),f.return=null}if(i.subtreeFlags&13878)for(i=i.child;i!==null;)wv(i,n),i=i.sibling}var ei=null;function wv(n,i){var a=n.alternate,l=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:Dn(i,n),Vn(n),l&4&&(Dr(3,n,n.return),Zl(3,n),Dr(5,n,n.return));break;case 1:Dn(i,n),Vn(n),l&512&&(Ee||a===null||Ei(a,a.return)),l&64&&tr&&(n=n.updateQueue,n!==null&&(l=n.callbacks,l!==null&&(a=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var f=ei;if(Dn(i,n),Vn(n),l&512&&(Ee||a===null||Ei(a,a.return)),l&4){var d=a!==null?a.memoizedState:null;if(l=n.memoizedState,a===null)if(l===null)if(n.stateNode===null){t:{l=n.type,a=n.memoizedProps,f=f.ownerDocument||f;e:switch(l){case"title":d=f.getElementsByTagName("title")[0],(!d||d[As]||d[Ne]||d.namespaceURI==="http://www.w3.org/2000/svg"||d.hasAttribute("itemprop"))&&(d=f.createElement(l),f.head.insertBefore(d,f.querySelector("head > title"))),$e(d,l,a),d[Ne]=n,ye(d),l=d;break t;case"link":var v=vE("link","href",f).get(l+(a.href||""));if(v){for(var T=0;T<v.length;T++)if(d=v[T],d.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&d.getAttribute("rel")===(a.rel==null?null:a.rel)&&d.getAttribute("title")===(a.title==null?null:a.title)&&d.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){v.splice(T,1);break e}}d=f.createElement(l),$e(d,l,a),f.head.appendChild(d);break;case"meta":if(v=vE("meta","content",f).get(l+(a.content||""))){for(T=0;T<v.length;T++)if(d=v[T],d.getAttribute("content")===(a.content==null?null:""+a.content)&&d.getAttribute("name")===(a.name==null?null:a.name)&&d.getAttribute("property")===(a.property==null?null:a.property)&&d.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&d.getAttribute("charset")===(a.charSet==null?null:a.charSet)){v.splice(T,1);break e}}d=f.createElement(l),$e(d,l,a),f.head.appendChild(d);break;default:throw Error(r(468,l))}d[Ne]=n,ye(d),l=d}n.stateNode=l}else EE(f,n.type,n.stateNode);else n.stateNode=yE(f,l,n.memoizedProps);else d!==l?(d===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):d.count--,l===null?EE(f,n.type,n.stateNode):yE(f,l,n.memoizedProps)):l===null&&n.stateNode!==null&&mm(n,n.memoizedProps,a.memoizedProps)}break;case 27:Dn(i,n),Vn(n),l&512&&(Ee||a===null||Ei(a,a.return)),a!==null&&l&4&&mm(n,n.memoizedProps,a.memoizedProps);break;case 5:if(Dn(i,n),Vn(n),l&512&&(Ee||a===null||Ei(a,a.return)),n.flags&32){f=n.stateNode;try{Bn(f,"")}catch(F){ee(n,n.return,F)}}l&4&&n.stateNode!=null&&(f=n.memoizedProps,mm(n,f,a!==null?a.memoizedProps:f)),l&1024&&(_m=!0);break;case 6:if(Dn(i,n),Vn(n),l&4){if(n.stateNode===null)throw Error(r(162));l=n.memoizedProps,a=n.stateNode;try{a.nodeValue=l}catch(F){ee(n,n.return,F)}}break;case 3:if(Oh=null,f=ei,ei=Nh(i.containerInfo),Dn(i,n),ei=f,Vn(n),l&4&&a!==null&&a.memoizedState.isDehydrated)try{gu(i.containerInfo)}catch(F){ee(n,n.return,F)}_m&&(_m=!1,Iv(n));break;case 4:l=ei,ei=Nh(n.stateNode.containerInfo),Dn(i,n),Vn(n),ei=l;break;case 12:Dn(i,n),Vn(n);break;case 13:Dn(i,n),Vn(n),n.child.flags&8192&&n.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Sm=Un()),l&4&&(l=n.updateQueue,l!==null&&(n.updateQueue=null,ym(n,l)));break;case 22:f=n.memoizedState!==null;var I=a!==null&&a.memoizedState!==null,z=tr,K=Ee;if(tr=z||f,Ee=K||I,Dn(i,n),Ee=K,tr=z,Vn(n),l&8192)t:for(i=n.stateNode,i._visibility=f?i._visibility&-2:i._visibility|1,f&&(a===null||I||tr||Ee||Ys(n)),a=null,i=n;;){if(i.tag===5||i.tag===26){if(a===null){I=a=i;try{if(d=I.stateNode,f)v=d.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none";else{T=I.stateNode;var $=I.memoizedProps.style,q=$!=null&&$.hasOwnProperty("display")?$.display:null;T.style.display=q==null||typeof q=="boolean"?"":(""+q).trim()}}catch(F){ee(I,I.return,F)}}}else if(i.tag===6){if(a===null){I=i;try{I.stateNode.nodeValue=f?"":I.memoizedProps}catch(F){ee(I,I.return,F)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===n)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break t;for(;i.sibling===null;){if(i.return===null||i.return===n)break t;a===i&&(a=null),i=i.return}a===i&&(a=null),i.sibling.return=i.return,i=i.sibling}l&4&&(l=n.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,ym(n,a))));break;case 19:Dn(i,n),Vn(n),l&4&&(l=n.updateQueue,l!==null&&(n.updateQueue=null,ym(n,l)));break;case 30:break;case 21:break;default:Dn(i,n),Vn(n)}}function Vn(n){var i=n.flags;if(i&2){try{for(var a,l=n.return;l!==null;){if(yv(l)){a=l;break}l=l.return}if(a==null)throw Error(r(160));switch(a.tag){case 27:var f=a.stateNode,d=gm(n);yh(n,d,f);break;case 5:var v=a.stateNode;a.flags&32&&(Bn(v,""),a.flags&=-33);var T=gm(n);yh(n,T,v);break;case 3:case 4:var I=a.stateNode.containerInfo,z=gm(n);pm(n,z,I);break;default:throw Error(r(161))}}catch(K){ee(n,n.return,K)}n.flags&=-3}i&4096&&(n.flags&=-4097)}function Iv(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var i=n;Iv(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),n=n.sibling}}function Vr(n,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)Tv(n,i.alternate,i),i=i.sibling}function Ys(n){for(n=n.child;n!==null;){var i=n;switch(i.tag){case 0:case 11:case 14:case 15:Dr(4,i,i.return),Ys(i);break;case 1:Ei(i,i.return);var a=i.stateNode;typeof a.componentWillUnmount=="function"&&pv(i,i.return,a),Ys(i);break;case 27:ou(i.stateNode);case 26:case 5:Ei(i,i.return),Ys(i);break;case 22:i.memoizedState===null&&Ys(i);break;case 30:Ys(i);break;default:Ys(i)}n=n.sibling}}function Cr(n,i,a){for(a=a&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var l=i.alternate,f=n,d=i,v=d.flags;switch(d.tag){case 0:case 11:case 15:Cr(f,d,a),Zl(4,d);break;case 1:if(Cr(f,d,a),l=d,f=l.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(z){ee(l,l.return,z)}if(l=d,f=l.updateQueue,f!==null){var T=l.stateNode;try{var I=f.shared.hiddenCallbacks;if(I!==null)for(f.shared.hiddenCallbacks=null,f=0;f<I.length;f++)ey(I[f],T)}catch(z){ee(l,l.return,z)}}a&&v&64&&gv(d),Jl(d,d.return);break;case 27:vv(d);case 26:case 5:Cr(f,d,a),a&&l===null&&v&4&&_v(d),Jl(d,d.return);break;case 12:Cr(f,d,a);break;case 13:Cr(f,d,a),a&&v&4&&Sv(f,d);break;case 22:d.memoizedState===null&&Cr(f,d,a),Jl(d,d.return);break;case 30:break;default:Cr(f,d,a)}i=i.sibling}}function vm(n,i){var a=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(a=n.memoizedState.cachePool.pool),n=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(n=i.memoizedState.cachePool.pool),n!==a&&(n!=null&&n.refCount++,a!=null&&Ll(a))}function Em(n,i){n=null,i.alternate!==null&&(n=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==n&&(i.refCount++,n!=null&&Ll(n))}function Ti(n,i,a,l){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)Rv(n,i,a,l),i=i.sibling}function Rv(n,i,a,l){var f=i.flags;switch(i.tag){case 0:case 11:case 15:Ti(n,i,a,l),f&2048&&Zl(9,i);break;case 1:Ti(n,i,a,l);break;case 3:Ti(n,i,a,l),f&2048&&(n=null,i.alternate!==null&&(n=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==n&&(i.refCount++,n!=null&&Ll(n)));break;case 12:if(f&2048){Ti(n,i,a,l),n=i.stateNode;try{var d=i.memoizedProps,v=d.id,T=d.onPostCommit;typeof T=="function"&&T(v,i.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(I){ee(i,i.return,I)}}else Ti(n,i,a,l);break;case 13:Ti(n,i,a,l);break;case 23:break;case 22:d=i.stateNode,v=i.alternate,i.memoizedState!==null?d._visibility&2?Ti(n,i,a,l):Wl(n,i):d._visibility&2?Ti(n,i,a,l):(d._visibility|=2,ro(n,i,a,l,(i.subtreeFlags&10256)!==0)),f&2048&&vm(v,i);break;case 24:Ti(n,i,a,l),f&2048&&Em(i.alternate,i);break;default:Ti(n,i,a,l)}}function ro(n,i,a,l,f){for(f=f&&(i.subtreeFlags&10256)!==0,i=i.child;i!==null;){var d=n,v=i,T=a,I=l,z=v.flags;switch(v.tag){case 0:case 11:case 15:ro(d,v,T,I,f),Zl(8,v);break;case 23:break;case 22:var K=v.stateNode;v.memoizedState!==null?K._visibility&2?ro(d,v,T,I,f):Wl(d,v):(K._visibility|=2,ro(d,v,T,I,f)),f&&z&2048&&vm(v.alternate,v);break;case 24:ro(d,v,T,I,f),f&&z&2048&&Em(v.alternate,v);break;default:ro(d,v,T,I,f)}i=i.sibling}}function Wl(n,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var a=n,l=i,f=l.flags;switch(l.tag){case 22:Wl(a,l),f&2048&&vm(l.alternate,l);break;case 24:Wl(a,l),f&2048&&Em(l.alternate,l);break;default:Wl(a,l)}i=i.sibling}}var tu=8192;function so(n){if(n.subtreeFlags&tu)for(n=n.child;n!==null;)Dv(n),n=n.sibling}function Dv(n){switch(n.tag){case 26:so(n),n.flags&tu&&n.memoizedState!==null&&i1(ei,n.memoizedState,n.memoizedProps);break;case 5:so(n);break;case 3:case 4:var i=ei;ei=Nh(n.stateNode.containerInfo),so(n),ei=i;break;case 22:n.memoizedState===null&&(i=n.alternate,i!==null&&i.memoizedState!==null?(i=tu,tu=16777216,so(n),tu=i):so(n));break;default:so(n)}}function Vv(n){var i=n.alternate;if(i!==null&&(n=i.child,n!==null)){i.child=null;do i=n.sibling,n.sibling=null,n=i;while(n!==null)}}function eu(n){var i=n.deletions;if((n.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var l=i[a];qe=l,Nv(l,n)}Vv(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)Cv(n),n=n.sibling}function Cv(n){switch(n.tag){case 0:case 11:case 15:eu(n),n.flags&2048&&Dr(9,n,n.return);break;case 3:eu(n);break;case 12:eu(n);break;case 22:var i=n.stateNode;n.memoizedState!==null&&i._visibility&2&&(n.return===null||n.return.tag!==13)?(i._visibility&=-3,vh(n)):eu(n);break;default:eu(n)}}function vh(n){var i=n.deletions;if((n.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var l=i[a];qe=l,Nv(l,n)}Vv(n)}for(n=n.child;n!==null;){switch(i=n,i.tag){case 0:case 11:case 15:Dr(8,i,i.return),vh(i);break;case 22:a=i.stateNode,a._visibility&2&&(a._visibility&=-3,vh(i));break;default:vh(i)}n=n.sibling}}function Nv(n,i){for(;qe!==null;){var a=qe;switch(a.tag){case 0:case 11:case 15:Dr(8,a,i);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:Ll(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,qe=l;else t:for(a=n;qe!==null;){l=qe;var f=l.sibling,d=l.return;if(Av(l),l===a){qe=null;break t}if(f!==null){f.return=d,qe=f;break t}qe=d}}}var vw={getCacheForType:function(n){var i=en(Me),a=i.data.get(n);return a===void 0&&(a=n(),i.data.set(n,a)),a}},Ew=typeof WeakMap=="function"?WeakMap:Map,Kt=0,ie=null,Nt=null,Bt=0,Yt=0,Cn=null,Nr=!1,ao=!1,Tm=!1,nr=0,pe=0,xr=0,Xs=0,Am=0,Kn=0,oo=0,nu=null,vn=null,bm=!1,Sm=0,Eh=1/0,Th=null,Or=null,Xe=0,Mr=null,lo=null,uo=0,wm=0,Im=null,xv=null,iu=0,Rm=null;function Nn(){if((Kt&2)!==0&&Bt!==0)return Bt&-Bt;if(Q.T!==null){var n=$a;return n!==0?n:Mm()}return gr()}function Ov(){Kn===0&&(Kn=(Bt&536870912)===0||jt?fl():536870912);var n=Qn.current;return n!==null&&(n.flags|=32),Kn}function xn(n,i,a){(n===ie&&(Yt===2||Yt===9)||n.cancelPendingCommit!==null)&&(co(n,0),Pr(n,Bt,Kn,!1)),Mi(n,a),((Kt&2)===0||n!==ie)&&(n===ie&&((Kt&2)===0&&(Xs|=a),pe===4&&Pr(n,Bt,Kn,!1)),Ai(n))}function Mv(n,i,a){if((Kt&6)!==0)throw Error(r(327));var l=!a&&(i&124)===0&&(i&n.expiredLanes)===0||Ts(n,i),f=l?bw(n,i):Cm(n,i,!0),d=l;do{if(f===0){ao&&!l&&Pr(n,i,0,!1);break}else{if(a=n.current.alternate,d&&!Tw(a)){f=Cm(n,i,!1),d=!1;continue}if(f===2){if(d=i,n.errorRecoveryDisabledLanes&d)var v=0;else v=n.pendingLanes&-536870913,v=v!==0?v:v&536870912?536870912:0;if(v!==0){i=v;t:{var T=n;f=nu;var I=T.current.memoizedState.isDehydrated;if(I&&(co(T,v).flags|=256),v=Cm(T,v,!1),v!==2){if(Tm&&!I){T.errorRecoveryDisabledLanes|=d,Xs|=d,f=4;break t}d=vn,vn=f,d!==null&&(vn===null?vn=d:vn.push.apply(vn,d))}f=v}if(d=!1,f!==2)continue}}if(f===1){co(n,0),Pr(n,i,0,!0);break}t:{switch(l=n,d=f,d){case 0:case 1:throw Error(r(345));case 4:if((i&4194048)!==i)break;case 6:Pr(l,i,Kn,!Nr);break t;case 2:vn=null;break;case 3:case 5:break;default:throw Error(r(329))}if((i&62914560)===i&&(f=Sm+300-Un(),10<f)){if(Pr(l,i,Kn,!Nr),Ra(l,0,!0)!==0)break t;l.timeoutHandle=uE(Pv.bind(null,l,a,vn,Th,bm,i,Kn,Xs,oo,Nr,d,2,-0,0),f);break t}Pv(l,a,vn,Th,bm,i,Kn,Xs,oo,Nr,d,0,-0,0)}}break}while(!0);Ai(n)}function Pv(n,i,a,l,f,d,v,T,I,z,K,$,q,F){if(n.timeoutHandle=-1,$=i.subtreeFlags,($&8192||($&16785408)===16785408)&&(cu={stylesheets:null,count:0,unsuspend:n1},Dv(i),$=r1(),$!==null)){n.cancelPendingCommit=$(Fv.bind(null,n,i,d,a,l,f,v,T,I,K,1,q,F)),Pr(n,d,v,!z);return}Fv(n,i,d,a,l,f,v,T,I)}function Tw(n){for(var i=n;;){var a=i.tag;if((a===0||a===11||a===15)&&i.flags&16384&&(a=i.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var f=a[l],d=f.getSnapshot;f=f.value;try{if(!In(d(),f))return!1}catch{return!1}}if(a=i.child,i.subtreeFlags&16384&&a!==null)a.return=i,i=a;else{if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Pr(n,i,a,l){i&=~Am,i&=~Xs,n.suspendedLanes|=i,n.pingedLanes&=~i,l&&(n.warmLanes|=i),l=n.expirationTimes;for(var f=i;0<f;){var d=31-tn(f),v=1<<d;l[d]=-1,f&=~v}a!==0&&oi(n,a,i)}function Ah(){return(Kt&6)===0?(ru(0),!1):!0}function Dm(){if(Nt!==null){if(Yt===0)var n=Nt.return;else n=Nt,Yi=js=null,Hd(n),no=null,Yl=0,n=Nt;for(;n!==null;)mv(n.alternate,n),n=n.return;Nt=null}}function co(n,i){var a=n.timeoutHandle;a!==-1&&(n.timeoutHandle=-1,kw(a)),a=n.cancelPendingCommit,a!==null&&(n.cancelPendingCommit=null,a()),Dm(),ie=n,Nt=a=Hi(n.current,null),Bt=i,Yt=0,Cn=null,Nr=!1,ao=Ts(n,i),Tm=!1,oo=Kn=Am=Xs=xr=pe=0,vn=nu=null,bm=!1,(i&8)!==0&&(i|=i&32);var l=n.entangledLanes;if(l!==0)for(n=n.entanglements,l&=i;0<l;){var f=31-tn(l),d=1<<f;i|=n[f],l&=~d}return nr=i,Gc(),a}function Uv(n,i){Dt=null,Q.H=uh,i===kl||i===Wc?(i=W_(),Yt=3):i===$_?(i=W_(),Yt=4):Yt=i===tv?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,Cn=i,Nt===null&&(pe=1,mh(n,Fn(i,n.current)))}function Lv(){var n=Q.H;return Q.H=uh,n===null?uh:n}function Bv(){var n=Q.A;return Q.A=vw,n}function Vm(){pe=4,Nr||(Bt&4194048)!==Bt&&Qn.current!==null||(ao=!0),(xr&134217727)===0&&(Xs&134217727)===0||ie===null||Pr(ie,Bt,Kn,!1)}function Cm(n,i,a){var l=Kt;Kt|=2;var f=Lv(),d=Bv();(ie!==n||Bt!==i)&&(Th=null,co(n,i)),i=!1;var v=pe;t:do try{if(Yt!==0&&Nt!==null){var T=Nt,I=Cn;switch(Yt){case 8:Dm(),v=6;break t;case 3:case 2:case 9:case 6:Qn.current===null&&(i=!0);var z=Yt;if(Yt=0,Cn=null,ho(n,T,I,z),a&&ao){v=0;break t}break;default:z=Yt,Yt=0,Cn=null,ho(n,T,I,z)}}Aw(),v=pe;break}catch(K){Uv(n,K)}while(!0);return i&&n.shellSuspendCounter++,Yi=js=null,Kt=l,Q.H=f,Q.A=d,Nt===null&&(ie=null,Bt=0,Gc()),v}function Aw(){for(;Nt!==null;)kv(Nt)}function bw(n,i){var a=Kt;Kt|=2;var l=Lv(),f=Bv();ie!==n||Bt!==i?(Th=null,Eh=Un()+500,co(n,i)):ao=Ts(n,i);t:do try{if(Yt!==0&&Nt!==null){i=Nt;var d=Cn;e:switch(Yt){case 1:Yt=0,Cn=null,ho(n,i,d,1);break;case 2:case 9:if(Z_(d)){Yt=0,Cn=null,zv(i);break}i=function(){Yt!==2&&Yt!==9||ie!==n||(Yt=7),Ai(n)},d.then(i,i);break t;case 3:Yt=7;break t;case 4:Yt=5;break t;case 7:Z_(d)?(Yt=0,Cn=null,zv(i)):(Yt=0,Cn=null,ho(n,i,d,7));break;case 5:var v=null;switch(Nt.tag){case 26:v=Nt.memoizedState;case 5:case 27:var T=Nt;if(!v||TE(v)){Yt=0,Cn=null;var I=T.sibling;if(I!==null)Nt=I;else{var z=T.return;z!==null?(Nt=z,bh(z)):Nt=null}break e}}Yt=0,Cn=null,ho(n,i,d,5);break;case 6:Yt=0,Cn=null,ho(n,i,d,6);break;case 8:Dm(),pe=6;break t;default:throw Error(r(462))}}Sw();break}catch(K){Uv(n,K)}while(!0);return Yi=js=null,Q.H=l,Q.A=f,Kt=a,Nt!==null?0:(ie=null,Bt=0,Gc(),pe)}function Sw(){for(;Nt!==null&&!ll();)kv(Nt)}function kv(n){var i=fv(n.alternate,n,nr);n.memoizedProps=n.pendingProps,i===null?bh(n):Nt=i}function zv(n){var i=n,a=i.alternate;switch(i.tag){case 15:case 0:i=av(a,i,i.pendingProps,i.type,void 0,Bt);break;case 11:i=av(a,i,i.pendingProps,i.type.render,i.ref,Bt);break;case 5:Hd(i);default:mv(a,i),i=Nt=q_(i,nr),i=fv(a,i,nr)}n.memoizedProps=n.pendingProps,i===null?bh(n):Nt=i}function ho(n,i,a,l){Yi=js=null,Hd(i),no=null,Yl=0;var f=i.return;try{if(dw(n,f,i,a,Bt)){pe=1,mh(n,Fn(a,n.current)),Nt=null;return}}catch(d){if(f!==null)throw Nt=f,d;pe=1,mh(n,Fn(a,n.current)),Nt=null;return}i.flags&32768?(jt||l===1?n=!0:ao||(Bt&536870912)!==0?n=!1:(Nr=n=!0,(l===2||l===9||l===3||l===6)&&(l=Qn.current,l!==null&&l.tag===13&&(l.flags|=16384))),qv(i,n)):bh(i)}function bh(n){var i=n;do{if((i.flags&32768)!==0){qv(i,Nr);return}n=i.return;var a=gw(i.alternate,i,nr);if(a!==null){Nt=a;return}if(i=i.sibling,i!==null){Nt=i;return}Nt=i=n}while(i!==null);pe===0&&(pe=5)}function qv(n,i){do{var a=pw(n.alternate,n);if(a!==null){a.flags&=32767,Nt=a;return}if(a=n.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!i&&(n=n.sibling,n!==null)){Nt=n;return}Nt=n=a}while(n!==null);pe=6,Nt=null}function Fv(n,i,a,l,f,d,v,T,I){n.cancelPendingCommit=null;do Sh();while(Xe!==0);if((Kt&6)!==0)throw Error(r(327));if(i!==null){if(i===n.current)throw Error(r(177));if(d=i.lanes|i.childLanes,d|=Ed,ml(n,a,d,v,T,I),n===ie&&(Nt=ie=null,Bt=0),lo=i,Mr=n,uo=a,wm=d,Im=f,xv=l,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,Dw(_s,function(){return Kv(),null})):(n.callbackNode=null,n.callbackPriority=0),l=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||l){l=Q.T,Q.T=null,f=st.p,st.p=2,v=Kt,Kt|=4;try{_w(n,i,a)}finally{Kt=v,st.p=f,Q.T=l}}Xe=1,jv(),Gv(),Hv()}}function jv(){if(Xe===1){Xe=0;var n=Mr,i=lo,a=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||a){a=Q.T,Q.T=null;var l=st.p;st.p=2;var f=Kt;Kt|=4;try{wv(i,n);var d=Fm,v=N_(n.containerInfo),T=d.focusedElem,I=d.selectionRange;if(v!==T&&T&&T.ownerDocument&&C_(T.ownerDocument.documentElement,T)){if(I!==null&&gd(T)){var z=I.start,K=I.end;if(K===void 0&&(K=z),"selectionStart"in T)T.selectionStart=z,T.selectionEnd=Math.min(K,T.value.length);else{var $=T.ownerDocument||document,q=$&&$.defaultView||window;if(q.getSelection){var F=q.getSelection(),Et=T.textContent.length,yt=Math.min(I.start,Et),te=I.end===void 0?yt:Math.min(I.end,Et);!F.extend&&yt>te&&(v=te,te=yt,yt=v);var P=V_(T,yt),C=V_(T,te);if(P&&C&&(F.rangeCount!==1||F.anchorNode!==P.node||F.anchorOffset!==P.offset||F.focusNode!==C.node||F.focusOffset!==C.offset)){var k=$.createRange();k.setStart(P.node,P.offset),F.removeAllRanges(),yt>te?(F.addRange(k),F.extend(C.node,C.offset)):(k.setEnd(C.node,C.offset),F.addRange(k))}}}}for($=[],F=T;F=F.parentNode;)F.nodeType===1&&$.push({element:F,left:F.scrollLeft,top:F.scrollTop});for(typeof T.focus=="function"&&T.focus(),T=0;T<$.length;T++){var X=$[T];X.element.scrollLeft=X.left,X.element.scrollTop=X.top}}Uh=!!qm,Fm=qm=null}finally{Kt=f,st.p=l,Q.T=a}}n.current=i,Xe=2}}function Gv(){if(Xe===2){Xe=0;var n=Mr,i=lo,a=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||a){a=Q.T,Q.T=null;var l=st.p;st.p=2;var f=Kt;Kt|=4;try{Tv(n,i.alternate,i)}finally{Kt=f,st.p=l,Q.T=a}}Xe=3}}function Hv(){if(Xe===4||Xe===3){Xe=0,vc();var n=Mr,i=lo,a=uo,l=xv;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?Xe=5:(Xe=0,lo=Mr=null,Qv(n,n.pendingLanes));var f=n.pendingLanes;if(f===0&&(Or=null),Da(a),i=i.stateNode,Qt&&typeof Qt.onCommitFiberRoot=="function")try{Qt.onCommitFiberRoot(me,i,void 0,(i.current.flags&128)===128)}catch{}if(l!==null){i=Q.T,f=st.p,st.p=2,Q.T=null;try{for(var d=n.onRecoverableError,v=0;v<l.length;v++){var T=l[v];d(T.value,{componentStack:T.stack})}}finally{Q.T=i,st.p=f}}(uo&3)!==0&&Sh(),Ai(n),f=n.pendingLanes,(a&4194090)!==0&&(f&42)!==0?n===Rm?iu++:(iu=0,Rm=n):iu=0,ru(0)}}function Qv(n,i){(n.pooledCacheLanes&=i)===0&&(i=n.pooledCache,i!=null&&(n.pooledCache=null,Ll(i)))}function Sh(n){return jv(),Gv(),Hv(),Kv()}function Kv(){if(Xe!==5)return!1;var n=Mr,i=wm;wm=0;var a=Da(uo),l=Q.T,f=st.p;try{st.p=32>a?32:a,Q.T=null,a=Im,Im=null;var d=Mr,v=uo;if(Xe=0,lo=Mr=null,uo=0,(Kt&6)!==0)throw Error(r(331));var T=Kt;if(Kt|=4,Cv(d.current),Rv(d,d.current,v,a),Kt=T,ru(0,!1),Qt&&typeof Qt.onPostCommitFiberRoot=="function")try{Qt.onPostCommitFiberRoot(me,d)}catch{}return!0}finally{st.p=f,Q.T=l,Qv(n,i)}}function Yv(n,i,a){i=Fn(a,i),i=sm(n.stateNode,i,2),n=Sr(n,i,2),n!==null&&(Mi(n,2),Ai(n))}function ee(n,i,a){if(n.tag===3)Yv(n,n,a);else for(;i!==null;){if(i.tag===3){Yv(i,n,a);break}else if(i.tag===1){var l=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(Or===null||!Or.has(l))){n=Fn(a,n),a=Jy(2),l=Sr(i,a,2),l!==null&&(Wy(a,l,i,n),Mi(l,2),Ai(l));break}}i=i.return}}function Nm(n,i,a){var l=n.pingCache;if(l===null){l=n.pingCache=new Ew;var f=new Set;l.set(i,f)}else f=l.get(i),f===void 0&&(f=new Set,l.set(i,f));f.has(a)||(Tm=!0,f.add(a),n=ww.bind(null,n,i,a),i.then(n,n))}function ww(n,i,a){var l=n.pingCache;l!==null&&l.delete(i),n.pingedLanes|=n.suspendedLanes&a,n.warmLanes&=~a,ie===n&&(Bt&a)===a&&(pe===4||pe===3&&(Bt&62914560)===Bt&&300>Un()-Sm?(Kt&2)===0&&co(n,0):Am|=a,oo===Bt&&(oo=0)),Ai(n)}function Xv(n,i){i===0&&(i=dl()),n=Qa(n,i),n!==null&&(Mi(n,i),Ai(n))}function Iw(n){var i=n.memoizedState,a=0;i!==null&&(a=i.retryLane),Xv(n,a)}function Rw(n,i){var a=0;switch(n.tag){case 13:var l=n.stateNode,f=n.memoizedState;f!==null&&(a=f.retryLane);break;case 19:l=n.stateNode;break;case 22:l=n.stateNode._retryCache;break;default:throw Error(r(314))}l!==null&&l.delete(i),Xv(n,a)}function Dw(n,i){return gs(n,i)}var wh=null,fo=null,xm=!1,Ih=!1,Om=!1,$s=0;function Ai(n){n!==fo&&n.next===null&&(fo===null?wh=fo=n:fo=fo.next=n),Ih=!0,xm||(xm=!0,Cw())}function ru(n,i){if(!Om&&Ih){Om=!0;do for(var a=!1,l=wh;l!==null;){if(n!==0){var f=l.pendingLanes;if(f===0)var d=0;else{var v=l.suspendedLanes,T=l.pingedLanes;d=(1<<31-tn(42|n)+1)-1,d&=f&~(v&~T),d=d&201326741?d&201326741|1:d?d|2:0}d!==0&&(a=!0,Wv(l,d))}else d=Bt,d=Ra(l,l===ie?d:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(d&3)===0||Ts(l,d)||(a=!0,Wv(l,d));l=l.next}while(a);Om=!1}}function Vw(){$v()}function $v(){Ih=xm=!1;var n=0;$s!==0&&(Bw()&&(n=$s),$s=0);for(var i=Un(),a=null,l=wh;l!==null;){var f=l.next,d=Zv(l,i);d===0?(l.next=null,a===null?wh=f:a.next=f,f===null&&(fo=a)):(a=l,(n!==0||(d&3)!==0)&&(Ih=!0)),l=f}ru(n)}function Zv(n,i){for(var a=n.suspendedLanes,l=n.pingedLanes,f=n.expirationTimes,d=n.pendingLanes&-62914561;0<d;){var v=31-tn(d),T=1<<v,I=f[v];I===-1?((T&a)===0||(T&l)!==0)&&(f[v]=hl(T,i)):I<=i&&(n.expiredLanes|=T),d&=~T}if(i=ie,a=Bt,a=Ra(n,n===i?a:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),l=n.callbackNode,a===0||n===i&&(Yt===2||Yt===9)||n.cancelPendingCommit!==null)return l!==null&&l!==null&&ps(l),n.callbackNode=null,n.callbackPriority=0;if((a&3)===0||Ts(n,a)){if(i=a&-a,i===n.callbackPriority)return i;switch(l!==null&&ps(l),Da(a)){case 2:case 8:a=wa;break;case 32:a=_s;break;case 268435456:a=Ia;break;default:a=_s}return l=Jv.bind(null,n),a=gs(a,l),n.callbackPriority=i,n.callbackNode=a,i}return l!==null&&l!==null&&ps(l),n.callbackPriority=2,n.callbackNode=null,2}function Jv(n,i){if(Xe!==0&&Xe!==5)return n.callbackNode=null,n.callbackPriority=0,null;var a=n.callbackNode;if(Sh()&&n.callbackNode!==a)return null;var l=Bt;return l=Ra(n,n===ie?l:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),l===0?null:(Mv(n,l,i),Zv(n,Un()),n.callbackNode!=null&&n.callbackNode===a?Jv.bind(null,n):null)}function Wv(n,i){if(Sh())return null;Mv(n,i,!0)}function Cw(){zw(function(){(Kt&6)!==0?gs(ul,Vw):$v()})}function Mm(){return $s===0&&($s=fl()),$s}function tE(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:Ma(""+n)}function eE(n,i){var a=i.ownerDocument.createElement("input");return a.name=i.name,a.value=i.value,n.id&&a.setAttribute("form",n.id),i.parentNode.insertBefore(a,i),n=new FormData(n),a.parentNode.removeChild(a),n}function Nw(n,i,a,l,f){if(i==="submit"&&a&&a.stateNode===f){var d=tE((f[Se]||null).action),v=l.submitter;v&&(i=(i=v[Se]||null)?tE(i.formAction):v.getAttribute("formAction"),i!==null&&(d=i,v=null));var T=new Pa("action","action",null,l,f);n.push({event:T,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if($s!==0){var I=v?eE(f,v):new FormData(f);tm(a,{pending:!0,data:I,method:f.method,action:d},null,I)}}else typeof d=="function"&&(T.preventDefault(),I=v?eE(f,v):new FormData(f),tm(a,{pending:!0,data:I,method:f.method,action:d},d,I))},currentTarget:f}]})}}for(var Pm=0;Pm<vd.length;Pm++){var Um=vd[Pm],xw=Um.toLowerCase(),Ow=Um[0].toUpperCase()+Um.slice(1);ti(xw,"on"+Ow)}ti(M_,"onAnimationEnd"),ti(P_,"onAnimationIteration"),ti(U_,"onAnimationStart"),ti("dblclick","onDoubleClick"),ti("focusin","onFocus"),ti("focusout","onBlur"),ti($S,"onTransitionRun"),ti(ZS,"onTransitionStart"),ti(JS,"onTransitionCancel"),ti(L_,"onTransitionEnd"),Ui("onMouseEnter",["mouseout","mouseover"]),Ui("onMouseLeave",["mouseout","mouseover"]),Ui("onPointerEnter",["pointerout","pointerover"]),Ui("onPointerLeave",["pointerout","pointerover"]),Jn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Jn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Jn("onBeforeInput",["compositionend","keypress","textInput","paste"]),Jn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Jn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Jn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var su="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Mw=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(su));function nE(n,i){i=(i&4)!==0;for(var a=0;a<n.length;a++){var l=n[a],f=l.event;l=l.listeners;t:{var d=void 0;if(i)for(var v=l.length-1;0<=v;v--){var T=l[v],I=T.instance,z=T.currentTarget;if(T=T.listener,I!==d&&f.isPropagationStopped())break t;d=T,f.currentTarget=z;try{d(f)}catch(K){dh(K)}f.currentTarget=null,d=I}else for(v=0;v<l.length;v++){if(T=l[v],I=T.instance,z=T.currentTarget,T=T.listener,I!==d&&f.isPropagationStopped())break t;d=T,f.currentTarget=z;try{d(f)}catch(K){dh(K)}f.currentTarget=null,d=I}}}}function xt(n,i){var a=i[pl];a===void 0&&(a=i[pl]=new Set);var l=n+"__bubble";a.has(l)||(iE(i,n,2,!1),a.add(l))}function Lm(n,i,a){var l=0;i&&(l|=4),iE(a,n,l,i)}var Rh="_reactListening"+Math.random().toString(36).slice(2);function Bm(n){if(!n[Rh]){n[Rh]=!0,_l.forEach(function(a){a!=="selectionchange"&&(Mw.has(a)||Lm(a,!1,n),Lm(a,!0,n))});var i=n.nodeType===9?n:n.ownerDocument;i===null||i[Rh]||(i[Rh]=!0,Lm("selectionchange",!1,i))}}function iE(n,i,a,l){switch(RE(i)){case 2:var f=o1;break;case 8:f=l1;break;default:f=Jm}a=f.bind(null,i,a,n),f=void 0,!zn||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(f=!0),l?f!==void 0?n.addEventListener(i,a,{capture:!0,passive:f}):n.addEventListener(i,a,!0):f!==void 0?n.addEventListener(i,a,{passive:f}):n.addEventListener(i,a,!1)}function km(n,i,a,l,f){var d=l;if((i&1)===0&&(i&2)===0&&l!==null)t:for(;;){if(l===null)return;var v=l.tag;if(v===3||v===4){var T=l.stateNode.containerInfo;if(T===f)break;if(v===4)for(v=l.return;v!==null;){var I=v.tag;if((I===3||I===4)&&v.stateNode.containerInfo===f)return;v=v.return}for(;T!==null;){if(v=Pi(T),v===null)return;if(I=v.tag,I===5||I===6||I===26||I===27){l=d=v;continue t}T=T.parentNode}}l=l.return}Vc(function(){var z=d,K=kn(a),$=[];t:{var q=B_.get(n);if(q!==void 0){var F=Pa,Et=n;switch(n){case"keypress":if(di(a)===0)break t;case"keydown":case"keyup":F=qa;break;case"focusin":Et="focus",F=Ba;break;case"focusout":Et="blur",F=Ba;break;case"beforeblur":case"afterblur":F=Ba;break;case"click":if(a.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":F=qn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":F=hd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":F=Lc;break;case M_:case P_:case U_:F=ka;break;case L_:F=kc;break;case"scroll":case"scrollend":F=Cc;break;case"wheel":F=Fa;break;case"copy":case"cut":case"paste":F=za;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":F=Vl;break;case"toggle":case"beforetoggle":F=qc}var yt=(i&4)!==0,te=!yt&&(n==="scroll"||n==="scrollend"),P=yt?q!==null?q+"Capture":null:q;yt=[];for(var C=z,k;C!==null;){var X=C;if(k=X.stateNode,X=X.tag,X!==5&&X!==26&&X!==27||k===null||P===null||(X=Vs(C,P),X!=null&&yt.push(au(C,X,k))),te)break;C=C.return}0<yt.length&&(q=new F(q,Et,null,a,K),$.push({event:q,listeners:yt}))}}if((i&7)===0){t:{if(q=n==="mouseover"||n==="pointerover",F=n==="mouseout"||n==="pointerout",q&&a!==ki&&(Et=a.relatedTarget||a.fromElement)&&(Pi(Et)||Et[Ln]))break t;if((F||q)&&(q=K.window===K?K:(q=K.ownerDocument)?q.defaultView||q.parentWindow:window,F?(Et=a.relatedTarget||a.toElement,F=z,Et=Et?Pi(Et):null,Et!==null&&(te=u(Et),yt=Et.tag,Et!==te||yt!==5&&yt!==27&&yt!==6)&&(Et=null)):(F=null,Et=z),F!==Et)){if(yt=qn,X="onMouseLeave",P="onMouseEnter",C="mouse",(n==="pointerout"||n==="pointerover")&&(yt=Vl,X="onPointerLeave",P="onPointerEnter",C="pointer"),te=F==null?q:ui(F),k=Et==null?q:ui(Et),q=new yt(X,C+"leave",F,a,K),q.target=te,q.relatedTarget=k,X=null,Pi(K)===z&&(yt=new yt(P,C+"enter",Et,a,K),yt.target=k,yt.relatedTarget=te,X=yt),te=X,F&&Et)e:{for(yt=F,P=Et,C=0,k=yt;k;k=mo(k))C++;for(k=0,X=P;X;X=mo(X))k++;for(;0<C-k;)yt=mo(yt),C--;for(;0<k-C;)P=mo(P),k--;for(;C--;){if(yt===P||P!==null&&yt===P.alternate)break e;yt=mo(yt),P=mo(P)}yt=null}else yt=null;F!==null&&rE($,q,F,yt,!1),Et!==null&&te!==null&&rE($,te,Et,yt,!0)}}t:{if(q=z?ui(z):window,F=q.nodeName&&q.nodeName.toLowerCase(),F==="select"||F==="input"&&q.type==="file")var ct=b_;else if(Oe(q))if(S_)ct=KS;else{ct=HS;var Ct=GS}else F=q.nodeName,!F||F.toLowerCase()!=="input"||q.type!=="checkbox"&&q.type!=="radio"?z&&Al(z.elementType)&&(ct=b_):ct=QS;if(ct&&(ct=ct(n,z))){Gi($,ct,a,K);break t}Ct&&Ct(n,q,z),n==="focusout"&&z&&q.type==="number"&&z.memoizedProps.value!=null&&vr(q,"number",q.value)}switch(Ct=z?ui(z):window,n){case"focusin":(Oe(Ct)||Ct.contentEditable==="true")&&(ja=Ct,pd=z,xl=null);break;case"focusout":xl=pd=ja=null;break;case"mousedown":_d=!0;break;case"contextmenu":case"mouseup":case"dragend":_d=!1,x_($,a,K);break;case"selectionchange":if(XS)break;case"keydown":case"keyup":x_($,a,K)}var gt;if(pi)t:{switch(n){case"compositionstart":var vt="onCompositionStart";break t;case"compositionend":vt="onCompositionEnd";break t;case"compositionupdate":vt="onCompositionUpdate";break t}vt=void 0}else Ut?G(n,a)&&(vt="onCompositionEnd"):n==="keydown"&&a.keyCode===229&&(vt="onCompositionStart");vt&&(y&&a.locale!=="ko"&&(Ut||vt!=="onCompositionStart"?vt==="onCompositionEnd"&&Ut&&(gt=Sl()):(fi=K,Er="value"in fi?fi.value:fi.textContent,Ut=!0)),Ct=Dh(z,vt),0<Ct.length&&(vt=new Rl(vt,n,null,a,K),$.push({event:vt,listeners:Ct}),gt?vt.data=gt:(gt=nt(a),gt!==null&&(vt.data=gt)))),(gt=p?xe(n,a):Lt(n,a))&&(vt=Dh(z,"onBeforeInput"),0<vt.length&&(Ct=new Rl("onBeforeInput","beforeinput",null,a,K),$.push({event:Ct,listeners:vt}),Ct.data=gt)),Nw($,n,z,a,K)}nE($,i)})}function au(n,i,a){return{instance:n,listener:i,currentTarget:a}}function Dh(n,i){for(var a=i+"Capture",l=[];n!==null;){var f=n,d=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||d===null||(f=Vs(n,a),f!=null&&l.unshift(au(n,f,d)),f=Vs(n,i),f!=null&&l.push(au(n,f,d))),n.tag===3)return l;n=n.return}return[]}function mo(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function rE(n,i,a,l,f){for(var d=i._reactName,v=[];a!==null&&a!==l;){var T=a,I=T.alternate,z=T.stateNode;if(T=T.tag,I!==null&&I===l)break;T!==5&&T!==26&&T!==27||z===null||(I=z,f?(z=Vs(a,d),z!=null&&v.unshift(au(a,z,I))):f||(z=Vs(a,d),z!=null&&v.push(au(a,z,I)))),a=a.return}v.length!==0&&n.push({event:i,listeners:v})}var Pw=/\r\n?/g,Uw=/\u0000|\uFFFD/g;function sE(n){return(typeof n=="string"?n:""+n).replace(Pw,`
`).replace(Uw,"")}function aE(n,i){return i=sE(i),sE(n)===i}function Vh(){}function Wt(n,i,a,l,f,d){switch(a){case"children":typeof l=="string"?i==="body"||i==="textarea"&&l===""||Bn(n,l):(typeof l=="number"||typeof l=="bigint")&&i!=="body"&&Bn(n,""+l);break;case"className":ci(n,"class",l);break;case"tabIndex":ci(n,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":ci(n,a,l);break;case"style":Tl(n,l,d);break;case"data":if(i!=="object"){ci(n,"data",l);break}case"src":case"href":if(l===""&&(i!=="a"||a!=="href")){n.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){n.removeAttribute(a);break}l=Ma(""+l),n.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){n.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof d=="function"&&(a==="formAction"?(i!=="input"&&Wt(n,i,"name",f.name,f,null),Wt(n,i,"formEncType",f.formEncType,f,null),Wt(n,i,"formMethod",f.formMethod,f,null),Wt(n,i,"formTarget",f.formTarget,f,null)):(Wt(n,i,"encType",f.encType,f,null),Wt(n,i,"method",f.method,f,null),Wt(n,i,"target",f.target,f,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){n.removeAttribute(a);break}l=Ma(""+l),n.setAttribute(a,l);break;case"onClick":l!=null&&(n.onclick=Vh);break;case"onScroll":l!=null&&xt("scroll",n);break;case"onScrollEnd":l!=null&&xt("scrollend",n);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(r(61));if(a=l.__html,a!=null){if(f.children!=null)throw Error(r(60));n.innerHTML=a}}break;case"multiple":n.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":n.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){n.removeAttribute("xlink:href");break}a=Ma(""+l),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?n.setAttribute(a,""+l):n.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?n.setAttribute(a,""):n.removeAttribute(a);break;case"capture":case"download":l===!0?n.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?n.setAttribute(a,l):n.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?n.setAttribute(a,l):n.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?n.removeAttribute(a):n.setAttribute(a,l);break;case"popover":xt("beforetoggle",n),xt("toggle",n),yr(n,"popover",l);break;case"xlinkActuate":Qe(n,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":Qe(n,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":Qe(n,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":Qe(n,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":Qe(n,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":Qe(n,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":Qe(n,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":Qe(n,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":Qe(n,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":yr(n,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=ud.get(a)||a,yr(n,a,l))}}function zm(n,i,a,l,f,d){switch(a){case"style":Tl(n,l,d);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(r(61));if(a=l.__html,a!=null){if(f.children!=null)throw Error(r(60));n.innerHTML=a}}break;case"children":typeof l=="string"?Bn(n,l):(typeof l=="number"||typeof l=="bigint")&&Bn(n,""+l);break;case"onScroll":l!=null&&xt("scroll",n);break;case"onScrollEnd":l!=null&&xt("scrollend",n);break;case"onClick":l!=null&&(n.onclick=Vh);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Va.hasOwnProperty(a))t:{if(a[0]==="o"&&a[1]==="n"&&(f=a.endsWith("Capture"),i=a.slice(2,f?a.length-7:void 0),d=n[Se]||null,d=d!=null?d[a]:null,typeof d=="function"&&n.removeEventListener(i,d,f),typeof l=="function")){typeof d!="function"&&d!==null&&(a in n?n[a]=null:n.hasAttribute(a)&&n.removeAttribute(a)),n.addEventListener(i,l,f);break t}a in n?n[a]=l:l===!0?n.setAttribute(a,""):yr(n,a,l)}}}function $e(n,i,a){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":xt("error",n),xt("load",n);var l=!1,f=!1,d;for(d in a)if(a.hasOwnProperty(d)){var v=a[d];if(v!=null)switch(d){case"src":l=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,i));default:Wt(n,i,d,v,a,null)}}f&&Wt(n,i,"srcSet",a.srcSet,a,null),l&&Wt(n,i,"src",a.src,a,null);return;case"input":xt("invalid",n);var T=d=v=f=null,I=null,z=null;for(l in a)if(a.hasOwnProperty(l)){var K=a[l];if(K!=null)switch(l){case"name":f=K;break;case"type":v=K;break;case"checked":I=K;break;case"defaultChecked":z=K;break;case"value":d=K;break;case"defaultValue":T=K;break;case"children":case"dangerouslySetInnerHTML":if(K!=null)throw Error(r(137,i));break;default:Wt(n,i,l,K,a,null)}}Is(n,d,T,I,z,v,f,!1),Oa(n);return;case"select":xt("invalid",n),l=v=d=null;for(f in a)if(a.hasOwnProperty(f)&&(T=a[f],T!=null))switch(f){case"value":d=T;break;case"defaultValue":v=T;break;case"multiple":l=T;default:Wt(n,i,f,T,a,null)}i=d,a=v,n.multiple=!!l,i!=null?Bi(n,!!l,i,!1):a!=null&&Bi(n,!!l,a,!0);return;case"textarea":xt("invalid",n),d=f=l=null;for(v in a)if(a.hasOwnProperty(v)&&(T=a[v],T!=null))switch(v){case"value":l=T;break;case"defaultValue":f=T;break;case"children":d=T;break;case"dangerouslySetInnerHTML":if(T!=null)throw Error(r(91));break;default:Wt(n,i,v,T,a,null)}Rs(n,l,f,d),Oa(n);return;case"option":for(I in a)if(a.hasOwnProperty(I)&&(l=a[I],l!=null))switch(I){case"selected":n.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:Wt(n,i,I,l,a,null)}return;case"dialog":xt("beforetoggle",n),xt("toggle",n),xt("cancel",n),xt("close",n);break;case"iframe":case"object":xt("load",n);break;case"video":case"audio":for(l=0;l<su.length;l++)xt(su[l],n);break;case"image":xt("error",n),xt("load",n);break;case"details":xt("toggle",n);break;case"embed":case"source":case"link":xt("error",n),xt("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(z in a)if(a.hasOwnProperty(z)&&(l=a[z],l!=null))switch(z){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,i));default:Wt(n,i,z,l,a,null)}return;default:if(Al(i)){for(K in a)a.hasOwnProperty(K)&&(l=a[K],l!==void 0&&zm(n,i,K,l,a,void 0));return}}for(T in a)a.hasOwnProperty(T)&&(l=a[T],l!=null&&Wt(n,i,T,l,a,null))}function Lw(n,i,a,l){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,d=null,v=null,T=null,I=null,z=null,K=null;for(F in a){var $=a[F];if(a.hasOwnProperty(F)&&$!=null)switch(F){case"checked":break;case"value":break;case"defaultValue":I=$;default:l.hasOwnProperty(F)||Wt(n,i,F,null,l,$)}}for(var q in l){var F=l[q];if($=a[q],l.hasOwnProperty(q)&&(F!=null||$!=null))switch(q){case"type":d=F;break;case"name":f=F;break;case"checked":z=F;break;case"defaultChecked":K=F;break;case"value":v=F;break;case"defaultValue":T=F;break;case"children":case"dangerouslySetInnerHTML":if(F!=null)throw Error(r(137,i));break;default:F!==$&&Wt(n,i,q,F,l,$)}}wn(n,v,T,I,z,K,d,f);return;case"select":F=v=T=q=null;for(d in a)if(I=a[d],a.hasOwnProperty(d)&&I!=null)switch(d){case"value":break;case"multiple":F=I;default:l.hasOwnProperty(d)||Wt(n,i,d,null,l,I)}for(f in l)if(d=l[f],I=a[f],l.hasOwnProperty(f)&&(d!=null||I!=null))switch(f){case"value":q=d;break;case"defaultValue":T=d;break;case"multiple":v=d;default:d!==I&&Wt(n,i,f,d,l,I)}i=T,a=v,l=F,q!=null?Bi(n,!!a,q,!1):!!l!=!!a&&(i!=null?Bi(n,!!a,i,!0):Bi(n,!!a,a?[]:"",!1));return;case"textarea":F=q=null;for(T in a)if(f=a[T],a.hasOwnProperty(T)&&f!=null&&!l.hasOwnProperty(T))switch(T){case"value":break;case"children":break;default:Wt(n,i,T,null,l,f)}for(v in l)if(f=l[v],d=a[v],l.hasOwnProperty(v)&&(f!=null||d!=null))switch(v){case"value":q=f;break;case"defaultValue":F=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(r(91));break;default:f!==d&&Wt(n,i,v,f,l,d)}Zt(n,q,F);return;case"option":for(var Et in a)if(q=a[Et],a.hasOwnProperty(Et)&&q!=null&&!l.hasOwnProperty(Et))switch(Et){case"selected":n.selected=!1;break;default:Wt(n,i,Et,null,l,q)}for(I in l)if(q=l[I],F=a[I],l.hasOwnProperty(I)&&q!==F&&(q!=null||F!=null))switch(I){case"selected":n.selected=q&&typeof q!="function"&&typeof q!="symbol";break;default:Wt(n,i,I,q,l,F)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var yt in a)q=a[yt],a.hasOwnProperty(yt)&&q!=null&&!l.hasOwnProperty(yt)&&Wt(n,i,yt,null,l,q);for(z in l)if(q=l[z],F=a[z],l.hasOwnProperty(z)&&q!==F&&(q!=null||F!=null))switch(z){case"children":case"dangerouslySetInnerHTML":if(q!=null)throw Error(r(137,i));break;default:Wt(n,i,z,q,l,F)}return;default:if(Al(i)){for(var te in a)q=a[te],a.hasOwnProperty(te)&&q!==void 0&&!l.hasOwnProperty(te)&&zm(n,i,te,void 0,l,q);for(K in l)q=l[K],F=a[K],!l.hasOwnProperty(K)||q===F||q===void 0&&F===void 0||zm(n,i,K,q,l,F);return}}for(var P in a)q=a[P],a.hasOwnProperty(P)&&q!=null&&!l.hasOwnProperty(P)&&Wt(n,i,P,null,l,q);for($ in l)q=l[$],F=a[$],!l.hasOwnProperty($)||q===F||q==null&&F==null||Wt(n,i,$,q,l,F)}var qm=null,Fm=null;function Ch(n){return n.nodeType===9?n:n.ownerDocument}function oE(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function lE(n,i){if(n===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&i==="foreignObject"?0:n}function jm(n,i){return n==="textarea"||n==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var Gm=null;function Bw(){var n=window.event;return n&&n.type==="popstate"?n===Gm?!1:(Gm=n,!0):(Gm=null,!1)}var uE=typeof setTimeout=="function"?setTimeout:void 0,kw=typeof clearTimeout=="function"?clearTimeout:void 0,cE=typeof Promise=="function"?Promise:void 0,zw=typeof queueMicrotask=="function"?queueMicrotask:typeof cE<"u"?function(n){return cE.resolve(null).then(n).catch(qw)}:uE;function qw(n){setTimeout(function(){throw n})}function Ur(n){return n==="head"}function hE(n,i){var a=i,l=0,f=0;do{var d=a.nextSibling;if(n.removeChild(a),d&&d.nodeType===8)if(a=d.data,a==="/$"){if(0<l&&8>l){a=l;var v=n.ownerDocument;if(a&1&&ou(v.documentElement),a&2&&ou(v.body),a&4)for(a=v.head,ou(a),v=a.firstChild;v;){var T=v.nextSibling,I=v.nodeName;v[As]||I==="SCRIPT"||I==="STYLE"||I==="LINK"&&v.rel.toLowerCase()==="stylesheet"||a.removeChild(v),v=T}}if(f===0){n.removeChild(d),gu(i);return}f--}else a==="$"||a==="$?"||a==="$!"?f++:l=a.charCodeAt(0)-48;else l=0;a=d}while(a);gu(i)}function Hm(n){var i=n.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var a=i;switch(i=i.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Hm(a),_r(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}n.removeChild(a)}}function Fw(n,i,a,l){for(;n.nodeType===1;){var f=a;if(n.nodeName.toLowerCase()!==i.toLowerCase()){if(!l&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(l){if(!n[As])switch(i){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(d=n.getAttribute("rel"),d==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(d!==f.rel||n.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||n.getAttribute("title")!==(f.title==null?null:f.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(d=n.getAttribute("src"),(d!==(f.src==null?null:f.src)||n.getAttribute("type")!==(f.type==null?null:f.type)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&d&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(i==="input"&&n.type==="hidden"){var d=f.name==null?null:""+f.name;if(f.type==="hidden"&&n.getAttribute("name")===d)return n}else return n;if(n=ni(n.nextSibling),n===null)break}return null}function jw(n,i,a){if(i==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!a||(n=ni(n.nextSibling),n===null))return null;return n}function Qm(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState==="complete"}function Gw(n,i){var a=n.ownerDocument;if(n.data!=="$?"||a.readyState==="complete")i();else{var l=function(){i(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),n._reactRetry=l}}function ni(n){for(;n!=null;n=n.nextSibling){var i=n.nodeType;if(i===1||i===3)break;if(i===8){if(i=n.data,i==="$"||i==="$!"||i==="$?"||i==="F!"||i==="F")break;if(i==="/$")return null}}return n}var Km=null;function fE(n){n=n.previousSibling;for(var i=0;n;){if(n.nodeType===8){var a=n.data;if(a==="$"||a==="$!"||a==="$?"){if(i===0)return n;i--}else a==="/$"&&i++}n=n.previousSibling}return null}function dE(n,i,a){switch(i=Ch(a),n){case"html":if(n=i.documentElement,!n)throw Error(r(452));return n;case"head":if(n=i.head,!n)throw Error(r(453));return n;case"body":if(n=i.body,!n)throw Error(r(454));return n;default:throw Error(r(451))}}function ou(n){for(var i=n.attributes;i.length;)n.removeAttributeNode(i[0]);_r(n)}var Yn=new Map,mE=new Set;function Nh(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var ir=st.d;st.d={f:Hw,r:Qw,D:Kw,C:Yw,L:Xw,m:$w,X:Jw,S:Zw,M:Ww};function Hw(){var n=ir.f(),i=Ah();return n||i}function Qw(n){var i=li(n);i!==null&&i.tag===5&&i.type==="form"?My(i):ir.r(n)}var go=typeof document>"u"?null:document;function gE(n,i,a){var l=go;if(l&&typeof i=="string"&&i){var f=we(i);f='link[rel="'+n+'"][href="'+f+'"]',typeof a=="string"&&(f+='[crossorigin="'+a+'"]'),mE.has(f)||(mE.add(f),n={rel:n,crossOrigin:a,href:i},l.querySelector(f)===null&&(i=l.createElement("link"),$e(i,"link",n),ye(i),l.head.appendChild(i)))}}function Kw(n){ir.D(n),gE("dns-prefetch",n,null)}function Yw(n,i){ir.C(n,i),gE("preconnect",n,i)}function Xw(n,i,a){ir.L(n,i,a);var l=go;if(l&&n&&i){var f='link[rel="preload"][as="'+we(i)+'"]';i==="image"&&a&&a.imageSrcSet?(f+='[imagesrcset="'+we(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(f+='[imagesizes="'+we(a.imageSizes)+'"]')):f+='[href="'+we(n)+'"]';var d=f;switch(i){case"style":d=po(n);break;case"script":d=_o(n)}Yn.has(d)||(n=E({rel:"preload",href:i==="image"&&a&&a.imageSrcSet?void 0:n,as:i},a),Yn.set(d,n),l.querySelector(f)!==null||i==="style"&&l.querySelector(lu(d))||i==="script"&&l.querySelector(uu(d))||(i=l.createElement("link"),$e(i,"link",n),ye(i),l.head.appendChild(i)))}}function $w(n,i){ir.m(n,i);var a=go;if(a&&n){var l=i&&typeof i.as=="string"?i.as:"script",f='link[rel="modulepreload"][as="'+we(l)+'"][href="'+we(n)+'"]',d=f;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":d=_o(n)}if(!Yn.has(d)&&(n=E({rel:"modulepreload",href:n},i),Yn.set(d,n),a.querySelector(f)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(uu(d)))return}l=a.createElement("link"),$e(l,"link",n),ye(l),a.head.appendChild(l)}}}function Zw(n,i,a){ir.S(n,i,a);var l=go;if(l&&n){var f=un(l).hoistableStyles,d=po(n);i=i||"default";var v=f.get(d);if(!v){var T={loading:0,preload:null};if(v=l.querySelector(lu(d)))T.loading=5;else{n=E({rel:"stylesheet",href:n,"data-precedence":i},a),(a=Yn.get(d))&&Ym(n,a);var I=v=l.createElement("link");ye(I),$e(I,"link",n),I._p=new Promise(function(z,K){I.onload=z,I.onerror=K}),I.addEventListener("load",function(){T.loading|=1}),I.addEventListener("error",function(){T.loading|=2}),T.loading|=4,xh(v,i,l)}v={type:"stylesheet",instance:v,count:1,state:T},f.set(d,v)}}}function Jw(n,i){ir.X(n,i);var a=go;if(a&&n){var l=un(a).hoistableScripts,f=_o(n),d=l.get(f);d||(d=a.querySelector(uu(f)),d||(n=E({src:n,async:!0},i),(i=Yn.get(f))&&Xm(n,i),d=a.createElement("script"),ye(d),$e(d,"link",n),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(f,d))}}function Ww(n,i){ir.M(n,i);var a=go;if(a&&n){var l=un(a).hoistableScripts,f=_o(n),d=l.get(f);d||(d=a.querySelector(uu(f)),d||(n=E({src:n,async:!0,type:"module"},i),(i=Yn.get(f))&&Xm(n,i),d=a.createElement("script"),ye(d),$e(d,"link",n),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(f,d))}}function pE(n,i,a,l){var f=(f=At.current)?Nh(f):null;if(!f)throw Error(r(446));switch(n){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(i=po(a.href),a=un(f).hoistableStyles,l=a.get(i),l||(l={type:"style",instance:null,count:0,state:null},a.set(i,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){n=po(a.href);var d=un(f).hoistableStyles,v=d.get(n);if(v||(f=f.ownerDocument||f,v={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},d.set(n,v),(d=f.querySelector(lu(n)))&&!d._p&&(v.instance=d,v.state.loading=5),Yn.has(n)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Yn.set(n,a),d||t1(f,n,a,v.state))),i&&l===null)throw Error(r(528,""));return v}if(i&&l!==null)throw Error(r(529,""));return null;case"script":return i=a.async,a=a.src,typeof a=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=_o(a),a=un(f).hoistableScripts,l=a.get(i),l||(l={type:"script",instance:null,count:0,state:null},a.set(i,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,n))}}function po(n){return'href="'+we(n)+'"'}function lu(n){return'link[rel="stylesheet"]['+n+"]"}function _E(n){return E({},n,{"data-precedence":n.precedence,precedence:null})}function t1(n,i,a,l){n.querySelector('link[rel="preload"][as="style"]['+i+"]")?l.loading=1:(i=n.createElement("link"),l.preload=i,i.addEventListener("load",function(){return l.loading|=1}),i.addEventListener("error",function(){return l.loading|=2}),$e(i,"link",a),ye(i),n.head.appendChild(i))}function _o(n){return'[src="'+we(n)+'"]'}function uu(n){return"script[async]"+n}function yE(n,i,a){if(i.count++,i.instance===null)switch(i.type){case"style":var l=n.querySelector('style[data-href~="'+we(a.href)+'"]');if(l)return i.instance=l,ye(l),l;var f=E({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(n.ownerDocument||n).createElement("style"),ye(l),$e(l,"style",f),xh(l,a.precedence,n),i.instance=l;case"stylesheet":f=po(a.href);var d=n.querySelector(lu(f));if(d)return i.state.loading|=4,i.instance=d,ye(d),d;l=_E(a),(f=Yn.get(f))&&Ym(l,f),d=(n.ownerDocument||n).createElement("link"),ye(d);var v=d;return v._p=new Promise(function(T,I){v.onload=T,v.onerror=I}),$e(d,"link",l),i.state.loading|=4,xh(d,a.precedence,n),i.instance=d;case"script":return d=_o(a.src),(f=n.querySelector(uu(d)))?(i.instance=f,ye(f),f):(l=a,(f=Yn.get(d))&&(l=E({},a),Xm(l,f)),n=n.ownerDocument||n,f=n.createElement("script"),ye(f),$e(f,"link",l),n.head.appendChild(f),i.instance=f);case"void":return null;default:throw Error(r(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(l=i.instance,i.state.loading|=4,xh(l,a.precedence,n));return i.instance}function xh(n,i,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=l.length?l[l.length-1]:null,d=f,v=0;v<l.length;v++){var T=l[v];if(T.dataset.precedence===i)d=T;else if(d!==f)break}d?d.parentNode.insertBefore(n,d.nextSibling):(i=a.nodeType===9?a.head:a,i.insertBefore(n,i.firstChild))}function Ym(n,i){n.crossOrigin==null&&(n.crossOrigin=i.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=i.referrerPolicy),n.title==null&&(n.title=i.title)}function Xm(n,i){n.crossOrigin==null&&(n.crossOrigin=i.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=i.referrerPolicy),n.integrity==null&&(n.integrity=i.integrity)}var Oh=null;function vE(n,i,a){if(Oh===null){var l=new Map,f=Oh=new Map;f.set(a,l)}else f=Oh,l=f.get(a),l||(l=new Map,f.set(a,l));if(l.has(n))return l;for(l.set(n,null),a=a.getElementsByTagName(n),f=0;f<a.length;f++){var d=a[f];if(!(d[As]||d[Ne]||n==="link"&&d.getAttribute("rel")==="stylesheet")&&d.namespaceURI!=="http://www.w3.org/2000/svg"){var v=d.getAttribute(i)||"";v=n+v;var T=l.get(v);T?T.push(d):l.set(v,[d])}}return l}function EE(n,i,a){n=n.ownerDocument||n,n.head.insertBefore(a,i==="title"?n.querySelector("head > title"):null)}function e1(n,i,a){if(a===1||i.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return n=i.disabled,typeof i.precedence=="string"&&n==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function TE(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}var cu=null;function n1(){}function i1(n,i,a){if(cu===null)throw Error(r(475));var l=cu;if(i.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&(i.state.loading&4)===0){if(i.instance===null){var f=po(a.href),d=n.querySelector(lu(f));if(d){n=d._p,n!==null&&typeof n=="object"&&typeof n.then=="function"&&(l.count++,l=Mh.bind(l),n.then(l,l)),i.state.loading|=4,i.instance=d,ye(d);return}d=n.ownerDocument||n,a=_E(a),(f=Yn.get(f))&&Ym(a,f),d=d.createElement("link"),ye(d);var v=d;v._p=new Promise(function(T,I){v.onload=T,v.onerror=I}),$e(d,"link",a),i.instance=d}l.stylesheets===null&&(l.stylesheets=new Map),l.stylesheets.set(i,n),(n=i.state.preload)&&(i.state.loading&3)===0&&(l.count++,i=Mh.bind(l),n.addEventListener("load",i),n.addEventListener("error",i))}}function r1(){if(cu===null)throw Error(r(475));var n=cu;return n.stylesheets&&n.count===0&&$m(n,n.stylesheets),0<n.count?function(i){var a=setTimeout(function(){if(n.stylesheets&&$m(n,n.stylesheets),n.unsuspend){var l=n.unsuspend;n.unsuspend=null,l()}},6e4);return n.unsuspend=i,function(){n.unsuspend=null,clearTimeout(a)}}:null}function Mh(){if(this.count--,this.count===0){if(this.stylesheets)$m(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var Ph=null;function $m(n,i){n.stylesheets=null,n.unsuspend!==null&&(n.count++,Ph=new Map,i.forEach(s1,n),Ph=null,Mh.call(n))}function s1(n,i){if(!(i.state.loading&4)){var a=Ph.get(n);if(a)var l=a.get(null);else{a=new Map,Ph.set(n,a);for(var f=n.querySelectorAll("link[data-precedence],style[data-precedence]"),d=0;d<f.length;d++){var v=f[d];(v.nodeName==="LINK"||v.getAttribute("media")!=="not all")&&(a.set(v.dataset.precedence,v),l=v)}l&&a.set(null,l)}f=i.instance,v=f.getAttribute("data-precedence"),d=a.get(v)||l,d===l&&a.set(null,f),a.set(v,f),this.count++,l=Mh.bind(this),f.addEventListener("load",l),f.addEventListener("error",l),d?d.parentNode.insertBefore(f,d.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(f,n.firstChild)),i.state.loading|=4}}var hu={$$typeof:it,Provider:null,Consumer:null,_currentValue:pt,_currentValue2:pt,_threadCount:0};function a1(n,i,a,l,f,d,v,T){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Oi(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Oi(0),this.hiddenUpdates=Oi(null),this.identifierPrefix=l,this.onUncaughtError=f,this.onCaughtError=d,this.onRecoverableError=v,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=T,this.incompleteTransitions=new Map}function AE(n,i,a,l,f,d,v,T,I,z,K,$){return n=new a1(n,i,a,v,T,I,z,$),i=1,d===!0&&(i|=24),d=Rn(3,null,null,i),n.current=d,d.stateNode=n,i=Nd(),i.refCount++,n.pooledCache=i,i.refCount++,d.memoizedState={element:l,isDehydrated:a,cache:i},Pd(d),n}function bE(n){return n?(n=Ka,n):Ka}function SE(n,i,a,l,f,d){f=bE(f),l.context===null?l.context=f:l.pendingContext=f,l=br(i),l.payload={element:a},d=d===void 0?null:d,d!==null&&(l.callback=d),a=Sr(n,l,i),a!==null&&(xn(a,n,i),ql(a,n,i))}function wE(n,i){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var a=n.retryLane;n.retryLane=a!==0&&a<i?a:i}}function Zm(n,i){wE(n,i),(n=n.alternate)&&wE(n,i)}function IE(n){if(n.tag===13){var i=Qa(n,67108864);i!==null&&xn(i,n,67108864),Zm(n,67108864)}}var Uh=!0;function o1(n,i,a,l){var f=Q.T;Q.T=null;var d=st.p;try{st.p=2,Jm(n,i,a,l)}finally{st.p=d,Q.T=f}}function l1(n,i,a,l){var f=Q.T;Q.T=null;var d=st.p;try{st.p=8,Jm(n,i,a,l)}finally{st.p=d,Q.T=f}}function Jm(n,i,a,l){if(Uh){var f=Wm(l);if(f===null)km(n,i,l,Lh,a),DE(n,l);else if(c1(f,n,i,a,l))l.stopPropagation();else if(DE(n,l),i&4&&-1<u1.indexOf(n)){for(;f!==null;){var d=li(f);if(d!==null)switch(d.tag){case 3:if(d=d.stateNode,d.current.memoizedState.isDehydrated){var v=Zn(d.pendingLanes);if(v!==0){var T=d;for(T.pendingLanes|=2,T.entangledLanes|=2;v;){var I=1<<31-tn(v);T.entanglements[1]|=I,v&=~I}Ai(d),(Kt&6)===0&&(Eh=Un()+500,ru(0))}}break;case 13:T=Qa(d,2),T!==null&&xn(T,d,2),Ah(),Zm(d,2)}if(d=Wm(l),d===null&&km(n,i,l,Lh,a),d===f)break;f=d}f!==null&&l.stopPropagation()}else km(n,i,l,null,a)}}function Wm(n){return n=kn(n),tg(n)}var Lh=null;function tg(n){if(Lh=null,n=Pi(n),n!==null){var i=u(n);if(i===null)n=null;else{var a=i.tag;if(a===13){if(n=h(i),n!==null)return n;n=null}else if(a===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;n=null}else i!==n&&(n=null)}}return Lh=n,null}function RE(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(id()){case ul:return 2;case wa:return 8;case _s:case rd:return 32;case Ia:return 268435456;default:return 32}default:return 32}}var eg=!1,Lr=null,Br=null,kr=null,fu=new Map,du=new Map,zr=[],u1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function DE(n,i){switch(n){case"focusin":case"focusout":Lr=null;break;case"dragenter":case"dragleave":Br=null;break;case"mouseover":case"mouseout":kr=null;break;case"pointerover":case"pointerout":fu.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":du.delete(i.pointerId)}}function mu(n,i,a,l,f,d){return n===null||n.nativeEvent!==d?(n={blockedOn:i,domEventName:a,eventSystemFlags:l,nativeEvent:d,targetContainers:[f]},i!==null&&(i=li(i),i!==null&&IE(i)),n):(n.eventSystemFlags|=l,i=n.targetContainers,f!==null&&i.indexOf(f)===-1&&i.push(f),n)}function c1(n,i,a,l,f){switch(i){case"focusin":return Lr=mu(Lr,n,i,a,l,f),!0;case"dragenter":return Br=mu(Br,n,i,a,l,f),!0;case"mouseover":return kr=mu(kr,n,i,a,l,f),!0;case"pointerover":var d=f.pointerId;return fu.set(d,mu(fu.get(d)||null,n,i,a,l,f)),!0;case"gotpointercapture":return d=f.pointerId,du.set(d,mu(du.get(d)||null,n,i,a,l,f)),!0}return!1}function VE(n){var i=Pi(n.target);if(i!==null){var a=u(i);if(a!==null){if(i=a.tag,i===13){if(i=h(a),i!==null){n.blockedOn=i,Ac(n.priority,function(){if(a.tag===13){var l=Nn();l=mr(l);var f=Qa(a,l);f!==null&&xn(f,a,l),Zm(a,l)}});return}}else if(i===3&&a.stateNode.current.memoizedState.isDehydrated){n.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Bh(n){if(n.blockedOn!==null)return!1;for(var i=n.targetContainers;0<i.length;){var a=Wm(n.nativeEvent);if(a===null){a=n.nativeEvent;var l=new a.constructor(a.type,a);ki=l,a.target.dispatchEvent(l),ki=null}else return i=li(a),i!==null&&IE(i),n.blockedOn=a,!1;i.shift()}return!0}function CE(n,i,a){Bh(n)&&a.delete(i)}function h1(){eg=!1,Lr!==null&&Bh(Lr)&&(Lr=null),Br!==null&&Bh(Br)&&(Br=null),kr!==null&&Bh(kr)&&(kr=null),fu.forEach(CE),du.forEach(CE)}function kh(n,i){n.blockedOn===i&&(n.blockedOn=null,eg||(eg=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,h1)))}var zh=null;function NE(n){zh!==n&&(zh=n,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){zh===n&&(zh=null);for(var i=0;i<n.length;i+=3){var a=n[i],l=n[i+1],f=n[i+2];if(typeof l!="function"){if(tg(l||a)===null)continue;break}var d=li(a);d!==null&&(n.splice(i,3),i-=3,tm(d,{pending:!0,data:f,method:a.method,action:l},l,f))}}))}function gu(n){function i(I){return kh(I,n)}Lr!==null&&kh(Lr,n),Br!==null&&kh(Br,n),kr!==null&&kh(kr,n),fu.forEach(i),du.forEach(i);for(var a=0;a<zr.length;a++){var l=zr[a];l.blockedOn===n&&(l.blockedOn=null)}for(;0<zr.length&&(a=zr[0],a.blockedOn===null);)VE(a),a.blockedOn===null&&zr.shift();if(a=(n.ownerDocument||n).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var f=a[l],d=a[l+1],v=f[Se]||null;if(typeof d=="function")v||NE(a);else if(v){var T=null;if(d&&d.hasAttribute("formAction")){if(f=d,v=d[Se]||null)T=v.formAction;else if(tg(f)!==null)continue}else T=v.action;typeof T=="function"?a[l+1]=T:(a.splice(l,3),l-=3),NE(a)}}}function ng(n){this._internalRoot=n}qh.prototype.render=ng.prototype.render=function(n){var i=this._internalRoot;if(i===null)throw Error(r(409));var a=i.current,l=Nn();SE(a,l,n,i,null,null)},qh.prototype.unmount=ng.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var i=n.containerInfo;SE(n.current,2,null,n,null,null),Ah(),i[Ln]=null}};function qh(n){this._internalRoot=n}qh.prototype.unstable_scheduleHydration=function(n){if(n){var i=gr();n={blockedOn:null,target:n,priority:i};for(var a=0;a<zr.length&&i!==0&&i<zr[a].priority;a++);zr.splice(a,0,n),a===0&&VE(n)}};var xE=t.version;if(xE!=="19.1.1")throw Error(r(527,xE,"19.1.1"));st.findDOMNode=function(n){var i=n._reactInternals;if(i===void 0)throw typeof n.render=="function"?Error(r(188)):(n=Object.keys(n).join(","),Error(r(268,n)));return n=g(i),n=n!==null?_(n):null,n=n===null?null:n.stateNode,n};var f1={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:Q,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Fh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Fh.isDisabled&&Fh.supportsFiber)try{me=Fh.inject(f1),Qt=Fh}catch{}}return _u.createRoot=function(n,i){if(!o(n))throw Error(r(299));var a=!1,l="",f=Yy,d=Xy,v=$y,T=null;return i!=null&&(i.unstable_strictMode===!0&&(a=!0),i.identifierPrefix!==void 0&&(l=i.identifierPrefix),i.onUncaughtError!==void 0&&(f=i.onUncaughtError),i.onCaughtError!==void 0&&(d=i.onCaughtError),i.onRecoverableError!==void 0&&(v=i.onRecoverableError),i.unstable_transitionCallbacks!==void 0&&(T=i.unstable_transitionCallbacks)),i=AE(n,1,!1,null,null,a,l,f,d,v,T,null),n[Ln]=i.current,Bm(n),new ng(i)},_u.hydrateRoot=function(n,i,a){if(!o(n))throw Error(r(299));var l=!1,f="",d=Yy,v=Xy,T=$y,I=null,z=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(f=a.identifierPrefix),a.onUncaughtError!==void 0&&(d=a.onUncaughtError),a.onCaughtError!==void 0&&(v=a.onCaughtError),a.onRecoverableError!==void 0&&(T=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(I=a.unstable_transitionCallbacks),a.formState!==void 0&&(z=a.formState)),i=AE(n,1,!0,i,a??null,l,f,d,v,T,I,z),i.context=bE(null),a=i.current,l=Nn(),l=mr(l),f=br(l),f.callback=null,Sr(a,f,l),a=l,i.current.lanes=a,Mi(i,a),Ai(i),n[Ln]=i.current,Bm(n),new qh(i)},_u.version="19.1.1",_u}var FE;function A1(){if(FE)return sg.exports;FE=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(t){console.error(t)}}return s(),sg.exports=T1(),sg.exports}var b1=A1();const S1=()=>{};var jE={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N0=function(s){const t=[];let e=0;for(let r=0;r<s.length;r++){let o=s.charCodeAt(r);o<128?t[e++]=o:o<2048?(t[e++]=o>>6|192,t[e++]=o&63|128):(o&64512)===55296&&r+1<s.length&&(s.charCodeAt(r+1)&64512)===56320?(o=65536+((o&1023)<<10)+(s.charCodeAt(++r)&1023),t[e++]=o>>18|240,t[e++]=o>>12&63|128,t[e++]=o>>6&63|128,t[e++]=o&63|128):(t[e++]=o>>12|224,t[e++]=o>>6&63|128,t[e++]=o&63|128)}return t},w1=function(s){const t=[];let e=0,r=0;for(;e<s.length;){const o=s[e++];if(o<128)t[r++]=String.fromCharCode(o);else if(o>191&&o<224){const u=s[e++];t[r++]=String.fromCharCode((o&31)<<6|u&63)}else if(o>239&&o<365){const u=s[e++],h=s[e++],m=s[e++],g=((o&7)<<18|(u&63)<<12|(h&63)<<6|m&63)-65536;t[r++]=String.fromCharCode(55296+(g>>10)),t[r++]=String.fromCharCode(56320+(g&1023))}else{const u=s[e++],h=s[e++];t[r++]=String.fromCharCode((o&15)<<12|(u&63)<<6|h&63)}}return t.join("")},x0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(s,t){if(!Array.isArray(s))throw Error("encodeByteArray takes an array as a parameter");this.init_();const e=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let o=0;o<s.length;o+=3){const u=s[o],h=o+1<s.length,m=h?s[o+1]:0,g=o+2<s.length,_=g?s[o+2]:0,E=u>>2,A=(u&3)<<4|m>>4;let S=(m&15)<<2|_>>6,O=_&63;g||(O=64,h||(S=64)),r.push(e[E],e[A],e[S],e[O])}return r.join("")},encodeString(s,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(s):this.encodeByteArray(N0(s),t)},decodeString(s,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(s):w1(this.decodeStringToByteArray(s,t))},decodeStringToByteArray(s,t){this.init_();const e=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let o=0;o<s.length;){const u=e[s.charAt(o++)],m=o<s.length?e[s.charAt(o)]:0;++o;const _=o<s.length?e[s.charAt(o)]:64;++o;const A=o<s.length?e[s.charAt(o)]:64;if(++o,u==null||m==null||_==null||A==null)throw new I1;const S=u<<2|m>>4;if(r.push(S),_!==64){const O=m<<4&240|_>>2;if(r.push(O),A!==64){const H=_<<6&192|A;r.push(H)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let s=0;s<this.ENCODED_VALS.length;s++)this.byteToCharMap_[s]=this.ENCODED_VALS.charAt(s),this.charToByteMap_[this.byteToCharMap_[s]]=s,this.byteToCharMapWebSafe_[s]=this.ENCODED_VALS_WEBSAFE.charAt(s),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[s]]=s,s>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(s)]=s,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(s)]=s)}}};class I1 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const R1=function(s){const t=N0(s);return x0.encodeByteArray(t,!0)},uf=function(s){return R1(s).replace(/\./g,"")},O0=function(s){try{return x0.decodeString(s,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function cf(s,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:const e=t;return new Date(e.getTime());case Object:s===void 0&&(s={});break;case Array:s=[];break;default:return t}for(const e in t)!t.hasOwnProperty(e)||!D1(e)||(s[e]=cf(s[e],t[e]));return s}function D1(s){return s!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rp(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V1=()=>rp().__FIREBASE_DEFAULTS__,C1=()=>{if(typeof process>"u"||typeof jE>"u")return;const s=jE.__FIREBASE_DEFAULTS__;if(s)return JSON.parse(s)},N1=()=>{if(typeof document>"u")return;let s;try{s=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=s&&O0(s[1]);return t&&JSON.parse(t)},M0=()=>{try{return S1()||V1()||C1()||N1()}catch(s){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${s}`);return}},sp=()=>{var s;return(s=M0())==null?void 0:s.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x1{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}wrapCallback(t){return(e,r)=>{e?this.reject(e):this.resolve(r),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(e):t(e,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ap(s){try{return(s.startsWith("http://")||s.startsWith("https://")?new URL(s).hostname:s).endsWith(".cloudworkstations.dev")}catch{return!1}}async function O1(s){return(await fetch(s,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M1(s,t){if(s.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const e={alg:"none",type:"JWT"},r=t||"demo-project",o=s.iat||0,u=s.sub||s.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const h={iss:`https://securetoken.google.com/${r}`,aud:r,iat:o,exp:o+3600,auth_time:o,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}},...s};return[uf(JSON.stringify(e)),uf(JSON.stringify(h)),""].join(".")}const Du={};function P1(){const s={prod:[],emulator:[]};for(const t of Object.keys(Du))Du[t]?s.emulator.push(t):s.prod.push(t);return s}function U1(s){let t=document.getElementById(s),e=!1;return t||(t=document.createElement("div"),t.setAttribute("id",s),e=!0),{created:e,element:t}}let GE=!1;function L1(s,t){if(typeof window>"u"||typeof document>"u"||!ap(window.location.host)||Du[s]===t||Du[s]||GE)return;Du[s]=t;function e(S){return`__firebase__banner__${S}`}const r="__firebase__banner",u=P1().prod.length>0;function h(){const S=document.getElementById(r);S&&S.remove()}function m(S){S.style.display="flex",S.style.background="#7faaf0",S.style.position="fixed",S.style.bottom="5px",S.style.left="5px",S.style.padding=".5em",S.style.borderRadius="5px",S.style.alignItems="center"}function g(S,O){S.setAttribute("width","24"),S.setAttribute("id",O),S.setAttribute("height","24"),S.setAttribute("viewBox","0 0 24 24"),S.setAttribute("fill","none"),S.style.marginLeft="-6px"}function _(){const S=document.createElement("span");return S.style.cursor="pointer",S.style.marginLeft="16px",S.style.fontSize="24px",S.innerHTML=" &times;",S.onclick=()=>{GE=!0,h()},S}function E(S,O){S.setAttribute("id",O),S.innerText="Learn more",S.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",S.setAttribute("target","__blank"),S.style.paddingLeft="5px",S.style.textDecoration="underline"}function A(){const S=U1(r),O=e("text"),H=document.getElementById(O)||document.createElement("span"),Z=e("learnmore"),Y=document.getElementById(Z)||document.createElement("a"),mt=e("preprendIcon"),ut=document.getElementById(mt)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(S.created){const it=S.element;m(it),E(Y,Z);const St=_();g(ut,mt),it.append(ut,H,Y,St),document.body.appendChild(it)}u?(H.innerText="Preview backend disconnected.",ut.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(ut.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,H.innerText="Preview backend running in this workspace."),H.setAttribute("id",O)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",A):A()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hf(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function P0(){var t;const s=(t=M0())==null?void 0:t.forceEnvironment;if(s==="node")return!0;if(s==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function B1(){return typeof window<"u"||U0()}function U0(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function L0(){return!P0()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function B0(){return!P0()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function k0(){try{return typeof indexedDB=="object"}catch{return!1}}function k1(){return new Promise((s,t)=>{try{let e=!0;const r="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(r);o.onsuccess=()=>{o.result.close(),e||self.indexedDB.deleteDatabase(r),s(!0)},o.onupgradeneeded=()=>{e=!1},o.onerror=()=>{var u;t(((u=o.error)==null?void 0:u.message)||"")}}catch(e){t(e)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z1="FirebaseError";class Ea extends Error{constructor(t,e,r){super(e),this.code=t,this.customData=r,this.name=z1,Object.setPrototypeOf(this,Ea.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Cf.prototype.create)}}class Cf{constructor(t,e,r){this.service=t,this.serviceName=e,this.errors=r}create(t,...e){const r=e[0]||{},o=`${this.service}/${t}`,u=this.errors[t],h=u?q1(u,r):"Error",m=`${this.serviceName}: ${h} (${o}).`;return new Ea(o,m,r)}}function q1(s,t){return s.replace(F1,(e,r)=>{const o=t[r];return o!=null?String(o):`<${r}?>`})}const F1=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HE(s,t){return Object.prototype.hasOwnProperty.call(s,t)}function No(s,t){if(s===t)return!0;const e=Object.keys(s),r=Object.keys(t);for(const o of e){if(!r.includes(o))return!1;const u=s[o],h=t[o];if(QE(u)&&QE(h)){if(!No(u,h))return!1}else if(u!==h)return!1}for(const o of r)if(!e.includes(o))return!1;return!0}function QE(s){return s!==null&&typeof s=="object"}function j1(s,t){const e=new G1(s,t);return e.subscribe.bind(e)}class G1{constructor(t,e){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then(()=>{t(this)}).catch(r=>{this.error(r)})}next(t){this.forEachObserver(e=>{e.next(t)})}error(t){this.forEachObserver(e=>{e.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,e,r){let o;if(t===void 0&&e===void 0&&r===void 0)throw new Error("Missing Observer.");H1(t,["next","error","complete"])?o=t:o={next:t,error:e,complete:r},o.next===void 0&&(o.next=ug),o.error===void 0&&(o.error=ug),o.complete===void 0&&(o.complete=ug);const u=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),u}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let e=0;e<this.observers.length;e++)this.sendOne(e,t)}sendOne(t,e){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{e(this.observers[t])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function H1(s,t){if(typeof s!="object"||s===null)return!1;for(const e of t)if(e in s&&typeof s[e]=="function")return!0;return!1}function ug(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ce(s){return s&&s._delegate?s._delegate:s}class ca{constructor(t,e,r){this.name=t,this.instanceFactory=e,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Js="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q1{constructor(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){const r=new x1;if(this.instancesDeferred.set(e,r),this.isInitialized(e)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:e});o&&r.resolve(o)}catch{}}return this.instancesDeferred.get(e).promise}getImmediate(t){const e=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),r=(t==null?void 0:t.optional)??!1;if(this.isInitialized(e)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:e})}catch(o){if(r)return null;throw o}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(Y1(t))try{this.getOrInitializeService({instanceIdentifier:Js})}catch{}for(const[e,r]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(e);try{const u=this.getOrInitializeService({instanceIdentifier:o});r.resolve(u)}catch{}}}}clearInstance(t=Js){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...t.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=Js){return this.instances.has(t)}getOptions(t=Js){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:e={}}=t,r=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:r,options:e});for(const[u,h]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(u);r===m&&h.resolve(o)}return o}onInit(t,e){const r=this.normalizeInstanceIdentifier(e),o=this.onInitCallbacks.get(r)??new Set;o.add(t),this.onInitCallbacks.set(r,o);const u=this.instances.get(r);return u&&t(u,r),()=>{o.delete(t)}}invokeOnInitCallbacks(t,e){const r=this.onInitCallbacks.get(e);if(r)for(const o of r)try{o(t,e)}catch{}}getOrInitializeService({instanceIdentifier:t,options:e={}}){let r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:K1(t),options:e}),this.instances.set(t,r),this.instancesOptions.set(t,e),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch{}return r||null}normalizeInstanceIdentifier(t=Js){return this.component?this.component.multipleInstances?t:Js:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function K1(s){return s===Js?void 0:s}function Y1(s){return s.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z0{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const e=this.getProvider(t.name);if(e.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);e.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const e=new Q1(t,this);return this.providers.set(t,e),e}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const op=[];var Pt;(function(s){s[s.DEBUG=0]="DEBUG",s[s.VERBOSE=1]="VERBOSE",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.SILENT=5]="SILENT"})(Pt||(Pt={}));const q0={debug:Pt.DEBUG,verbose:Pt.VERBOSE,info:Pt.INFO,warn:Pt.WARN,error:Pt.ERROR,silent:Pt.SILENT},X1=Pt.INFO,$1={[Pt.DEBUG]:"log",[Pt.VERBOSE]:"log",[Pt.INFO]:"info",[Pt.WARN]:"warn",[Pt.ERROR]:"error"},Z1=(s,t,...e)=>{if(t<s.logLevel)return;const r=new Date().toISOString(),o=$1[t];if(o)console[o](`[${r}]  ${s.name}:`,...e);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class lp{constructor(t){this.name=t,this._logLevel=X1,this._logHandler=Z1,this._userLogHandler=null,op.push(this)}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Pt))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?q0[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Pt.DEBUG,...t),this._logHandler(this,Pt.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Pt.VERBOSE,...t),this._logHandler(this,Pt.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Pt.INFO,...t),this._logHandler(this,Pt.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Pt.WARN,...t),this._logHandler(this,Pt.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Pt.ERROR,...t),this._logHandler(this,Pt.ERROR,...t)}}function J1(s){op.forEach(t=>{t.setLogLevel(s)})}function W1(s,t){for(const e of op){let r=null;t&&t.level&&(r=q0[t.level]),s===null?e.userLogHandler=null:e.userLogHandler=(o,u,...h)=>{const m=h.map(g=>{if(g==null)return null;if(typeof g=="string")return g;if(typeof g=="number"||typeof g=="boolean")return g.toString();if(g instanceof Error)return g.message;try{return JSON.stringify(g)}catch{return null}}).filter(g=>g).join(" ");u>=(r??o.logLevel)&&s({level:Pt[u].toLowerCase(),message:m,args:h,type:o.name})}}}const tI=(s,t)=>t.some(e=>s instanceof e);let KE,YE;function eI(){return KE||(KE=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function nI(){return YE||(YE=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const F0=new WeakMap,Sg=new WeakMap,j0=new WeakMap,cg=new WeakMap,up=new WeakMap;function iI(s){const t=new Promise((e,r)=>{const o=()=>{s.removeEventListener("success",u),s.removeEventListener("error",h)},u=()=>{e(Xr(s.result)),o()},h=()=>{r(s.error),o()};s.addEventListener("success",u),s.addEventListener("error",h)});return t.then(e=>{e instanceof IDBCursor&&F0.set(e,s)}).catch(()=>{}),up.set(t,s),t}function rI(s){if(Sg.has(s))return;const t=new Promise((e,r)=>{const o=()=>{s.removeEventListener("complete",u),s.removeEventListener("error",h),s.removeEventListener("abort",h)},u=()=>{e(),o()},h=()=>{r(s.error||new DOMException("AbortError","AbortError")),o()};s.addEventListener("complete",u),s.addEventListener("error",h),s.addEventListener("abort",h)});Sg.set(s,t)}let wg={get(s,t,e){if(s instanceof IDBTransaction){if(t==="done")return Sg.get(s);if(t==="objectStoreNames")return s.objectStoreNames||j0.get(s);if(t==="store")return e.objectStoreNames[1]?void 0:e.objectStore(e.objectStoreNames[0])}return Xr(s[t])},set(s,t,e){return s[t]=e,!0},has(s,t){return s instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in s}};function sI(s){wg=s(wg)}function aI(s){return s===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...e){const r=s.call(hg(this),t,...e);return j0.set(r,t.sort?t.sort():[t]),Xr(r)}:nI().includes(s)?function(...t){return s.apply(hg(this),t),Xr(F0.get(this))}:function(...t){return Xr(s.apply(hg(this),t))}}function oI(s){return typeof s=="function"?aI(s):(s instanceof IDBTransaction&&rI(s),tI(s,eI())?new Proxy(s,wg):s)}function Xr(s){if(s instanceof IDBRequest)return iI(s);if(cg.has(s))return cg.get(s);const t=oI(s);return t!==s&&(cg.set(s,t),up.set(t,s)),t}const hg=s=>up.get(s);function lI(s,t,{blocked:e,upgrade:r,blocking:o,terminated:u}={}){const h=indexedDB.open(s,t),m=Xr(h);return r&&h.addEventListener("upgradeneeded",g=>{r(Xr(h.result),g.oldVersion,g.newVersion,Xr(h.transaction),g)}),e&&h.addEventListener("blocked",g=>e(g.oldVersion,g.newVersion,g)),m.then(g=>{u&&g.addEventListener("close",()=>u()),o&&g.addEventListener("versionchange",_=>o(_.oldVersion,_.newVersion,_))}).catch(()=>{}),m}const uI=["get","getKey","getAll","getAllKeys","count"],cI=["put","add","delete","clear"],fg=new Map;function XE(s,t){if(!(s instanceof IDBDatabase&&!(t in s)&&typeof t=="string"))return;if(fg.get(t))return fg.get(t);const e=t.replace(/FromIndex$/,""),r=t!==e,o=cI.includes(e);if(!(e in(r?IDBIndex:IDBObjectStore).prototype)||!(o||uI.includes(e)))return;const u=async function(h,...m){const g=this.transaction(h,o?"readwrite":"readonly");let _=g.store;return r&&(_=_.index(m.shift())),(await Promise.all([_[e](...m),o&&g.done]))[0]};return fg.set(t,u),u}sI(s=>({...s,get:(t,e,r)=>XE(t,e)||s.get(t,e,r),has:(t,e)=>!!XE(t,e)||s.has(t,e)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hI{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(fI(e)){const r=e.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(e=>e).join(" ")}}function fI(s){const t=s.getComponent();return(t==null?void 0:t.type)==="VERSION"}const ff="@firebase/app",Ig="0.14.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ar=new lp("@firebase/app"),dI="@firebase/app-compat",mI="@firebase/analytics-compat",gI="@firebase/analytics",pI="@firebase/app-check-compat",_I="@firebase/app-check",yI="@firebase/auth",vI="@firebase/auth-compat",EI="@firebase/database",TI="@firebase/data-connect",AI="@firebase/database-compat",bI="@firebase/functions",SI="@firebase/functions-compat",wI="@firebase/installations",II="@firebase/installations-compat",RI="@firebase/messaging",DI="@firebase/messaging-compat",VI="@firebase/performance",CI="@firebase/performance-compat",NI="@firebase/remote-config",xI="@firebase/remote-config-compat",OI="@firebase/storage",MI="@firebase/storage-compat",PI="@firebase/firestore",UI="@firebase/ai",LI="@firebase/firestore-compat",BI="firebase",kI="12.2.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wr="[DEFAULT]",zI={[ff]:"fire-core",[dI]:"fire-core-compat",[gI]:"fire-analytics",[mI]:"fire-analytics-compat",[_I]:"fire-app-check",[pI]:"fire-app-check-compat",[yI]:"fire-auth",[vI]:"fire-auth-compat",[EI]:"fire-rtdb",[TI]:"fire-data-connect",[AI]:"fire-rtdb-compat",[bI]:"fire-fn",[SI]:"fire-fn-compat",[wI]:"fire-iid",[II]:"fire-iid-compat",[RI]:"fire-fcm",[DI]:"fire-fcm-compat",[VI]:"fire-perf",[CI]:"fire-perf-compat",[NI]:"fire-rc",[xI]:"fire-rc-compat",[OI]:"fire-gcs",[MI]:"fire-gcs-compat",[PI]:"fire-fst",[LI]:"fire-fst-compat",[UI]:"fire-vertex","fire-js":"fire-js",[BI]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ts=new Map,xo=new Map,Oo=new Map;function Bu(s,t){try{s.container.addComponent(t)}catch(e){ar.debug(`Component ${t.name} failed to register with FirebaseApp ${s.name}`,e)}}function G0(s,t){s.container.addOrOverwriteComponent(t)}function Mo(s){const t=s.name;if(Oo.has(t))return ar.debug(`There were multiple attempts to register component ${t}.`),!1;Oo.set(t,s);for(const e of ts.values())Bu(e,s);for(const e of xo.values())Bu(e,s);return!0}function H0(s,t){const e=s.container.getProvider("heartbeat").getImmediate({optional:!0});return e&&e.triggerHeartbeat(),s.container.getProvider(t)}function qI(s,t,e=Wr){H0(s,t).clearInstance(e)}function cp(s){return s.options!==void 0}function Q0(s){return cp(s)?!1:"authIdToken"in s||"appCheckToken"in s||"releaseOnDeref"in s||"automaticDataCollectionEnabled"in s}function K0(s){return s==null?!1:s.settings!==void 0}function FI(){Oo.clear()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jI={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Mn=new Cf("app","Firebase",jI);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Y0=class{constructor(t,e,r){this._isDeleted=!1,this._options={...t},this._config={...e},this._name=e.name,this._automaticDataCollectionEnabled=e.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ca("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Mn.create("app-deleted",{appName:this._name})}};/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $E(s,t){const e=O0(s.split(".")[1]);if(e===null){console.error(`FirebaseServerApp ${t} is invalid: second part could not be parsed.`);return}if(JSON.parse(e).exp===void 0){console.error(`FirebaseServerApp ${t} is invalid: expiration claim could not be parsed`);return}const o=JSON.parse(e).exp*1e3,u=new Date().getTime();o-u<=0&&console.error(`FirebaseServerApp ${t} is invalid: the token has expired.`)}class GI extends Y0{constructor(t,e,r,o){const u=e.automaticDataCollectionEnabled!==void 0?e.automaticDataCollectionEnabled:!0,h={name:r,automaticDataCollectionEnabled:u};if(t.apiKey!==void 0)super(t,h,o);else{const m=t;super(m.options,h,o)}this._serverConfig={automaticDataCollectionEnabled:u,...e},this._serverConfig.authIdToken&&$E(this._serverConfig.authIdToken,"authIdToken"),this._serverConfig.appCheckToken&&$E(this._serverConfig.appCheckToken,"appCheckToken"),this._finalizationRegistry=null,typeof FinalizationRegistry<"u"&&(this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()})),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,e.releaseOnDeref=void 0,sr(ff,Ig,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(t){this.isDeleted||(this._refCount++,t!==void 0&&this._finalizationRegistry!==null&&this._finalizationRegistry.register(t,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){dp(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw Mn.create("server-app-deleted")}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hp=kI;function fp(s,t={}){let e=s;typeof t!="object"&&(t={name:t});const r={name:Wr,automaticDataCollectionEnabled:!0,...t},o=r.name;if(typeof o!="string"||!o)throw Mn.create("bad-app-name",{appName:String(o)});if(e||(e=sp()),!e)throw Mn.create("no-options");const u=ts.get(o);if(u){if(No(e,u.options)&&No(r,u.config))return u;throw Mn.create("duplicate-app",{appName:o})}const h=new z0(o);for(const g of Oo.values())h.addComponent(g);const m=new Y0(e,r,h);return ts.set(o,m),m}function HI(s,t={}){if(B1()&&!U0())throw Mn.create("invalid-server-app-environment");let e,r=t||{};if(s&&(cp(s)?e=s.options:Q0(s)?r=s:e=s),r.automaticDataCollectionEnabled===void 0&&(r.automaticDataCollectionEnabled=!0),e||(e=sp()),!e)throw Mn.create("no-options");const o={...r,...e};o.releaseOnDeref!==void 0&&delete o.releaseOnDeref;const u=E=>[...E].reduce((A,S)=>Math.imul(31,A)+S.charCodeAt(0)|0,0);if(r.releaseOnDeref!==void 0&&typeof FinalizationRegistry>"u")throw Mn.create("finalization-registry-not-supported",{});const h=""+u(JSON.stringify(o)),m=xo.get(h);if(m)return m.incRefCount(r.releaseOnDeref),m;const g=new z0(h);for(const E of Oo.values())g.addComponent(E);const _=new GI(e,r,h,g);return xo.set(h,_),_}function QI(s=Wr){const t=ts.get(s);if(!t&&s===Wr&&sp())return fp();if(!t)throw Mn.create("no-app",{appName:s});return t}function KI(){return Array.from(ts.values())}async function dp(s){let t=!1;const e=s.name;ts.has(e)?(t=!0,ts.delete(e)):xo.has(e)&&s.decRefCount()<=0&&(xo.delete(e),t=!0),t&&(await Promise.all(s.container.getProviders().map(r=>r.delete())),s.isDeleted=!0)}function sr(s,t,e){let r=zI[s]??s;e&&(r+=`-${e}`);const o=r.match(/\s|\//),u=t.match(/\s|\//);if(o||u){const h=[`Unable to register library "${r}" with version "${t}":`];o&&h.push(`library name "${r}" contains illegal characters (whitespace or "/")`),o&&u&&h.push("and"),u&&h.push(`version name "${t}" contains illegal characters (whitespace or "/")`),ar.warn(h.join(" "));return}Mo(new ca(`${r}-version`,()=>({library:r,version:t}),"VERSION"))}function X0(s,t){if(s!==null&&typeof s!="function")throw Mn.create("invalid-log-argument");W1(s,t)}function $0(s){J1(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YI="firebase-heartbeat-database",XI=1,ku="firebase-heartbeat-store";let dg=null;function Z0(){return dg||(dg=lI(YI,XI,{upgrade:(s,t)=>{switch(t){case 0:try{s.createObjectStore(ku)}catch(e){console.warn(e)}}}}).catch(s=>{throw Mn.create("idb-open",{originalErrorMessage:s.message})})),dg}async function $I(s){try{const e=(await Z0()).transaction(ku),r=await e.objectStore(ku).get(J0(s));return await e.done,r}catch(t){if(t instanceof Ea)ar.warn(t.message);else{const e=Mn.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});ar.warn(e.message)}}}async function ZE(s,t){try{const r=(await Z0()).transaction(ku,"readwrite");await r.objectStore(ku).put(t,J0(s)),await r.done}catch(e){if(e instanceof Ea)ar.warn(e.message);else{const r=Mn.create("idb-set",{originalErrorMessage:e==null?void 0:e.message});ar.warn(r.message)}}}function J0(s){return`${s.name}!${s.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZI=1024,JI=30;class WI{constructor(t){this.container=t,this._heartbeatsCache=null;const e=this.container.getProvider("app").getImmediate();this._storage=new eR(e),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var t,e;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),u=JE();if(((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===u||this._heartbeatsCache.heartbeats.some(h=>h.date===u))return;if(this._heartbeatsCache.heartbeats.push({date:u,agent:o}),this._heartbeatsCache.heartbeats.length>JI){const h=nR(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(h,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){ar.warn(r)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=JE(),{heartbeatsToSend:r,unsentEntries:o}=tR(this._heartbeatsCache.heartbeats),u=uf(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=e,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),u}catch(e){return ar.warn(e),""}}}function JE(){return new Date().toISOString().substring(0,10)}function tR(s,t=ZI){const e=[];let r=s.slice();for(const o of s){const u=e.find(h=>h.agent===o.agent);if(u){if(u.dates.push(o.date),WE(e)>t){u.dates.pop();break}}else if(e.push({agent:o.agent,dates:[o.date]}),WE(e)>t){e.pop();break}r=r.slice(1)}return{heartbeatsToSend:e,unsentEntries:r}}class eR{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return k0()?k1().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const e=await $I(this.app);return e!=null&&e.heartbeats?e:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){if(await this._canUseIndexedDBPromise){const r=await this.read();return ZE(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){if(await this._canUseIndexedDBPromise){const r=await this.read();return ZE(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...t.heartbeats]})}else return}}function WE(s){return uf(JSON.stringify({version:2,heartbeats:s})).length}function nR(s){if(s.length===0)return-1;let t=0,e=s[0].date;for(let r=1;r<s.length;r++)s[r].date<e&&(e=s[r].date,t=r);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iR(s){Mo(new ca("platform-logger",t=>new hI(t),"PRIVATE")),Mo(new ca("heartbeat",t=>new WI(t),"PRIVATE")),sr(ff,Ig,s),sr(ff,Ig,"esm2020"),sr("fire-js","")}iR("");const rR=Object.freeze(Object.defineProperty({__proto__:null,FirebaseError:Ea,SDK_VERSION:hp,_DEFAULT_ENTRY_NAME:Wr,_addComponent:Bu,_addOrOverwriteComponent:G0,_apps:ts,_clearComponents:FI,_components:Oo,_getProvider:H0,_isFirebaseApp:cp,_isFirebaseServerApp:K0,_isFirebaseServerAppSettings:Q0,_registerComponent:Mo,_removeServiceInstance:qI,_serverApps:xo,deleteApp:dp,getApp:QI,getApps:KI,initializeApp:fp,initializeServerApp:HI,onLog:X0,registerVersion:sr,setLogLevel:$0},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sR{constructor(t,e){this._delegate=t,this.firebase=e,Bu(t,new ca("app-compat",()=>this,"PUBLIC")),this.container=t.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this._delegate.automaticDataCollectionEnabled=t}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(t=>{this._delegate.checkDestroyed(),t()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),dp(this._delegate)))}_getService(t,e=Wr){var o;this._delegate.checkDestroyed();const r=this._delegate.container.getProvider(t);return!r.isInitialized()&&((o=r.getComponent())==null?void 0:o.instantiationMode)==="EXPLICIT"&&r.initialize(),r.getImmediate({identifier:e})}_removeServiceInstance(t,e=Wr){this._delegate.container.getProvider(t).clearInstance(e)}_addComponent(t){Bu(this._delegate,t)}_addOrOverwriteComponent(t){G0(this._delegate,t)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aR={"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."},tT=new Cf("app-compat","Firebase",aR);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oR(s){const t={},e={__esModule:!0,initializeApp:u,app:o,registerVersion:sr,setLogLevel:$0,onLog:X0,apps:null,SDK_VERSION:hp,INTERNAL:{registerComponent:m,removeApp:r,useAsService:g,modularAPIs:rR}};e.default=e,Object.defineProperty(e,"apps",{get:h});function r(_){delete t[_]}function o(_){if(_=_||Wr,!HE(t,_))throw tT.create("no-app",{appName:_});return t[_]}o.App=s;function u(_,E={}){const A=fp(_,E);if(HE(t,A.name))return t[A.name];const S=new s(A,e);return t[A.name]=S,S}function h(){return Object.keys(t).map(_=>t[_])}function m(_){const E=_.name,A=E.replace("-compat","");if(Mo(_)&&_.type==="PUBLIC"){const S=(O=o())=>{if(typeof O[A]!="function")throw tT.create("invalid-app-argument",{appName:E});return O[A]()};_.serviceProps!==void 0&&cf(S,_.serviceProps),e[A]=S,s.prototype[A]=function(...O){return this._getService.bind(this,E).apply(this,_.multipleInstances?O:[])}}return _.type==="PUBLIC"?e[A]:null}function g(_,E){return E==="serverAuth"?null:E}return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W0(){const s=oR(sR);s.INTERNAL={...s.INTERNAL,createFirebaseNamespace:W0,extendNamespace:t,createSubscribe:j1,ErrorFactory:Cf,deepExtend:cf};function t(e){cf(s,e)}return s}const lR=W0();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eT=new lp("@firebase/app-compat"),uR="@firebase/app-compat",cR="0.5.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hR(s){sr(uR,cR,s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */try{const s=rp();if(s.firebase!==void 0){eT.warn(`
      Warning: Firebase is already defined in the global scope. Please make sure
      Firebase library is only loaded once.
    `);const t=s.firebase.SDK_VERSION;t&&t.indexOf("LITE")>=0&&eT.warn(`
        Warning: You are trying to load Firebase while using Firebase Performance standalone script.
        You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.
        `)}}catch{}const zu=lR;hR();var fR="firebase",dR="12.2.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */zu.registerVersion(fR,dR,"app-compat");var nT=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var $r,tA;(function(){var s;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(N,w){function D(){}D.prototype=w.prototype,N.D=w.prototype,N.prototype=new D,N.prototype.constructor=N,N.C=function(x,M,U){for(var R=Array(arguments.length-2),He=2;He<arguments.length;He++)R[He-2]=arguments[He];return w.prototype[M].apply(x,R)}}function e(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(r,e),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(N,w,D){D||(D=0);var x=Array(16);if(typeof w=="string")for(var M=0;16>M;++M)x[M]=w.charCodeAt(D++)|w.charCodeAt(D++)<<8|w.charCodeAt(D++)<<16|w.charCodeAt(D++)<<24;else for(M=0;16>M;++M)x[M]=w[D++]|w[D++]<<8|w[D++]<<16|w[D++]<<24;w=N.g[0],D=N.g[1],M=N.g[2];var U=N.g[3],R=w+(U^D&(M^U))+x[0]+3614090360&4294967295;w=D+(R<<7&4294967295|R>>>25),R=U+(M^w&(D^M))+x[1]+3905402710&4294967295,U=w+(R<<12&4294967295|R>>>20),R=M+(D^U&(w^D))+x[2]+606105819&4294967295,M=U+(R<<17&4294967295|R>>>15),R=D+(w^M&(U^w))+x[3]+3250441966&4294967295,D=M+(R<<22&4294967295|R>>>10),R=w+(U^D&(M^U))+x[4]+4118548399&4294967295,w=D+(R<<7&4294967295|R>>>25),R=U+(M^w&(D^M))+x[5]+1200080426&4294967295,U=w+(R<<12&4294967295|R>>>20),R=M+(D^U&(w^D))+x[6]+2821735955&4294967295,M=U+(R<<17&4294967295|R>>>15),R=D+(w^M&(U^w))+x[7]+4249261313&4294967295,D=M+(R<<22&4294967295|R>>>10),R=w+(U^D&(M^U))+x[8]+1770035416&4294967295,w=D+(R<<7&4294967295|R>>>25),R=U+(M^w&(D^M))+x[9]+2336552879&4294967295,U=w+(R<<12&4294967295|R>>>20),R=M+(D^U&(w^D))+x[10]+4294925233&4294967295,M=U+(R<<17&4294967295|R>>>15),R=D+(w^M&(U^w))+x[11]+2304563134&4294967295,D=M+(R<<22&4294967295|R>>>10),R=w+(U^D&(M^U))+x[12]+1804603682&4294967295,w=D+(R<<7&4294967295|R>>>25),R=U+(M^w&(D^M))+x[13]+4254626195&4294967295,U=w+(R<<12&4294967295|R>>>20),R=M+(D^U&(w^D))+x[14]+2792965006&4294967295,M=U+(R<<17&4294967295|R>>>15),R=D+(w^M&(U^w))+x[15]+1236535329&4294967295,D=M+(R<<22&4294967295|R>>>10),R=w+(M^U&(D^M))+x[1]+4129170786&4294967295,w=D+(R<<5&4294967295|R>>>27),R=U+(D^M&(w^D))+x[6]+3225465664&4294967295,U=w+(R<<9&4294967295|R>>>23),R=M+(w^D&(U^w))+x[11]+643717713&4294967295,M=U+(R<<14&4294967295|R>>>18),R=D+(U^w&(M^U))+x[0]+3921069994&4294967295,D=M+(R<<20&4294967295|R>>>12),R=w+(M^U&(D^M))+x[5]+3593408605&4294967295,w=D+(R<<5&4294967295|R>>>27),R=U+(D^M&(w^D))+x[10]+38016083&4294967295,U=w+(R<<9&4294967295|R>>>23),R=M+(w^D&(U^w))+x[15]+3634488961&4294967295,M=U+(R<<14&4294967295|R>>>18),R=D+(U^w&(M^U))+x[4]+3889429448&4294967295,D=M+(R<<20&4294967295|R>>>12),R=w+(M^U&(D^M))+x[9]+568446438&4294967295,w=D+(R<<5&4294967295|R>>>27),R=U+(D^M&(w^D))+x[14]+3275163606&4294967295,U=w+(R<<9&4294967295|R>>>23),R=M+(w^D&(U^w))+x[3]+4107603335&4294967295,M=U+(R<<14&4294967295|R>>>18),R=D+(U^w&(M^U))+x[8]+1163531501&4294967295,D=M+(R<<20&4294967295|R>>>12),R=w+(M^U&(D^M))+x[13]+2850285829&4294967295,w=D+(R<<5&4294967295|R>>>27),R=U+(D^M&(w^D))+x[2]+4243563512&4294967295,U=w+(R<<9&4294967295|R>>>23),R=M+(w^D&(U^w))+x[7]+1735328473&4294967295,M=U+(R<<14&4294967295|R>>>18),R=D+(U^w&(M^U))+x[12]+2368359562&4294967295,D=M+(R<<20&4294967295|R>>>12),R=w+(D^M^U)+x[5]+4294588738&4294967295,w=D+(R<<4&4294967295|R>>>28),R=U+(w^D^M)+x[8]+2272392833&4294967295,U=w+(R<<11&4294967295|R>>>21),R=M+(U^w^D)+x[11]+1839030562&4294967295,M=U+(R<<16&4294967295|R>>>16),R=D+(M^U^w)+x[14]+4259657740&4294967295,D=M+(R<<23&4294967295|R>>>9),R=w+(D^M^U)+x[1]+2763975236&4294967295,w=D+(R<<4&4294967295|R>>>28),R=U+(w^D^M)+x[4]+1272893353&4294967295,U=w+(R<<11&4294967295|R>>>21),R=M+(U^w^D)+x[7]+4139469664&4294967295,M=U+(R<<16&4294967295|R>>>16),R=D+(M^U^w)+x[10]+3200236656&4294967295,D=M+(R<<23&4294967295|R>>>9),R=w+(D^M^U)+x[13]+681279174&4294967295,w=D+(R<<4&4294967295|R>>>28),R=U+(w^D^M)+x[0]+3936430074&4294967295,U=w+(R<<11&4294967295|R>>>21),R=M+(U^w^D)+x[3]+3572445317&4294967295,M=U+(R<<16&4294967295|R>>>16),R=D+(M^U^w)+x[6]+76029189&4294967295,D=M+(R<<23&4294967295|R>>>9),R=w+(D^M^U)+x[9]+3654602809&4294967295,w=D+(R<<4&4294967295|R>>>28),R=U+(w^D^M)+x[12]+3873151461&4294967295,U=w+(R<<11&4294967295|R>>>21),R=M+(U^w^D)+x[15]+530742520&4294967295,M=U+(R<<16&4294967295|R>>>16),R=D+(M^U^w)+x[2]+3299628645&4294967295,D=M+(R<<23&4294967295|R>>>9),R=w+(M^(D|~U))+x[0]+4096336452&4294967295,w=D+(R<<6&4294967295|R>>>26),R=U+(D^(w|~M))+x[7]+1126891415&4294967295,U=w+(R<<10&4294967295|R>>>22),R=M+(w^(U|~D))+x[14]+2878612391&4294967295,M=U+(R<<15&4294967295|R>>>17),R=D+(U^(M|~w))+x[5]+4237533241&4294967295,D=M+(R<<21&4294967295|R>>>11),R=w+(M^(D|~U))+x[12]+1700485571&4294967295,w=D+(R<<6&4294967295|R>>>26),R=U+(D^(w|~M))+x[3]+2399980690&4294967295,U=w+(R<<10&4294967295|R>>>22),R=M+(w^(U|~D))+x[10]+4293915773&4294967295,M=U+(R<<15&4294967295|R>>>17),R=D+(U^(M|~w))+x[1]+2240044497&4294967295,D=M+(R<<21&4294967295|R>>>11),R=w+(M^(D|~U))+x[8]+1873313359&4294967295,w=D+(R<<6&4294967295|R>>>26),R=U+(D^(w|~M))+x[15]+4264355552&4294967295,U=w+(R<<10&4294967295|R>>>22),R=M+(w^(U|~D))+x[6]+2734768916&4294967295,M=U+(R<<15&4294967295|R>>>17),R=D+(U^(M|~w))+x[13]+1309151649&4294967295,D=M+(R<<21&4294967295|R>>>11),R=w+(M^(D|~U))+x[4]+4149444226&4294967295,w=D+(R<<6&4294967295|R>>>26),R=U+(D^(w|~M))+x[11]+3174756917&4294967295,U=w+(R<<10&4294967295|R>>>22),R=M+(w^(U|~D))+x[2]+718787259&4294967295,M=U+(R<<15&4294967295|R>>>17),R=D+(U^(M|~w))+x[9]+3951481745&4294967295,N.g[0]=N.g[0]+w&4294967295,N.g[1]=N.g[1]+(M+(R<<21&4294967295|R>>>11))&4294967295,N.g[2]=N.g[2]+M&4294967295,N.g[3]=N.g[3]+U&4294967295}r.prototype.u=function(N,w){w===void 0&&(w=N.length);for(var D=w-this.blockSize,x=this.B,M=this.h,U=0;U<w;){if(M==0)for(;U<=D;)o(this,N,U),U+=this.blockSize;if(typeof N=="string"){for(;U<w;)if(x[M++]=N.charCodeAt(U++),M==this.blockSize){o(this,x),M=0;break}}else for(;U<w;)if(x[M++]=N[U++],M==this.blockSize){o(this,x),M=0;break}}this.h=M,this.o+=w},r.prototype.v=function(){var N=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);N[0]=128;for(var w=1;w<N.length-8;++w)N[w]=0;var D=8*this.o;for(w=N.length-8;w<N.length;++w)N[w]=D&255,D/=256;for(this.u(N),N=Array(16),w=D=0;4>w;++w)for(var x=0;32>x;x+=8)N[D++]=this.g[w]>>>x&255;return N};function u(N,w){var D=m;return Object.prototype.hasOwnProperty.call(D,N)?D[N]:D[N]=w(N)}function h(N,w){this.h=w;for(var D=[],x=!0,M=N.length-1;0<=M;M--){var U=N[M]|0;x&&U==w||(D[M]=U,x=!1)}this.g=D}var m={};function g(N){return-128<=N&&128>N?u(N,function(w){return new h([w|0],0>w?-1:0)}):new h([N|0],0>N?-1:0)}function _(N){if(isNaN(N)||!isFinite(N))return A;if(0>N)return Y(_(-N));for(var w=[],D=1,x=0;N>=D;x++)w[x]=N/D|0,D*=4294967296;return new h(w,0)}function E(N,w){if(N.length==0)throw Error("number format error: empty string");if(w=w||10,2>w||36<w)throw Error("radix out of range: "+w);if(N.charAt(0)=="-")return Y(E(N.substring(1),w));if(0<=N.indexOf("-"))throw Error('number format error: interior "-" character');for(var D=_(Math.pow(w,8)),x=A,M=0;M<N.length;M+=8){var U=Math.min(8,N.length-M),R=parseInt(N.substring(M,M+U),w);8>U?(U=_(Math.pow(w,U)),x=x.j(U).add(_(R))):(x=x.j(D),x=x.add(_(R)))}return x}var A=g(0),S=g(1),O=g(16777216);s=h.prototype,s.m=function(){if(Z(this))return-Y(this).m();for(var N=0,w=1,D=0;D<this.g.length;D++){var x=this.i(D);N+=(0<=x?x:4294967296+x)*w,w*=4294967296}return N},s.toString=function(N){if(N=N||10,2>N||36<N)throw Error("radix out of range: "+N);if(H(this))return"0";if(Z(this))return"-"+Y(this).toString(N);for(var w=_(Math.pow(N,6)),D=this,x="";;){var M=St(D,w).g;D=mt(D,M.j(w));var U=((0<D.g.length?D.g[0]:D.h)>>>0).toString(N);if(D=M,H(D))return U+x;for(;6>U.length;)U="0"+U;x=U+x}},s.i=function(N){return 0>N?0:N<this.g.length?this.g[N]:this.h};function H(N){if(N.h!=0)return!1;for(var w=0;w<N.g.length;w++)if(N.g[w]!=0)return!1;return!0}function Z(N){return N.h==-1}s.l=function(N){return N=mt(this,N),Z(N)?-1:H(N)?0:1};function Y(N){for(var w=N.g.length,D=[],x=0;x<w;x++)D[x]=~N.g[x];return new h(D,~N.h).add(S)}s.abs=function(){return Z(this)?Y(this):this},s.add=function(N){for(var w=Math.max(this.g.length,N.g.length),D=[],x=0,M=0;M<=w;M++){var U=x+(this.i(M)&65535)+(N.i(M)&65535),R=(U>>>16)+(this.i(M)>>>16)+(N.i(M)>>>16);x=R>>>16,U&=65535,R&=65535,D[M]=R<<16|U}return new h(D,D[D.length-1]&-2147483648?-1:0)};function mt(N,w){return N.add(Y(w))}s.j=function(N){if(H(this)||H(N))return A;if(Z(this))return Z(N)?Y(this).j(Y(N)):Y(Y(this).j(N));if(Z(N))return Y(this.j(Y(N)));if(0>this.l(O)&&0>N.l(O))return _(this.m()*N.m());for(var w=this.g.length+N.g.length,D=[],x=0;x<2*w;x++)D[x]=0;for(x=0;x<this.g.length;x++)for(var M=0;M<N.g.length;M++){var U=this.i(x)>>>16,R=this.i(x)&65535,He=N.i(M)>>>16,de=N.i(M)&65535;D[2*x+2*M]+=R*de,ut(D,2*x+2*M),D[2*x+2*M+1]+=U*de,ut(D,2*x+2*M+1),D[2*x+2*M+1]+=R*He,ut(D,2*x+2*M+1),D[2*x+2*M+2]+=U*He,ut(D,2*x+2*M+2)}for(x=0;x<w;x++)D[x]=D[2*x+1]<<16|D[2*x];for(x=w;x<2*w;x++)D[x]=0;return new h(D,0)};function ut(N,w){for(;(N[w]&65535)!=N[w];)N[w+1]+=N[w]>>>16,N[w]&=65535,w++}function it(N,w){this.g=N,this.h=w}function St(N,w){if(H(w))throw Error("division by zero");if(H(N))return new it(A,A);if(Z(N))return w=St(Y(N),w),new it(Y(w.g),Y(w.h));if(Z(w))return w=St(N,Y(w)),new it(Y(w.g),w.h);if(30<N.g.length){if(Z(N)||Z(w))throw Error("slowDivide_ only works with positive integers.");for(var D=S,x=w;0>=x.l(N);)D=ft(D),x=ft(x);var M=Tt(D,1),U=Tt(x,1);for(x=Tt(x,2),D=Tt(D,2);!H(x);){var R=U.add(x);0>=R.l(N)&&(M=M.add(D),U=R),x=Tt(x,1),D=Tt(D,1)}return w=mt(N,M.j(w)),new it(M,w)}for(M=A;0<=N.l(w);){for(D=Math.max(1,Math.floor(N.m()/w.m())),x=Math.ceil(Math.log(D)/Math.LN2),x=48>=x?1:Math.pow(2,x-48),U=_(D),R=U.j(w);Z(R)||0<R.l(N);)D-=x,U=_(D),R=U.j(w);H(U)&&(U=S),M=M.add(U),N=mt(N,R)}return new it(M,N)}s.A=function(N){return St(this,N).h},s.and=function(N){for(var w=Math.max(this.g.length,N.g.length),D=[],x=0;x<w;x++)D[x]=this.i(x)&N.i(x);return new h(D,this.h&N.h)},s.or=function(N){for(var w=Math.max(this.g.length,N.g.length),D=[],x=0;x<w;x++)D[x]=this.i(x)|N.i(x);return new h(D,this.h|N.h)},s.xor=function(N){for(var w=Math.max(this.g.length,N.g.length),D=[],x=0;x<w;x++)D[x]=this.i(x)^N.i(x);return new h(D,this.h^N.h)};function ft(N){for(var w=N.g.length+1,D=[],x=0;x<w;x++)D[x]=N.i(x)<<1|N.i(x-1)>>>31;return new h(D,N.h)}function Tt(N,w){var D=w>>5;w%=32;for(var x=N.g.length-D,M=[],U=0;U<x;U++)M[U]=0<w?N.i(U+D)>>>w|N.i(U+D+1)<<32-w:N.i(U+D);return new h(M,N.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,tA=r,h.prototype.add=h.prototype.add,h.prototype.multiply=h.prototype.j,h.prototype.modulo=h.prototype.A,h.prototype.compare=h.prototype.l,h.prototype.toNumber=h.prototype.m,h.prototype.toString=h.prototype.toString,h.prototype.getBits=h.prototype.i,h.fromNumber=_,h.fromString=E,$r=h}).apply(typeof nT<"u"?nT:typeof self<"u"?self:typeof window<"u"?window:{});var jh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var eA,bu,nA,$h,Rg,iA,rA,sA;(function(){var s,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,p,y){return c==Array.prototype||c==Object.prototype||(c[p]=y.value),c};function e(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof jh=="object"&&jh];for(var p=0;p<c.length;++p){var y=c[p];if(y&&y.Math==Math)return y}throw Error("Cannot find global object")}var r=e(this);function o(c,p){if(p)t:{var y=r;c=c.split(".");for(var b=0;b<c.length-1;b++){var L=c[b];if(!(L in y))break t;y=y[L]}c=c[c.length-1],b=y[c],p=p(b),p!=b&&p!=null&&t(y,c,{configurable:!0,writable:!0,value:p})}}function u(c,p){c instanceof String&&(c+="");var y=0,b=!1,L={next:function(){if(!b&&y<c.length){var G=y++;return{value:p(G,c[G]),done:!1}}return b=!0,{done:!0,value:void 0}}};return L[Symbol.iterator]=function(){return L},L}o("Array.prototype.values",function(c){return c||function(){return u(this,function(p,y){return y})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var h=h||{},m=this||self;function g(c){var p=typeof c;return p=p!="object"?p:c?Array.isArray(c)?"array":p:"null",p=="array"||p=="object"&&typeof c.length=="number"}function _(c){var p=typeof c;return p=="object"&&c!=null||p=="function"}function E(c,p,y){return c.call.apply(c.bind,arguments)}function A(c,p,y){if(!c)throw Error();if(2<arguments.length){var b=Array.prototype.slice.call(arguments,2);return function(){var L=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(L,b),c.apply(p,L)}}return function(){return c.apply(p,arguments)}}function S(c,p,y){return S=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?E:A,S.apply(null,arguments)}function O(c,p){var y=Array.prototype.slice.call(arguments,1);return function(){var b=y.slice();return b.push.apply(b,arguments),c.apply(this,b)}}function H(c,p){function y(){}y.prototype=p.prototype,c.aa=p.prototype,c.prototype=new y,c.prototype.constructor=c,c.Qb=function(b,L,G){for(var nt=Array(arguments.length-2),Ut=2;Ut<arguments.length;Ut++)nt[Ut-2]=arguments[Ut];return p.prototype[L].apply(b,nt)}}function Z(c){const p=c.length;if(0<p){const y=Array(p);for(let b=0;b<p;b++)y[b]=c[b];return y}return[]}function Y(c,p){for(let y=1;y<arguments.length;y++){const b=arguments[y];if(g(b)){const L=c.length||0,G=b.length||0;c.length=L+G;for(let nt=0;nt<G;nt++)c[L+nt]=b[nt]}else c.push(b)}}class mt{constructor(p,y){this.i=p,this.j=y,this.h=0,this.g=null}get(){let p;return 0<this.h?(this.h--,p=this.g,this.g=p.next,p.next=null):p=this.i(),p}}function ut(c){return/^[\s\xa0]*$/.test(c)}function it(){var c=m.navigator;return c&&(c=c.userAgent)?c:""}function St(c){return St[" "](c),c}St[" "]=function(){};var ft=it().indexOf("Gecko")!=-1&&!(it().toLowerCase().indexOf("webkit")!=-1&&it().indexOf("Edge")==-1)&&!(it().indexOf("Trident")!=-1||it().indexOf("MSIE")!=-1)&&it().indexOf("Edge")==-1;function Tt(c,p,y){for(const b in c)p.call(y,c[b],b,c)}function N(c,p){for(const y in c)p.call(void 0,c[y],y,c)}function w(c){const p={};for(const y in c)p[y]=c[y];return p}const D="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function x(c,p){let y,b;for(let L=1;L<arguments.length;L++){b=arguments[L];for(y in b)c[y]=b[y];for(let G=0;G<D.length;G++)y=D[G],Object.prototype.hasOwnProperty.call(b,y)&&(c[y]=b[y])}}function M(c){var p=1;c=c.split(":");const y=[];for(;0<p&&c.length;)y.push(c.shift()),p--;return c.length&&y.push(c.join(":")),y}function U(c){m.setTimeout(()=>{throw c},0)}function R(){var c=Ft;let p=null;return c.g&&(p=c.g,c.g=c.g.next,c.g||(c.h=null),p.next=null),p}class He{constructor(){this.h=this.g=null}add(p,y){const b=de.get();b.set(p,y),this.h?this.h.next=b:this.g=b,this.h=b}}var de=new mt(()=>new Q,c=>c.reset());class Q{constructor(){this.next=this.g=this.h=null}set(p,y){this.h=p,this.g=y,this.next=null}reset(){this.next=this.g=this.h=null}}let st,pt=!1,Ft=new He,V=()=>{const c=m.Promise.resolve(void 0);st=()=>{c.then(W)}};var W=()=>{for(var c;c=R();){try{c.h.call(c.g)}catch(y){U(y)}var p=de;p.j(c),100>p.h&&(p.h++,c.next=p.g,p.g=c)}pt=!1};function ot(){this.s=this.s,this.C=this.C}ot.prototype.s=!1,ot.prototype.ma=function(){this.s||(this.s=!0,this.N())},ot.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function et(c,p){this.type=c,this.g=this.target=p,this.defaultPrevented=!1}et.prototype.h=function(){this.defaultPrevented=!0};var _t=(function(){if(!m.addEventListener||!Object.defineProperty)return!1;var c=!1,p=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const y=()=>{};m.addEventListener("test",y,p),m.removeEventListener("test",y,p)}catch{}return c})();function Vt(c,p){if(et.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var y=this.type=c.type,b=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=p,p=c.relatedTarget){if(ft){t:{try{St(p.nodeName);var L=!0;break t}catch{}L=!1}L||(p=null)}}else y=="mouseover"?p=c.fromElement:y=="mouseout"&&(p=c.toElement);this.relatedTarget=p,b?(this.clientX=b.clientX!==void 0?b.clientX:b.pageX,this.clientY=b.clientY!==void 0?b.clientY:b.pageY,this.screenX=b.screenX||0,this.screenY=b.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:At[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&Vt.aa.h.call(this)}}H(Vt,et);var At={2:"touch",3:"pen",4:"mouse"};Vt.prototype.h=function(){Vt.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var Le="closure_listenable_"+(1e6*Math.random()|0),ne=0;function ai(c,p,y,b,L){this.listener=c,this.proxy=null,this.src=p,this.type=y,this.capture=!!b,this.ha=L,this.key=++ne,this.da=this.fa=!1}function dr(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function xi(c){this.src=c,this.g={},this.h=0}xi.prototype.add=function(c,p,y,b,L){var G=c.toString();c=this.g[G],c||(c=this.g[G]=[],this.h++);var nt=gs(c,p,b,L);return-1<nt?(p=c[nt],y||(p.fa=!1)):(p=new ai(p,this.src,G,!!b,L),p.fa=y,c.push(p)),p};function ms(c,p){var y=p.type;if(y in c.g){var b=c.g[y],L=Array.prototype.indexOf.call(b,p,void 0),G;(G=0<=L)&&Array.prototype.splice.call(b,L,1),G&&(dr(p),c.g[y].length==0&&(delete c.g[y],c.h--))}}function gs(c,p,y,b){for(var L=0;L<c.length;++L){var G=c[L];if(!G.da&&G.listener==p&&G.capture==!!y&&G.ha==b)return L}return-1}var ps="closure_lm_"+(1e6*Math.random()|0),ll={};function vc(c,p,y,b,L){if(Array.isArray(p)){for(var G=0;G<p.length;G++)vc(c,p[G],y,b,L);return null}return y=Ec(y),c&&c[Le]?c.K(p,y,_(b)?!!b.capture:!1,L):Un(c,p,y,!1,b,L)}function Un(c,p,y,b,L,G){if(!p)throw Error("Invalid event type");var nt=_(L)?!!L.capture:!!L,Ut=Ia(c);if(Ut||(c[ps]=Ut=new xi(c)),y=Ut.add(p,y,b,nt,G),y.proxy)return y;if(b=id(),y.proxy=b,b.src=c,b.listener=y,c.addEventListener)_t||(L=nt),L===void 0&&(L=!1),c.addEventListener(p.toString(),b,L);else if(c.attachEvent)c.attachEvent(_s(p.toString()),b);else if(c.addListener&&c.removeListener)c.addListener(b);else throw Error("addEventListener and attachEvent are unavailable.");return y}function id(){function c(y){return p.call(c.src,c.listener,y)}const p=rd;return c}function ul(c,p,y,b,L){if(Array.isArray(p))for(var G=0;G<p.length;G++)ul(c,p[G],y,b,L);else b=_(b)?!!b.capture:!!b,y=Ec(y),c&&c[Le]?(c=c.i,p=String(p).toString(),p in c.g&&(G=c.g[p],y=gs(G,y,b,L),-1<y&&(dr(G[y]),Array.prototype.splice.call(G,y,1),G.length==0&&(delete c.g[p],c.h--)))):c&&(c=Ia(c))&&(p=c.g[p.toString()],c=-1,p&&(c=gs(p,y,b,L)),(y=-1<c?p[c]:null)&&wa(y))}function wa(c){if(typeof c!="number"&&c&&!c.da){var p=c.src;if(p&&p[Le])ms(p.i,c);else{var y=c.type,b=c.proxy;p.removeEventListener?p.removeEventListener(y,b,c.capture):p.detachEvent?p.detachEvent(_s(y),b):p.addListener&&p.removeListener&&p.removeListener(b),(y=Ia(p))?(ms(y,c),y.h==0&&(y.src=null,p[ps]=null)):dr(c)}}}function _s(c){return c in ll?ll[c]:ll[c]="on"+c}function rd(c,p){if(c.da)c=!0;else{p=new Vt(p,this);var y=c.listener,b=c.ha||c.src;c.fa&&wa(c),c=y.call(b,p)}return c}function Ia(c){return c=c[ps],c instanceof xi?c:null}var cl="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ec(c){return typeof c=="function"?c:(c[cl]||(c[cl]=function(p){return c.handleEvent(p)}),c[cl])}function me(){ot.call(this),this.i=new xi(this),this.M=this,this.F=null}H(me,ot),me.prototype[Le]=!0,me.prototype.removeEventListener=function(c,p,y,b){ul(this,c,p,y,b)};function Qt(c,p){var y,b=c.F;if(b)for(y=[];b;b=b.F)y.push(b);if(c=c.M,b=p.type||p,typeof p=="string")p=new et(p,c);else if(p instanceof et)p.target=p.target||c;else{var L=p;p=new et(b,c),x(p,L)}if(L=!0,y)for(var G=y.length-1;0<=G;G--){var nt=p.g=y[G];L=Sn(nt,b,!0,p)&&L}if(nt=p.g=c,L=Sn(nt,b,!0,p)&&L,L=Sn(nt,b,!1,p)&&L,y)for(G=0;G<y.length;G++)nt=p.g=y[G],L=Sn(nt,b,!1,p)&&L}me.prototype.N=function(){if(me.aa.N.call(this),this.i){var c=this.i,p;for(p in c.g){for(var y=c.g[p],b=0;b<y.length;b++)dr(y[b]);delete c.g[p],c.h--}}this.F=null},me.prototype.K=function(c,p,y,b){return this.i.add(String(c),p,!1,y,b)},me.prototype.L=function(c,p,y,b){return this.i.add(String(c),p,!0,y,b)};function Sn(c,p,y,b){if(p=c.i.g[String(p)],!p)return!0;p=p.concat();for(var L=!0,G=0;G<p.length;++G){var nt=p[G];if(nt&&!nt.da&&nt.capture==y){var Ut=nt.listener,xe=nt.ha||nt.src;nt.fa&&ms(c.i,nt),L=Ut.call(xe,b)!==!1&&L}}return L&&!b.defaultPrevented}function tn(c,p,y){if(typeof c=="function")y&&(c=S(c,y));else if(c&&typeof c.handleEvent=="function")c=S(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(p)?-1:m.setTimeout(c,p||0)}function Tc(c){c.g=tn(()=>{c.g=null,c.i&&(c.i=!1,Tc(c))},c.l);const p=c.h;c.h=null,c.m.apply(null,p)}class sd extends ot{constructor(p,y){super(),this.m=p,this.l=y,this.h=null,this.i=!1,this.g=null}j(p){this.h=arguments,this.g?this.i=!0:Tc(this)}N(){super.N(),this.g&&(m.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ys(c){ot.call(this),this.h=c,this.g={}}H(ys,ot);var vs=[];function Es(c){Tt(c.g,function(p,y){this.g.hasOwnProperty(y)&&wa(p)},c),c.g={}}ys.prototype.N=function(){ys.aa.N.call(this),Es(this)},ys.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Zn=m.JSON.stringify,Ra=m.JSON.parse,Ts=class{stringify(c){return m.JSON.stringify(c,void 0)}parse(c){return m.JSON.parse(c,void 0)}};function hl(){}hl.prototype.h=null;function fl(c){return c.h||(c.h=c.i())}function dl(){}var Oi={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Mi(){et.call(this,"d")}H(Mi,et);function ml(){et.call(this,"c")}H(ml,et);var oi={},gl=null;function mr(){return gl=gl||new me}oi.La="serverreachability";function Da(c){et.call(this,oi.La,c)}H(Da,et);function gr(c){const p=mr();Qt(p,new Da(p))}oi.STAT_EVENT="statevent";function Ac(c,p){et.call(this,oi.STAT_EVENT,c),this.stat=p}H(Ac,et);function oe(c){const p=mr();Qt(p,new Ac(p,c))}oi.Ma="timingevent";function Ne(c,p){et.call(this,oi.Ma,c),this.size=p}H(Ne,et);function Se(c,p){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return m.setTimeout(function(){c()},p)}function Ln(){this.g=!0}Ln.prototype.xa=function(){this.g=!1};function pl(c,p,y,b,L,G){c.info(function(){if(c.g)if(G)for(var nt="",Ut=G.split("&"),xe=0;xe<Ut.length;xe++){var Lt=Ut[xe].split("=");if(1<Lt.length){var ke=Lt[0];Lt=Lt[1];var Oe=ke.split("_");nt=2<=Oe.length&&Oe[1]=="type"?nt+(ke+"="+Lt+"&"):nt+(ke+"=redacted&")}}else nt=null;else nt=G;return"XMLHTTP REQ ("+b+") [attempt "+L+"]: "+p+`
`+y+`
`+nt})}function ad(c,p,y,b,L,G,nt){c.info(function(){return"XMLHTTP RESP ("+b+") [ attempt "+L+"]: "+p+`
`+y+`
`+G+" "+nt})}function pr(c,p,y,b){c.info(function(){return"XMLHTTP TEXT ("+p+"): "+As(c,y)+(b?" "+b:"")})}function bc(c,p){c.info(function(){return"TIMEOUT: "+p})}Ln.prototype.info=function(){};function As(c,p){if(!c.g)return p;if(!p)return null;try{var y=JSON.parse(p);if(y){for(c=0;c<y.length;c++)if(Array.isArray(y[c])){var b=y[c];if(!(2>b.length)){var L=b[1];if(Array.isArray(L)&&!(1>L.length)){var G=L[0];if(G!="noop"&&G!="stop"&&G!="close")for(var nt=1;nt<L.length;nt++)L[nt]=""}}}}return Zn(y)}catch{return p}}var _r={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Pi={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},li;function ui(){}H(ui,hl),ui.prototype.g=function(){return new XMLHttpRequest},ui.prototype.i=function(){return{}},li=new ui;function un(c,p,y,b){this.j=c,this.i=p,this.l=y,this.R=b||1,this.U=new ys(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new ye}function ye(){this.i=null,this.g="",this.h=!1}var _l={},Va={};function Jn(c,p,y){c.L=1,c.v=Rs(wn(p)),c.m=y,c.P=!0,Ui(c,null)}function Ui(c,p){c.F=Date.now(),bs(c),c.A=wn(c.v);var y=c.A,b=c.R;Array.isArray(b)||(b=[String(b)]),bl(y.i,"t",b),c.C=0,y=c.j.J,c.h=new ye,c.g=kc(c.j,y?p:null,!c.m),0<c.O&&(c.M=new sd(S(c.Y,c,c.g),c.O)),p=c.U,y=c.g,b=c.ca;var L="readystatechange";Array.isArray(L)||(L&&(vs[0]=L.toString()),L=vs);for(var G=0;G<L.length;G++){var nt=vc(y,L[G],b||p.handleEvent,!1,p.h||p);if(!nt)break;p.g[nt.key]=nt}p=c.H?w(c.H):{},c.m?(c.u||(c.u="POST"),p["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,p)):(c.u="GET",c.g.ea(c.A,c.u,null,p)),gr(),pl(c.i,c.u,c.A,c.l,c.R,c.m)}un.prototype.ca=function(c){c=c.target;const p=this.M;p&&qn(c)==3?p.j():this.Y(c)},un.prototype.Y=function(c){try{if(c==this.g)t:{const Oe=qn(this.g);var p=this.g.Ba();const Gi=this.g.Z();if(!(3>Oe)&&(Oe!=3||this.g&&(this.h.h||this.g.oa()||Nc(this.g)))){this.J||Oe!=4||p==7||(p==8||0>=Gi?gr(3):gr(2)),yr(this);var y=this.g.Z();this.X=y;e:if(Sc(this)){var b=Nc(this.g);c="";var L=b.length,G=qn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Qe(this),ci(this);var nt="";break e}this.h.i=new m.TextDecoder}for(p=0;p<L;p++)this.h.h=!0,c+=this.h.i.decode(b[p],{stream:!(G&&p==L-1)});b.length=0,this.h.g+=c,this.C=0,nt=this.h.g}else nt=this.g.oa();if(this.o=y==200,ad(this.i,this.u,this.A,this.l,this.R,Oe,y),this.o){if(this.T&&!this.K){e:{if(this.g){var Ut,xe=this.g;if((Ut=xe.g?xe.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ut(Ut)){var Lt=Ut;break e}}Lt=null}if(y=Lt)pr(this.i,this.l,y,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ss(this,y);else{this.o=!1,this.s=3,oe(12),Qe(this),ci(this);break t}}if(this.P){y=!0;let Ke;for(;!this.J&&this.C<nt.length;)if(Ke=wc(this,nt),Ke==Va){Oe==4&&(this.s=4,oe(14),y=!1),pr(this.i,this.l,null,"[Incomplete Response]");break}else if(Ke==_l){this.s=4,oe(15),pr(this.i,this.l,nt,"[Invalid Chunk]"),y=!1;break}else pr(this.i,this.l,Ke,null),Ss(this,Ke);if(Sc(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Oe!=4||nt.length!=0||this.h.h||(this.s=1,oe(16),y=!1),this.o=this.o&&y,!y)pr(this.i,this.l,nt,"[Invalid Chunked Response]"),Qe(this),ci(this);else if(0<nt.length&&!this.W){this.W=!0;var ke=this.j;ke.g==this&&ke.ba&&!ke.M&&(ke.j.info("Great, no buffering proxy detected. Bytes received: "+nt.length),Ps(ke),ke.M=!0,oe(11))}}else pr(this.i,this.l,nt,null),Ss(this,nt);Oe==4&&Qe(this),this.o&&!this.J&&(Oe==4?Uc(this.j,this):(this.o=!1,bs(this)))}else hd(this.g),y==400&&0<nt.indexOf("Unknown SID")?(this.s=3,oe(12)):(this.s=0,oe(13)),Qe(this),ci(this)}}}catch{}finally{}};function Sc(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function wc(c,p){var y=c.C,b=p.indexOf(`
`,y);return b==-1?Va:(y=Number(p.substring(y,b)),isNaN(y)?_l:(b+=1,b+y>p.length?Va:(p=p.slice(b,b+y),c.C=b+y,p)))}un.prototype.cancel=function(){this.J=!0,Qe(this)};function bs(c){c.S=Date.now()+c.I,Ic(c,c.I)}function Ic(c,p){if(c.B!=null)throw Error("WatchDog timer not null");c.B=Se(S(c.ba,c),p)}function yr(c){c.B&&(m.clearTimeout(c.B),c.B=null)}un.prototype.ba=function(){this.B=null;const c=Date.now();0<=c-this.S?(bc(this.i,this.A),this.L!=2&&(gr(),oe(17)),Qe(this),this.s=2,ci(this)):Ic(this,this.S-c)};function ci(c){c.j.G==0||c.J||Uc(c.j,c)}function Qe(c){yr(c);var p=c.M;p&&typeof p.ma=="function"&&p.ma(),c.M=null,Es(c.U),c.g&&(p=c.g,c.g=null,p.abort(),p.ma())}function Ss(c,p){try{var y=c.j;if(y.G!=0&&(y.g==c||yl(y.h,c))){if(!c.K&&yl(y.h,c)&&y.G==3){try{var b=y.Da.g.parse(p)}catch{b=null}if(Array.isArray(b)&&b.length==3){var L=b;if(L[0]==0){t:if(!y.u){if(y.g)if(y.g.F+3e3<c.F)qa(y),ka(y);else break t;Dl(y),oe(18)}}else y.za=L[1],0<y.za-y.T&&37500>L[2]&&y.F&&y.v==0&&!y.C&&(y.C=Se(S(y.Za,y),6e3));if(1>=Na(y.h)&&y.ca){try{y.ca()}catch{}y.ca=void 0}}else ji(y,11)}else if((c.K||y.g==c)&&qa(y),!ut(p))for(L=y.Da.g.parse(p),p=0;p<L.length;p++){let Lt=L[p];if(y.T=Lt[0],Lt=Lt[1],y.G==2)if(Lt[0]=="c"){y.K=Lt[1],y.ia=Lt[2];const ke=Lt[3];ke!=null&&(y.la=ke,y.j.info("VER="+y.la));const Oe=Lt[4];Oe!=null&&(y.Aa=Oe,y.j.info("SVER="+y.Aa));const Gi=Lt[5];Gi!=null&&typeof Gi=="number"&&0<Gi&&(b=1.5*Gi,y.L=b,y.j.info("backChannelRequestTimeoutMs_="+b)),b=y;const Ke=c.g;if(Ke){const _i=Ke.g?Ke.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(_i){var G=b.h;G.g||_i.indexOf("spdy")==-1&&_i.indexOf("quic")==-1&&_i.indexOf("h2")==-1||(G.j=G.l,G.g=new Set,G.h&&(xa(G,G.h),G.h=null))}if(b.D){const Cl=Ke.g?Ke.g.getResponseHeader("X-HTTP-Session-Id"):null;Cl&&(b.ya=Cl,Zt(b.I,b.D,Cl))}}y.G=3,y.l&&y.l.ua(),y.ba&&(y.R=Date.now()-c.F,y.j.info("Handshake RTT: "+y.R+"ms")),b=y;var nt=c;if(b.qa=Bc(b,b.J?b.ia:null,b.W),nt.K){cn(b.h,nt);var Ut=nt,xe=b.L;xe&&(Ut.I=xe),Ut.B&&(yr(Ut),bs(Ut)),b.g=nt}else Mc(b);0<y.i.length&&za(y)}else Lt[0]!="stop"&&Lt[0]!="close"||ji(y,7);else y.G==3&&(Lt[0]=="stop"||Lt[0]=="close"?Lt[0]=="stop"?ji(y,7):Il(y):Lt[0]!="noop"&&y.l&&y.l.ta(Lt),y.v=0)}}gr(4)}catch{}}var Rc=class{constructor(c,p){this.g=c,this.map=p}};function Li(c){this.l=c||10,m.PerformanceNavigationTiming?(c=m.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(m.chrome&&m.chrome.loadTimes&&m.chrome.loadTimes()&&m.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Ca(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function Na(c){return c.h?1:c.g?c.g.size:0}function yl(c,p){return c.h?c.h==p:c.g?c.g.has(p):!1}function xa(c,p){c.g?c.g.add(p):c.h=p}function cn(c,p){c.h&&c.h==p?c.h=null:c.g&&c.g.has(p)&&c.g.delete(p)}Li.prototype.cancel=function(){if(this.i=vl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function vl(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let p=c.i;for(const y of c.g.values())p=p.concat(y.D);return p}return Z(c.i)}function od(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(g(c)){for(var p=[],y=c.length,b=0;b<y;b++)p.push(c[b]);return p}p=[],y=0;for(b in c)p[y++]=c[b];return p}function Oa(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(g(c)||typeof c=="string"){var p=[];c=c.length;for(var y=0;y<c;y++)p.push(y);return p}p=[],y=0;for(const b in c)p[y++]=b;return p}}}function El(c,p){if(c.forEach&&typeof c.forEach=="function")c.forEach(p,void 0);else if(g(c)||typeof c=="string")Array.prototype.forEach.call(c,p,void 0);else for(var y=Oa(c),b=od(c),L=b.length,G=0;G<L;G++)p.call(void 0,b[G],y&&y[G],c)}var ws=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ld(c,p){if(c){c=c.split("&");for(var y=0;y<c.length;y++){var b=c[y].indexOf("="),L=null;if(0<=b){var G=c[y].substring(0,b);L=c[y].substring(b+1)}else G=c[y];p(G,L?decodeURIComponent(L.replace(/\+/g," ")):"")}}}function we(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof we){this.h=c.h,Is(this,c.j),this.o=c.o,this.g=c.g,vr(this,c.s),this.l=c.l;var p=c.i,y=new ki;y.i=p.i,p.g&&(y.g=new Map(p.g),y.h=p.h),Bi(this,y),this.m=c.m}else c&&(p=String(c).match(ws))?(this.h=!1,Is(this,p[1]||"",!0),this.o=Bn(p[2]||""),this.g=Bn(p[3]||"",!0),vr(this,p[4]),this.l=Bn(p[5]||"",!0),Bi(this,p[6]||"",!0),this.m=Bn(p[7]||"")):(this.h=!1,this.i=new ki(null,this.h))}we.prototype.toString=function(){var c=[],p=this.j;p&&c.push(Ds(p,Tl,!0),":");var y=this.g;return(y||p=="file")&&(c.push("//"),(p=this.o)&&c.push(Ds(p,Tl,!0),"@"),c.push(encodeURIComponent(String(y)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),y=this.s,y!=null&&c.push(":",String(y))),(y=this.l)&&(this.g&&y.charAt(0)!="/"&&c.push("/"),c.push(Ds(y,y.charAt(0)=="/"?ud:Al,!0))),(y=this.i.toString())&&c.push("?",y),(y=this.m)&&c.push("#",Ds(y,Ma)),c.join("")};function wn(c){return new we(c)}function Is(c,p,y){c.j=y?Bn(p,!0):p,c.j&&(c.j=c.j.replace(/:$/,""))}function vr(c,p){if(p){if(p=Number(p),isNaN(p)||0>p)throw Error("Bad port number "+p);c.s=p}else c.s=null}function Bi(c,p,y){p instanceof ki?(c.i=p,Vc(c.i,c.h)):(y||(p=Ds(p,cd)),c.i=new ki(p,c.h))}function Zt(c,p,y){c.i.set(p,y)}function Rs(c){return Zt(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function Bn(c,p){return c?p?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function Ds(c,p,y){return typeof c=="string"?(c=encodeURI(c).replace(p,Dc),y&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function Dc(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var Tl=/[#\/\?@]/g,Al=/[#\?:]/g,ud=/[#\?]/g,cd=/[#\?@]/g,Ma=/#/g;function ki(c,p){this.h=this.g=null,this.i=c||null,this.j=!!p}function kn(c){c.g||(c.g=new Map,c.h=0,c.i&&ld(c.i,function(p,y){c.add(decodeURIComponent(p.replace(/\+/g," ")),y)}))}s=ki.prototype,s.add=function(c,p){kn(this),this.i=null,c=hi(this,c);var y=this.g.get(c);return y||this.g.set(c,y=[]),y.push(p),this.h+=1,this};function zi(c,p){kn(c),p=hi(c,p),c.g.has(p)&&(c.i=null,c.h-=c.g.get(p).length,c.g.delete(p))}function qi(c,p){return kn(c),p=hi(c,p),c.g.has(p)}s.forEach=function(c,p){kn(this),this.g.forEach(function(y,b){y.forEach(function(L){c.call(p,L,b,this)},this)},this)},s.na=function(){kn(this);const c=Array.from(this.g.values()),p=Array.from(this.g.keys()),y=[];for(let b=0;b<p.length;b++){const L=c[b];for(let G=0;G<L.length;G++)y.push(p[b])}return y},s.V=function(c){kn(this);let p=[];if(typeof c=="string")qi(this,c)&&(p=p.concat(this.g.get(hi(this,c))));else{c=Array.from(this.g.values());for(let y=0;y<c.length;y++)p=p.concat(c[y])}return p},s.set=function(c,p){return kn(this),this.i=null,c=hi(this,c),qi(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[p]),this.h+=1,this},s.get=function(c,p){return c?(c=this.V(c),0<c.length?String(c[0]):p):p};function bl(c,p,y){zi(c,p),0<y.length&&(c.i=null,c.g.set(hi(c,p),Z(y)),c.h+=y.length)}s.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],p=Array.from(this.g.keys());for(var y=0;y<p.length;y++){var b=p[y];const G=encodeURIComponent(String(b)),nt=this.V(b);for(b=0;b<nt.length;b++){var L=G;nt[b]!==""&&(L+="="+encodeURIComponent(String(nt[b]))),c.push(L)}}return this.i=c.join("&")};function hi(c,p){return p=String(p),c.j&&(p=p.toLowerCase()),p}function Vc(c,p){p&&!c.j&&(kn(c),c.i=null,c.g.forEach(function(y,b){var L=b.toLowerCase();b!=L&&(zi(this,b),bl(this,L,y))},c)),c.j=p}function Vs(c,p){const y=new Ln;if(m.Image){const b=new Image;b.onload=O(zn,y,"TestLoadImage: loaded",!0,p,b),b.onerror=O(zn,y,"TestLoadImage: error",!1,p,b),b.onabort=O(zn,y,"TestLoadImage: abort",!1,p,b),b.ontimeout=O(zn,y,"TestLoadImage: timeout",!1,p,b),m.setTimeout(function(){b.ontimeout&&b.ontimeout()},1e4),b.src=c}else p(!1)}function Wn(c,p){const y=new Ln,b=new AbortController,L=setTimeout(()=>{b.abort(),zn(y,"TestPingServer: timeout",!1,p)},1e4);fetch(c,{signal:b.signal}).then(G=>{clearTimeout(L),G.ok?zn(y,"TestPingServer: ok",!0,p):zn(y,"TestPingServer: server error",!1,p)}).catch(()=>{clearTimeout(L),zn(y,"TestPingServer: error",!1,p)})}function zn(c,p,y,b,L){try{L&&(L.onload=null,L.onerror=null,L.onabort=null,L.ontimeout=null),b(y)}catch{}}function Cs(){this.g=new Ts}function fi(c,p,y){const b=y||"";try{El(c,function(L,G){let nt=L;_(L)&&(nt=Zn(L)),p.push(b+G+"="+encodeURIComponent(nt))})}catch(L){throw p.push(b+"type="+encodeURIComponent("_badmap")),L}}function Er(c){this.l=c.Ub||null,this.j=c.eb||!1}H(Er,hl),Er.prototype.g=function(){return new Fi(this.l,this.j)},Er.prototype.i=(function(c){return function(){return c}})({});function Fi(c,p){me.call(this),this.D=c,this.o=p,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}H(Fi,me),s=Fi.prototype,s.open=function(c,p){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=p,this.readyState=1,mi(this)},s.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const p={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(p.body=c),(this.D||m).fetch(new Request(this.A,p)).then(this.Sa.bind(this),this.ga.bind(this))},s.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,di(this)),this.readyState=0},s.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,mi(this)),this.g&&(this.readyState=3,mi(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof m.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Sl(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function Sl(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}s.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var p=c.value?c.value:new Uint8Array(0);(p=this.v.decode(p,{stream:!c.done}))&&(this.response=this.responseText+=p)}c.done?di(this):mi(this),this.readyState==3&&Sl(this)}},s.Ra=function(c){this.g&&(this.response=this.responseText=c,di(this))},s.Qa=function(c){this.g&&(this.response=c,di(this))},s.ga=function(){this.g&&di(this)};function di(c){c.readyState=4,c.l=null,c.j=null,c.v=null,mi(c)}s.setRequestHeader=function(c,p){this.u.append(c,p)},s.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},s.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],p=this.h.entries();for(var y=p.next();!y.done;)y=y.value,c.push(y[0]+": "+y[1]),y=p.next();return c.join(`\r
`)};function mi(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Fi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function wl(c){let p="";return Tt(c,function(y,b){p+=b,p+=":",p+=y,p+=`\r
`}),p}function Be(c,p,y){t:{for(b in y){var b=!1;break t}b=!0}b||(y=wl(y),typeof c=="string"?y!=null&&encodeURIComponent(String(y)):Zt(c,p,y))}function Gt(c){me.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}H(Gt,me);var Pa=/^https?$/i,Ns=["POST","PUT"];s=Gt.prototype,s.Ha=function(c){this.J=c},s.ea=function(c,p,y,b){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);p=p?p.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():li.g(),this.v=this.o?fl(this.o):fl(li),this.g.onreadystatechange=S(this.Ea,this);try{this.B=!0,this.g.open(p,String(c),!0),this.B=!1}catch(G){Cc(this,G);return}if(c=y||"",y=new Map(this.headers),b)if(Object.getPrototypeOf(b)===Object.prototype)for(var L in b)y.set(L,b[L]);else if(typeof b.keys=="function"&&typeof b.get=="function")for(const G of b.keys())y.set(G,b.get(G));else throw Error("Unknown input type for opt_headers: "+String(b));b=Array.from(y.keys()).find(G=>G.toLowerCase()=="content-type"),L=m.FormData&&c instanceof m.FormData,!(0<=Array.prototype.indexOf.call(Ns,p,void 0))||b||L||y.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[G,nt]of y)this.g.setRequestHeader(G,nt);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{xs(this),this.u=!0,this.g.send(c),this.u=!1}catch(G){Cc(this,G)}};function Cc(c,p){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=p,c.m=5,Ua(c),gi(c)}function Ua(c){c.A||(c.A=!0,Qt(c,"complete"),Qt(c,"error"))}s.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,Qt(this,"complete"),Qt(this,"abort"),gi(this))},s.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),gi(this,!0)),Gt.aa.N.call(this)},s.Ea=function(){this.s||(this.B||this.u||this.j?La(this):this.bb())},s.bb=function(){La(this)};function La(c){if(c.h&&typeof h<"u"&&(!c.v[1]||qn(c)!=4||c.Z()!=2)){if(c.u&&qn(c)==4)tn(c.Ea,0,c);else if(Qt(c,"readystatechange"),qn(c)==4){c.h=!1;try{const nt=c.Z();t:switch(nt){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var p=!0;break t;default:p=!1}var y;if(!(y=p)){var b;if(b=nt===0){var L=String(c.D).match(ws)[1]||null;!L&&m.self&&m.self.location&&(L=m.self.location.protocol.slice(0,-1)),b=!Pa.test(L?L.toLowerCase():"")}y=b}if(y)Qt(c,"complete"),Qt(c,"success");else{c.m=6;try{var G=2<qn(c)?c.g.statusText:""}catch{G=""}c.l=G+" ["+c.Z()+"]",Ua(c)}}finally{gi(c)}}}}function gi(c,p){if(c.g){xs(c);const y=c.g,b=c.v[0]?()=>{}:null;c.g=null,c.v=null,p||Qt(c,"ready");try{y.onreadystatechange=b}catch{}}}function xs(c){c.I&&(m.clearTimeout(c.I),c.I=null)}s.isActive=function(){return!!this.g};function qn(c){return c.g?c.g.readyState:0}s.Z=function(){try{return 2<qn(this)?this.g.status:-1}catch{return-1}},s.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},s.Oa=function(c){if(this.g){var p=this.g.responseText;return c&&p.indexOf(c)==0&&(p=p.substring(c.length)),Ra(p)}};function Nc(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function hd(c){const p={};c=(c.g&&2<=qn(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let b=0;b<c.length;b++){if(ut(c[b]))continue;var y=M(c[b]);const L=y[0];if(y=y[1],typeof y!="string")continue;y=y.trim();const G=p[L]||[];p[L]=G,G.push(y)}N(p,function(b){return b.join(", ")})}s.Ba=function(){return this.m},s.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Os(c,p,y){return y&&y.internalChannelParams&&y.internalChannelParams[c]||p}function Ba(c){this.Aa=0,this.i=[],this.j=new Ln,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Os("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Os("baseRetryDelayMs",5e3,c),this.cb=Os("retryDelaySeedMs",1e4,c),this.Wa=Os("forwardChannelMaxRetries",2,c),this.wa=Os("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new Li(c&&c.concurrentRequestLimit),this.Da=new Cs,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}s=Ba.prototype,s.la=8,s.G=1,s.connect=function(c,p,y,b){oe(0),this.W=c,this.H=p||{},y&&b!==void 0&&(this.H.OSID=y,this.H.OAID=b),this.F=this.X,this.I=Bc(this,null,this.W),za(this)};function Il(c){if(xc(c),c.G==3){var p=c.U++,y=wn(c.I);if(Zt(y,"SID",c.K),Zt(y,"RID",p),Zt(y,"TYPE","terminate"),Ms(c,y),p=new un(c,c.j,p),p.L=2,p.v=Rs(wn(y)),y=!1,m.navigator&&m.navigator.sendBeacon)try{y=m.navigator.sendBeacon(p.v.toString(),"")}catch{}!y&&m.Image&&(new Image().src=p.v,y=!0),y||(p.g=kc(p.j,null),p.g.ea(p.v)),p.F=Date.now(),bs(p)}Lc(c)}function ka(c){c.g&&(Ps(c),c.g.cancel(),c.g=null)}function xc(c){ka(c),c.u&&(m.clearTimeout(c.u),c.u=null),qa(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&m.clearTimeout(c.s),c.s=null)}function za(c){if(!Ca(c.h)&&!c.s){c.s=!0;var p=c.Ga;st||V(),pt||(st(),pt=!0),Ft.add(p,c),c.B=0}}function fd(c,p){return Na(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=p.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=Se(S(c.Ga,c,p),Vl(c,c.B)),c.B++,!0)}s.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;const L=new un(this,this.j,c);let G=this.o;if(this.S&&(G?(G=w(G),x(G,this.S)):G=this.S),this.m!==null||this.O||(L.H=G,G=null),this.P)t:{for(var p=0,y=0;y<this.i.length;y++){e:{var b=this.i[y];if("__data__"in b.map&&(b=b.map.__data__,typeof b=="string")){b=b.length;break e}b=void 0}if(b===void 0)break;if(p+=b,4096<p){p=y;break t}if(p===4096||y===this.i.length-1){p=y+1;break t}}p=1e3}else p=1e3;p=Oc(this,L,p),y=wn(this.I),Zt(y,"RID",c),Zt(y,"CVER",22),this.D&&Zt(y,"X-HTTP-Session-Id",this.D),Ms(this,y),G&&(this.O?p="headers="+encodeURIComponent(String(wl(G)))+"&"+p:this.m&&Be(y,this.m,G)),xa(this.h,L),this.Ua&&Zt(y,"TYPE","init"),this.P?(Zt(y,"$req",p),Zt(y,"SID","null"),L.T=!0,Jn(L,y,null)):Jn(L,y,p),this.G=2}}else this.G==3&&(c?Rl(this,c):this.i.length==0||Ca(this.h)||Rl(this))};function Rl(c,p){var y;p?y=p.l:y=c.U++;const b=wn(c.I);Zt(b,"SID",c.K),Zt(b,"RID",y),Zt(b,"AID",c.T),Ms(c,b),c.m&&c.o&&Be(b,c.m,c.o),y=new un(c,c.j,y,c.B+1),c.m===null&&(y.H=c.o),p&&(c.i=p.D.concat(c.i)),p=Oc(c,y,1e3),y.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),xa(c.h,y),Jn(y,b,p)}function Ms(c,p){c.H&&Tt(c.H,function(y,b){Zt(p,b,y)}),c.l&&El({},function(y,b){Zt(p,b,y)})}function Oc(c,p,y){y=Math.min(c.i.length,y);var b=c.l?S(c.l.Na,c.l,c):null;t:{var L=c.i;let G=-1;for(;;){const nt=["count="+y];G==-1?0<y?(G=L[0].g,nt.push("ofs="+G)):G=0:nt.push("ofs="+G);let Ut=!0;for(let xe=0;xe<y;xe++){let Lt=L[xe].g;const ke=L[xe].map;if(Lt-=G,0>Lt)G=Math.max(0,L[xe].g-100),Ut=!1;else try{fi(ke,nt,"req"+Lt+"_")}catch{b&&b(ke)}}if(Ut){b=nt.join("&");break t}}}return c=c.i.splice(0,y),p.D=c,b}function Mc(c){if(!c.g&&!c.u){c.Y=1;var p=c.Fa;st||V(),pt||(st(),pt=!0),Ft.add(p,c),c.v=0}}function Dl(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=Se(S(c.Fa,c),Vl(c,c.v)),c.v++,!0)}s.Fa=function(){if(this.u=null,Pc(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=Se(S(this.ab,this),c)}},s.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,oe(10),ka(this),Pc(this))};function Ps(c){c.A!=null&&(m.clearTimeout(c.A),c.A=null)}function Pc(c){c.g=new un(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var p=wn(c.qa);Zt(p,"RID","rpc"),Zt(p,"SID",c.K),Zt(p,"AID",c.T),Zt(p,"CI",c.F?"0":"1"),!c.F&&c.ja&&Zt(p,"TO",c.ja),Zt(p,"TYPE","xmlhttp"),Ms(c,p),c.m&&c.o&&Be(p,c.m,c.o),c.L&&(c.g.I=c.L);var y=c.g;c=c.ia,y.L=1,y.v=Rs(wn(p)),y.m=null,y.P=!0,Ui(y,c)}s.Za=function(){this.C!=null&&(this.C=null,ka(this),Dl(this),oe(19))};function qa(c){c.C!=null&&(m.clearTimeout(c.C),c.C=null)}function Uc(c,p){var y=null;if(c.g==p){qa(c),Ps(c),c.g=null;var b=2}else if(yl(c.h,p))y=p.D,cn(c.h,p),b=1;else return;if(c.G!=0){if(p.o)if(b==1){y=p.m?p.m.length:0,p=Date.now()-p.F;var L=c.B;b=mr(),Qt(b,new Ne(b,y)),za(c)}else Mc(c);else if(L=p.s,L==3||L==0&&0<p.X||!(b==1&&fd(c,p)||b==2&&Dl(c)))switch(y&&0<y.length&&(p=c.h,p.i=p.i.concat(y)),L){case 1:ji(c,5);break;case 4:ji(c,10);break;case 3:ji(c,6);break;default:ji(c,2)}}}function Vl(c,p){let y=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(y*=2),y*p}function ji(c,p){if(c.j.info("Error code "+p),p==2){var y=S(c.fb,c),b=c.Xa;const L=!b;b=new we(b||"//www.google.com/images/cleardot.gif"),m.location&&m.location.protocol=="http"||Is(b,"https"),Rs(b),L?Vs(b.toString(),y):Wn(b.toString(),y)}else oe(2);c.G=0,c.l&&c.l.sa(p),Lc(c),xc(c)}s.fb=function(c){c?(this.j.info("Successfully pinged google.com"),oe(2)):(this.j.info("Failed to ping google.com"),oe(1))};function Lc(c){if(c.G=0,c.ka=[],c.l){const p=vl(c.h);(p.length!=0||c.i.length!=0)&&(Y(c.ka,p),Y(c.ka,c.i),c.h.i.length=0,Z(c.i),c.i.length=0),c.l.ra()}}function Bc(c,p,y){var b=y instanceof we?wn(y):new we(y);if(b.g!="")p&&(b.g=p+"."+b.g),vr(b,b.s);else{var L=m.location;b=L.protocol,p=p?p+"."+L.hostname:L.hostname,L=+L.port;var G=new we(null);b&&Is(G,b),p&&(G.g=p),L&&vr(G,L),y&&(G.l=y),b=G}return y=c.D,p=c.ya,y&&p&&Zt(b,y,p),Zt(b,"VER",c.la),Ms(c,b),b}function kc(c,p,y){if(p&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return p=c.Ca&&!c.pa?new Gt(new Er({eb:y})):new Gt(c.pa),p.Ha(c.J),p}s.isActive=function(){return!!this.l&&this.l.isActive(this)};function zc(){}s=zc.prototype,s.ua=function(){},s.ta=function(){},s.sa=function(){},s.ra=function(){},s.isActive=function(){return!0},s.Na=function(){};function Fa(){}Fa.prototype.g=function(c,p){return new hn(c,p)};function hn(c,p){me.call(this),this.g=new Ba(p),this.l=c,this.h=p&&p.messageUrlParams||null,c=p&&p.messageHeaders||null,p&&p.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=p&&p.initMessageHeaders||null,p&&p.messageContentType&&(c?c["X-WebChannel-Content-Type"]=p.messageContentType:c={"X-WebChannel-Content-Type":p.messageContentType}),p&&p.va&&(c?c["X-WebChannel-Client-Profile"]=p.va:c={"X-WebChannel-Client-Profile":p.va}),this.g.S=c,(c=p&&p.Sb)&&!ut(c)&&(this.g.m=c),this.v=p&&p.supportsCrossDomainXhr||!1,this.u=p&&p.sendRawJson||!1,(p=p&&p.httpSessionIdParam)&&!ut(p)&&(this.g.D=p,c=this.h,c!==null&&p in c&&(c=this.h,p in c&&delete c[p])),this.j=new pi(this)}H(hn,me),hn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},hn.prototype.close=function(){Il(this.g)},hn.prototype.o=function(c){var p=this.g;if(typeof c=="string"){var y={};y.__data__=c,c=y}else this.u&&(y={},y.__data__=Zn(c),c=y);p.i.push(new Rc(p.Ya++,c)),p.G==3&&za(p)},hn.prototype.N=function(){this.g.l=null,delete this.j,Il(this.g),delete this.g,hn.aa.N.call(this)};function qc(c){Mi.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var p=c.__sm__;if(p){t:{for(const y in p){c=y;break t}c=void 0}(this.i=c)&&(c=this.i,p=p!==null&&c in p?p[c]:void 0),this.data=p}else this.data=c}H(qc,Mi);function Fc(){ml.call(this),this.status=1}H(Fc,ml);function pi(c){this.g=c}H(pi,zc),pi.prototype.ua=function(){Qt(this.g,"a")},pi.prototype.ta=function(c){Qt(this.g,new qc(c))},pi.prototype.sa=function(c){Qt(this.g,new Fc)},pi.prototype.ra=function(){Qt(this.g,"b")},Fa.prototype.createWebChannel=Fa.prototype.g,hn.prototype.send=hn.prototype.o,hn.prototype.open=hn.prototype.m,hn.prototype.close=hn.prototype.close,sA=function(){return new Fa},rA=function(){return mr()},iA=oi,Rg={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},_r.NO_ERROR=0,_r.TIMEOUT=8,_r.HTTP_ERROR=6,$h=_r,Pi.COMPLETE="complete",nA=Pi,dl.EventType=Oi,Oi.OPEN="a",Oi.CLOSE="b",Oi.ERROR="c",Oi.MESSAGE="d",me.prototype.listen=me.prototype.K,bu=dl,Gt.prototype.listenOnce=Gt.prototype.L,Gt.prototype.getLastError=Gt.prototype.Ka,Gt.prototype.getLastErrorCode=Gt.prototype.Ba,Gt.prototype.getStatus=Gt.prototype.Z,Gt.prototype.getResponseJson=Gt.prototype.Oa,Gt.prototype.getResponseText=Gt.prototype.oa,Gt.prototype.send=Gt.prototype.ea,Gt.prototype.setWithCredentials=Gt.prototype.Ha,eA=Gt}).apply(typeof jh<"u"?jh:typeof self<"u"?self:typeof window<"u"?window:{});const iT="@firebase/firestore",rT="4.9.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ge{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}Ge.UNAUTHENTICATED=new Ge(null),Ge.GOOGLE_CREDENTIALS=new Ge("google-credentials-uid"),Ge.FIRST_PARTY=new Ge("first-party-uid"),Ge.MOCK_USER=new Ge("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let tl="12.2.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const es=new lp("@firebase/firestore");function So(){return es.logLevel}function mR(s){es.setLogLevel(s)}function tt(s,...t){if(es.logLevel<=Pt.DEBUG){const e=t.map(mp);es.debug(`Firestore (${tl}): ${s}`,...e)}}function Te(s,...t){if(es.logLevel<=Pt.ERROR){const e=t.map(mp);es.error(`Firestore (${tl}): ${s}`,...e)}}function Ci(s,...t){if(es.logLevel<=Pt.WARN){const e=t.map(mp);es.warn(`Firestore (${tl}): ${s}`,...e)}}function mp(s){if(typeof s=="string")return s;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(e){return JSON.stringify(e)})(s)}catch{return s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lt(s,t,e){let r="Unexpected state";typeof t=="string"?r=t:e=t,aA(s,r,e)}function aA(s,t,e){let r=`FIRESTORE (${tl}) INTERNAL ASSERTION FAILED: ${t} (ID: ${s.toString(16)})`;if(e!==void 0)try{r+=" CONTEXT: "+JSON.stringify(e)}catch{r+=" CONTEXT: "+e}throw Te(r),new Error(r)}function ht(s,t,e,r){let o="Unexpected state";typeof e=="string"?o=e:r=e,s||aA(t,o,r)}function gR(s,t){s||lt(57014,t)}function at(s,t){return s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class J extends Ea{constructor(t,e){super(t,e),this.code=t,this.message=e,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class We{constructor(){this.promise=new Promise(((t,e)=>{this.resolve=t,this.reject=e}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oA{constructor(t,e){this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class pR{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable((()=>e(Ge.UNAUTHENTICATED)))}shutdown(){}}class _R{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,e){this.changeListener=e,t.enqueueRetryable((()=>e(this.token.user)))}shutdown(){this.changeListener=null}}class yR{constructor(t){this.t=t,this.currentUser=Ge.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){ht(this.o===void 0,42304);let r=this.i;const o=g=>this.i!==r?(r=this.i,e(g)):Promise.resolve();let u=new We;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new We,t.enqueueRetryable((()=>o(this.currentUser)))};const h=()=>{const g=u;t.enqueueRetryable((async()=>{await g.promise,await o(this.currentUser)}))},m=g=>{tt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),h())};this.t.onInit((g=>m(g))),setTimeout((()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?m(g):(tt("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new We)}}),0),h()}getToken(){const t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then((r=>this.i!==t?(tt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ht(typeof r.accessToken=="string",31837,{l:r}),new oA(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return ht(t===null||typeof t=="string",2055,{h:t}),new Ge(t)}}class vR{constructor(t,e,r){this.P=t,this.T=e,this.I=r,this.type="FirstParty",this.user=Ge.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class ER{constructor(t,e,r){this.P=t,this.T=e,this.I=r}getToken(){return Promise.resolve(new vR(this.P,this.T,this.I))}start(t,e){t.enqueueRetryable((()=>e(Ge.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class sT{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class TR{constructor(t,e){this.V=e,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,K0(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,e){ht(this.o===void 0,3512);const r=u=>{u.error!=null&&tt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const h=u.token!==this.m;return this.m=u.token,tt("FirebaseAppCheckTokenProvider",`Received ${h?"new":"existing"} token.`),h?e(u.token):Promise.resolve()};this.o=u=>{t.enqueueRetryable((()=>r(u)))};const o=u=>{tt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((u=>o(u))),setTimeout((()=>{if(!this.appCheck){const u=this.V.getImmediate({optional:!0});u?o(u):tt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new sT(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((e=>e?(ht(typeof e.token=="string",44558,{tokenResult:e}),this.m=e.token,new sT(e.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AR(s){const t=typeof self<"u"&&(self.crypto||self.msCrypto),e=new Uint8Array(s);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(e);else for(let r=0;r<s;r++)e[r]=Math.floor(256*Math.random());return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gp{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const o=AR(40);for(let u=0;u<o.length;++u)r.length<20&&o[u]<e&&(r+=t.charAt(o[u]%62))}return r}}function bt(s,t){return s<t?-1:s>t?1:0}function Dg(s,t){const e=Math.min(s.length,t.length);for(let r=0;r<e;r++){const o=s.charAt(r),u=t.charAt(r);if(o!==u)return mg(o)===mg(u)?bt(o,u):mg(o)?1:-1}return bt(s.length,t.length)}const bR=55296,SR=57343;function mg(s){const t=s.charCodeAt(0);return t>=bR&&t<=SR}function Po(s,t,e){return s.length===t.length&&s.every(((r,o)=>e(r,t[o])))}function lA(s){return s+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aT="__name__";class bi{constructor(t,e,r){e===void 0?e=0:e>t.length&&lt(637,{offset:e,range:t.length}),r===void 0?r=t.length-e:r>t.length-e&&lt(1746,{length:r,range:t.length-e}),this.segments=t,this.offset=e,this.len=r}get length(){return this.len}isEqual(t){return bi.comparator(this,t)===0}child(t){const e=this.segments.slice(this.offset,this.limit());return t instanceof bi?t.forEach((r=>{e.push(r)})):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,r=this.limit();e<r;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){const r=Math.min(t.length,e.length);for(let o=0;o<r;o++){const u=bi.compareSegments(t.get(o),e.get(o));if(u!==0)return u}return bt(t.length,e.length)}static compareSegments(t,e){const r=bi.isNumericId(t),o=bi.isNumericId(e);return r&&!o?-1:!r&&o?1:r&&o?bi.extractNumericId(t).compare(bi.extractNumericId(e)):Dg(t,e)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return $r.fromString(t.substring(4,t.length-2))}}class Ot extends bi{construct(t,e,r){return new Ot(t,e,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const e=[];for(const r of t){if(r.indexOf("//")>=0)throw new J(j.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);e.push(...r.split("/").filter((o=>o.length>0)))}return new Ot(e)}static emptyPath(){return new Ot([])}}const wR=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ce extends bi{construct(t,e,r){return new ce(t,e,r)}static isValidIdentifier(t){return wR.test(t)}canonicalString(){return this.toArray().map((t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ce.isValidIdentifier(t)||(t="`"+t+"`"),t))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===aT}static keyField(){return new ce([aT])}static fromServerFormat(t){const e=[];let r="",o=0;const u=()=>{if(r.length===0)throw new J(j.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);e.push(r),r=""};let h=!1;for(;o<t.length;){const m=t[o];if(m==="\\"){if(o+1===t.length)throw new J(j.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const g=t[o+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new J(j.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=g,o+=2}else m==="`"?(h=!h,o++):m!=="."||h?(r+=m,o++):(u(),o++)}if(u(),h)throw new J(j.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new ce(e)}static emptyPath(){return new ce([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rt{constructor(t){this.path=t}static fromPath(t){return new rt(Ot.fromString(t))}static fromName(t){return new rt(Ot.fromString(t).popFirst(5))}static empty(){return new rt(Ot.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&Ot.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,e){return Ot.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new rt(new Ot(t.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pp(s,t,e){if(!e)throw new J(j.INVALID_ARGUMENT,`Function ${s}() cannot be called with an empty ${t}.`)}function uA(s,t,e,r){if(t===!0&&r===!0)throw new J(j.INVALID_ARGUMENT,`${s} and ${e} cannot be used together.`)}function oT(s){if(!rt.isDocumentKey(s))throw new J(j.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${s} has ${s.length}.`)}function lT(s){if(rt.isDocumentKey(s))throw new J(j.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${s} has ${s.length}.`)}function cA(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}function Nf(s){if(s===void 0)return"undefined";if(s===null)return"null";if(typeof s=="string")return s.length>20&&(s=`${s.substring(0,20)}...`),JSON.stringify(s);if(typeof s=="number"||typeof s=="boolean")return""+s;if(typeof s=="object"){if(s instanceof Array)return"an array";{const t=(function(r){return r.constructor?r.constructor.name:null})(s);return t?`a custom ${t} object`:"an object"}}return typeof s=="function"?"a function":lt(12329,{type:typeof s})}function qt(s,t){if("_delegate"in s&&(s=s._delegate),!(s instanceof t)){if(t.name===s.constructor.name)throw new J(j.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const e=Nf(s);throw new J(j.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${e}`)}}return s}function hA(s,t){if(t<=0)throw new J(j.INVALID_ARGUMENT,`Function ${s}() requires a positive number, but it was: ${t}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ve(s,t){const e={typeString:s};return t&&(e.value=t),e}function rc(s,t){if(!cA(s))throw new J(j.INVALID_ARGUMENT,"JSON must be an object");let e;for(const r in t)if(t[r]){const o=t[r].typeString,u="value"in t[r]?{value:t[r].value}:void 0;if(!(r in s)){e=`JSON missing required field: '${r}'`;break}const h=s[r];if(o&&typeof h!==o){e=`JSON field '${r}' must be a ${o}.`;break}if(u!==void 0&&h!==u.value){e=`Expected '${r}' field to equal '${u.value}'`;break}}if(e)throw new J(j.INVALID_ARGUMENT,e);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uT=-62135596800,cT=1e6;class Ht{static now(){return Ht.fromMillis(Date.now())}static fromDate(t){return Ht.fromMillis(t.getTime())}static fromMillis(t){const e=Math.floor(t/1e3),r=Math.floor((t-1e3*e)*cT);return new Ht(e,r)}constructor(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new J(j.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new J(j.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<uT)throw new J(j.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new J(j.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/cT}_compareTo(t){return this.seconds===t.seconds?bt(this.nanoseconds,t.nanoseconds):bt(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Ht._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(rc(t,Ht._jsonSchema))return new Ht(t.seconds,t.nanoseconds)}valueOf(){const t=this.seconds-uT;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Ht._jsonSchemaVersion="firestore/timestamp/1.0",Ht._jsonSchema={type:Ve("string",Ht._jsonSchemaVersion),seconds:Ve("number"),nanoseconds:Ve("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dt{static fromTimestamp(t){return new dt(t)}static min(){return new dt(new Ht(0,0))}static max(){return new dt(new Ht(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uo=-1;class df{constructor(t,e,r,o){this.indexId=t,this.collectionGroup=e,this.fields=r,this.indexState=o}}function Vg(s){return s.fields.find((t=>t.kind===2))}function Ws(s){return s.fields.filter((t=>t.kind!==2))}df.UNKNOWN_ID=-1;class Zh{constructor(t,e){this.fieldPath=t,this.kind=e}}class qu{constructor(t,e){this.sequenceNumber=t,this.offset=e}static empty(){return new qu(0,Pn.min())}}function fA(s,t){const e=s.toTimestamp().seconds,r=s.toTimestamp().nanoseconds+1,o=dt.fromTimestamp(r===1e9?new Ht(e+1,0):new Ht(e,r));return new Pn(o,rt.empty(),t)}function dA(s){return new Pn(s.readTime,s.key,Uo)}class Pn{constructor(t,e,r){this.readTime=t,this.documentKey=e,this.largestBatchId=r}static min(){return new Pn(dt.min(),rt.empty(),Uo)}static max(){return new Pn(dt.max(),rt.empty(),Uo)}}function _p(s,t){let e=s.readTime.compareTo(t.readTime);return e!==0?e:(e=rt.comparator(s.documentKey,t.documentKey),e!==0?e:bt(s.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mA="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class gA{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((t=>t()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function us(s){if(s.code!==j.FAILED_PRECONDITION||s.message!==mA)throw s;tt("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)}),(e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)}))}catch(t){return this.next(void 0,t)}next(t,e){return this.callbackAttached&&lt(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new B(((r,o)=>{this.nextCallback=u=>{this.wrapSuccess(t,u).next(r,o)},this.catchCallback=u=>{this.wrapFailure(e,u).next(r,o)}}))}toPromise(){return new Promise(((t,e)=>{this.next(t,e)}))}wrapUserFunction(t){try{const e=t();return e instanceof B?e:B.resolve(e)}catch(e){return B.reject(e)}}wrapSuccess(t,e){return t?this.wrapUserFunction((()=>t(e))):B.resolve(e)}wrapFailure(t,e){return t?this.wrapUserFunction((()=>t(e))):B.reject(e)}static resolve(t){return new B(((e,r)=>{e(t)}))}static reject(t){return new B(((e,r)=>{r(t)}))}static waitFor(t){return new B(((e,r)=>{let o=0,u=0,h=!1;t.forEach((m=>{++o,m.next((()=>{++u,h&&u===o&&e()}),(g=>r(g)))})),h=!0,u===o&&e()}))}static or(t){let e=B.resolve(!1);for(const r of t)e=e.next((o=>o?B.resolve(o):r()));return e}static forEach(t,e){const r=[];return t.forEach(((o,u)=>{r.push(e.call(this,o,u))})),this.waitFor(r)}static mapArray(t,e){return new B(((r,o)=>{const u=t.length,h=new Array(u);let m=0;for(let g=0;g<u;g++){const _=g;e(t[_]).next((E=>{h[_]=E,++m,m===u&&r(h)}),(E=>o(E)))}}))}static doWhile(t,e){return new B(((r,o)=>{const u=()=>{t()===!0?e().next((()=>{u()}),o):r()};u()}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const On="SimpleDb";class xf{static open(t,e,r,o){try{return new xf(e,t.transaction(o,r))}catch(u){throw new Vu(e,u)}}constructor(t,e){this.action=t,this.transaction=e,this.aborted=!1,this.S=new We,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{e.error?this.S.reject(new Vu(t,e.error)):this.S.resolve()},this.transaction.onerror=r=>{const o=yp(r.target.error);this.S.reject(new Vu(t,o))}}get D(){return this.S.promise}abort(t){t&&this.S.reject(t),this.aborted||(tt(On,"Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const t=this.transaction;this.aborted||typeof t.commit!="function"||t.commit()}store(t){const e=this.transaction.objectStore(t);return new RR(e)}}class Ri{static delete(t){return tt(On,"Removing database:",t),ea(rp().indexedDB.deleteDatabase(t)).toPromise()}static v(){if(!k0())return!1;if(Ri.F())return!0;const t=hf(),e=Ri.M(t),r=0<e&&e<10,o=pA(t),u=0<o&&o<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||u)}static F(){var t;return typeof process<"u"&&((t=process.__PRIVATE_env)==null?void 0:t.__PRIVATE_USE_MOCK_PERSISTENCE)==="YES"}static O(t,e){return t.store(e)}static M(t){const e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(t,e,r){this.name=t,this.version=e,this.N=r,this.B=null,Ri.M(hf())===12.2&&Te("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(t){return this.db||(tt(On,"Opening database:",this.name),this.db=await new Promise(((e,r)=>{const o=indexedDB.open(this.name,this.version);o.onsuccess=u=>{const h=u.target.result;e(h)},o.onblocked=()=>{r(new Vu(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},o.onerror=u=>{const h=u.target.error;h.name==="VersionError"?r(new J(j.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):h.name==="InvalidStateError"?r(new J(j.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+h)):r(new Vu(t,h))},o.onupgradeneeded=u=>{tt(On,'Database "'+this.name+'" requires upgrade from version:',u.oldVersion);const h=u.target.result;this.N.k(h,o.transaction,u.oldVersion,this.version).next((()=>{tt(On,"Database upgrade to version "+this.version+" complete")}))}}))),this.q&&(this.db.onversionchange=e=>this.q(e)),this.db}$(t){this.q=t,this.db&&(this.db.onversionchange=e=>t(e))}async runTransaction(t,e,r,o){const u=e==="readonly";let h=0;for(;;){++h;try{this.db=await this.L(t);const m=xf.open(this.db,t,u?"readonly":"readwrite",r),g=o(m).next((_=>(m.C(),_))).catch((_=>(m.abort(_),B.reject(_)))).toPromise();return g.catch((()=>{})),await m.D,g}catch(m){const g=m,_=g.name!=="FirebaseError"&&h<3;if(tt(On,"Transaction failed with error:",g.message,"Retrying:",_),this.close(),!_)return Promise.reject(g)}}}close(){this.db&&this.db.close(),this.db=void 0}}function pA(s){const t=s.match(/Android ([\d.]+)/i),e=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(e)}class IR{constructor(t){this.U=t,this.K=!1,this.W=null}get isDone(){return this.K}get G(){return this.W}set cursor(t){this.U=t}done(){this.K=!0}j(t){this.W=t}delete(){return ea(this.U.delete())}}class Vu extends J{constructor(t,e){super(j.UNAVAILABLE,`IndexedDB transaction '${t}' failed: ${e}`),this.name="IndexedDbTransactionError"}}function cs(s){return s.name==="IndexedDbTransactionError"}class RR{constructor(t){this.store=t}put(t,e){let r;return e!==void 0?(tt(On,"PUT",this.store.name,t,e),r=this.store.put(e,t)):(tt(On,"PUT",this.store.name,"<auto-key>",t),r=this.store.put(t)),ea(r)}add(t){return tt(On,"ADD",this.store.name,t,t),ea(this.store.add(t))}get(t){return ea(this.store.get(t)).next((e=>(e===void 0&&(e=null),tt(On,"GET",this.store.name,t,e),e)))}delete(t){return tt(On,"DELETE",this.store.name,t),ea(this.store.delete(t))}count(){return tt(On,"COUNT",this.store.name),ea(this.store.count())}J(t,e){const r=this.options(t,e),o=r.index?this.store.index(r.index):this.store;if(typeof o.getAll=="function"){const u=o.getAll(r.range);return new B(((h,m)=>{u.onerror=g=>{m(g.target.error)},u.onsuccess=g=>{h(g.target.result)}}))}{const u=this.cursor(r),h=[];return this.H(u,((m,g)=>{h.push(g)})).next((()=>h))}}Y(t,e){const r=this.store.getAll(t,e===null?void 0:e);return new B(((o,u)=>{r.onerror=h=>{u(h.target.error)},r.onsuccess=h=>{o(h.target.result)}}))}Z(t,e){tt(On,"DELETE ALL",this.store.name);const r=this.options(t,e);r.X=!1;const o=this.cursor(r);return this.H(o,((u,h,m)=>m.delete()))}ee(t,e){let r;e?r=t:(r={},e=t);const o=this.cursor(r);return this.H(o,e)}te(t){const e=this.cursor({});return new B(((r,o)=>{e.onerror=u=>{const h=yp(u.target.error);o(h)},e.onsuccess=u=>{const h=u.target.result;h?t(h.primaryKey,h.value).next((m=>{m?h.continue():r()})):r()}}))}H(t,e){const r=[];return new B(((o,u)=>{t.onerror=h=>{u(h.target.error)},t.onsuccess=h=>{const m=h.target.result;if(!m)return void o();const g=new IR(m),_=e(m.primaryKey,m.value,g);if(_ instanceof B){const E=_.catch((A=>(g.done(),B.reject(A))));r.push(E)}g.isDone?o():g.G===null?m.continue():m.continue(g.G)}})).next((()=>B.waitFor(r)))}options(t,e){let r;return t!==void 0&&(typeof t=="string"?r=t:e=t),{index:r,range:e}}cursor(t){let e="next";if(t.reverse&&(e="prev"),t.index){const r=this.store.index(t.index);return t.X?r.openKeyCursor(t.range,e):r.openCursor(t.range,e)}return this.store.openCursor(t.range,e)}}function ea(s){return new B(((t,e)=>{s.onsuccess=r=>{const o=r.target.result;t(o)},s.onerror=r=>{const o=yp(r.target.error);e(o)}}))}let hT=!1;function yp(s){const t=Ri.M(hf());if(t>=12.2&&t<13){const e="An internal error was encountered in the Indexed Database server";if(s.message.indexOf(e)>=0){const r=new J("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${e}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return hT||(hT=!0,setTimeout((()=>{throw r}),0)),r}}return s}const Cu="IndexBackfiller";class DR{constructor(t,e){this.asyncQueue=t,this.ne=e,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(t){tt(Cu,`Scheduled in ${t}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",t,(async()=>{this.task=null;try{const e=await this.ne.ie();tt(Cu,`Documents written: ${e}`)}catch(e){cs(e)?tt(Cu,"Ignoring IndexedDB error during index backfill: ",e):await us(e)}await this.re(6e4)}))}}class VR{constructor(t,e){this.localStore=t,this.persistence=e}async ie(t=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(e=>this.se(e,t)))}se(t,e){const r=new Set;let o=e,u=!0;return B.doWhile((()=>u===!0&&o>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(t).next((h=>{if(h!==null&&!r.has(h))return tt(Cu,`Processing collection: ${h}`),this.oe(t,h,o).next((m=>{o-=m,r.add(h)}));u=!1})))).next((()=>e-o))}oe(t,e,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(t,e).next((o=>this.localStore.localDocuments.getNextDocuments(t,e,o,r).next((u=>{const h=u.changes;return this.localStore.indexManager.updateIndexEntries(t,h).next((()=>this._e(o,u))).next((m=>(tt(Cu,`Updating offset: ${m}`),this.localStore.indexManager.updateCollectionGroup(t,e,m)))).next((()=>h.size))}))))}_e(t,e){let r=t;return e.changes.forEach(((o,u)=>{const h=dA(u);_p(h,r)>0&&(r=h)})),new Pn(r.readTime,r.documentKey,Math.max(e.batchId,t.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tn{constructor(t,e){this.previousValue=t,e&&(e.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>e.writeSequenceNumber(r))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ue&&this.ue(t),t}}Tn.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zr=-1;function sc(s){return s==null}function Fu(s){return s===0&&1/s==-1/0}function _A(s){return typeof s=="number"&&Number.isInteger(s)&&!Fu(s)&&s<=Number.MAX_SAFE_INTEGER&&s>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mf="";function on(s){let t="";for(let e=0;e<s.length;e++)t.length>0&&(t=fT(t)),t=CR(s.get(e),t);return fT(t)}function CR(s,t){let e=t;const r=s.length;for(let o=0;o<r;o++){const u=s.charAt(o);switch(u){case"\0":e+="";break;case mf:e+="";break;default:e+=u}}return e}function fT(s){return s+mf+""}function wi(s){const t=s.length;if(ht(t>=2,64408,{path:s}),t===2)return ht(s.charAt(0)===mf&&s.charAt(1)==="",56145,{path:s}),Ot.emptyPath();const e=t-2,r=[];let o="";for(let u=0;u<t;){const h=s.indexOf(mf,u);switch((h<0||h>e)&&lt(50515,{path:s}),s.charAt(h+1)){case"":const m=s.substring(u,h);let g;o.length===0?g=m:(o+=m,g=o,o=""),r.push(g);break;case"":o+=s.substring(u,h),o+="\0";break;case"":o+=s.substring(u,h+1);break;default:lt(61167,{path:s})}u=h+2}return new Ot(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ta="remoteDocuments",ac="owner",yo="owner",ju="mutationQueues",NR="userId",ii="mutations",dT="batchId",aa="userMutationsIndex",mT=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jh(s,t){return[s,on(t)]}function yA(s,t,e){return[s,on(t),e]}const xR={},Lo="documentMutations",gf="remoteDocumentsV14",OR=["prefixPath","collectionGroup","readTime","documentId"],Wh="documentKeyIndex",MR=["prefixPath","collectionGroup","documentId"],vA="collectionGroupIndex",PR=["collectionGroup","readTime","prefixPath","documentId"],Gu="remoteDocumentGlobal",Cg="remoteDocumentGlobalKey",Bo="targets",EA="queryTargetsIndex",UR=["canonicalId","targetId"],ko="targetDocuments",LR=["targetId","path"],vp="documentTargetsIndex",BR=["path","targetId"],pf="targetGlobalKey",ua="targetGlobal",Hu="collectionParents",kR=["collectionId","parent"],zo="clientMetadata",zR="clientId",Of="bundles",qR="bundleId",Mf="namedQueries",FR="name",Ep="indexConfiguration",jR="indexId",Ng="collectionGroupIndex",GR="collectionGroup",Nu="indexState",HR=["indexId","uid"],TA="sequenceNumberIndex",QR=["uid","sequenceNumber"],xu="indexEntries",KR=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],AA="documentKeyIndex",YR=["indexId","uid","orderedDocumentKey"],Pf="documentOverlays",XR=["userId","collectionPath","documentId"],xg="collectionPathOverlayIndex",$R=["userId","collectionPath","largestBatchId"],bA="collectionGroupOverlayIndex",ZR=["userId","collectionGroup","largestBatchId"],Tp="globals",JR="name",SA=[ju,ii,Lo,ta,Bo,ac,ua,ko,zo,Gu,Hu,Of,Mf],WR=[...SA,Pf],wA=[ju,ii,Lo,gf,Bo,ac,ua,ko,zo,Gu,Hu,Of,Mf,Pf],IA=wA,Ap=[...IA,Ep,Nu,xu],tD=Ap,RA=[...Ap,Tp],eD=RA;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Og extends gA{constructor(t,e){super(),this.le=t,this.currentSequenceNumber=e}}function Ue(s,t){const e=at(s);return Ri.O(e.le,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gT(s){let t=0;for(const e in s)Object.prototype.hasOwnProperty.call(s,e)&&t++;return t}function hs(s,t){for(const e in s)Object.prototype.hasOwnProperty.call(s,e)&&t(e,s[e])}function DA(s){for(const t in s)if(Object.prototype.hasOwnProperty.call(s,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class se{constructor(t,e){this.comparator=t,this.root=e||Ze.EMPTY}insert(t,e){return new se(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,Ze.BLACK,null,null))}remove(t){return new se(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Ze.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){const r=this.comparator(t,e.key);if(r===0)return e.value;r<0?e=e.left:r>0&&(e=e.right)}return null}indexOf(t){let e=0,r=this.root;for(;!r.isEmpty();){const o=this.comparator(t,r.key);if(o===0)return e+r.left.size;o<0?r=r.left:(e+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal(((e,r)=>(t(e,r),!1)))}toString(){const t=[];return this.inorderTraversal(((e,r)=>(t.push(`${e}:${r}`),!1))),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new Gh(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new Gh(this.root,t,this.comparator,!1)}getReverseIterator(){return new Gh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new Gh(this.root,t,this.comparator,!0)}}class Gh{constructor(t,e,r,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!t.isEmpty();)if(u=e?r(t.key,e):1,e&&o&&(u*=-1),u<0)t=this.isReverse?t.left:t.right;else{if(u===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class Ze{constructor(t,e,r,o,u){this.key=t,this.value=e,this.color=r??Ze.RED,this.left=o??Ze.EMPTY,this.right=u??Ze.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,r,o,u){return new Ze(t??this.key,e??this.value,r??this.color,o??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,r){let o=this;const u=r(t,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(t,e,r),null):u===0?o.copy(null,e,null,null,null):o.copy(null,null,null,null,o.right.insert(t,e,r)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Ze.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let r,o=this;if(e(t,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(t,e),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),e(t,o.key)===0){if(o.right.isEmpty())return Ze.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(t,e))}return o.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,Ze.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,Ze.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw lt(43730,{key:this.key,value:this.value});if(this.right.isRed())throw lt(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw lt(27949);return t+(this.isRed()?0:1)}}Ze.EMPTY=null,Ze.RED=!0,Ze.BLACK=!1;Ze.EMPTY=new class{constructor(){this.size=0}get key(){throw lt(57766)}get value(){throw lt(16141)}get color(){throw lt(16727)}get left(){throw lt(29726)}get right(){throw lt(36894)}copy(t,e,r,o,u){return this}insert(t,e,r){return new Ze(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $t{constructor(t){this.comparator=t,this.data=new se(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal(((e,r)=>(t(e),!1)))}forEachInRange(t,e){const r=this.data.getIteratorFrom(t[0]);for(;r.hasNext();){const o=r.getNext();if(this.comparator(o.key,t[1])>=0)return;e(o.key)}}forEachWhile(t,e){let r;for(r=e!==void 0?this.data.getIteratorFrom(e):this.data.getIterator();r.hasNext();)if(!t(r.getNext().key))return}firstAfterOrEqual(t){const e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new pT(this.data.getIterator())}getIteratorFrom(t){return new pT(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach((r=>{e=e.add(r)})),e}isEqual(t){if(!(t instanceof $t)||this.size!==t.size)return!1;const e=this.data.getIterator(),r=t.data.getIterator();for(;e.hasNext();){const o=e.getNext().key,u=r.getNext().key;if(this.comparator(o,u)!==0)return!1}return!0}toArray(){const t=[];return this.forEach((e=>{t.push(e)})),t}toString(){const t=[];return this.forEach((e=>t.push(e))),"SortedSet("+t.toString()+")"}copy(t){const e=new $t(this.comparator);return e.data=t,e}}class pT{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function vo(s){return s.hasNext()?s.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class An{constructor(t){this.fields=t,t.sort(ce.comparator)}static empty(){return new An([])}unionWith(t){let e=new $t(ce.comparator);for(const r of this.fields)e=e.add(r);for(const r of t)e=e.add(r);return new An(e.toArray())}covers(t){for(const e of this.fields)if(e.isPrefixOf(t))return!0;return!1}isEqual(t){return Po(this.fields,t.fields,((e,r)=>e.isEqual(r)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VA extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nD(){return typeof atob<"u"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _e{constructor(t){this.binaryString=t}static fromBase64String(t){const e=(function(o){try{return atob(o)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new VA("Invalid base64 string: "+u):u}})(t);return new _e(e)}static fromUint8Array(t){const e=(function(o){let u="";for(let h=0;h<o.length;++h)u+=String.fromCharCode(o[h]);return u})(t);return new _e(e)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(e){return btoa(e)})(this.binaryString)}toUint8Array(){return(function(e){const r=new Uint8Array(e.length);for(let o=0;o<e.length;o++)r[o]=e.charCodeAt(o);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return bt(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}_e.EMPTY_BYTE_STRING=new _e("");const iD=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function or(s){if(ht(!!s,39018),typeof s=="string"){let t=0;const e=iD.exec(s);if(ht(!!e,46558,{timestamp:s}),e[1]){let o=e[1];o=(o+"000000000").substr(0,9),t=Number(o)}const r=new Date(s);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:ue(s.seconds),nanos:ue(s.nanos)}}function ue(s){return typeof s=="number"?s:typeof s=="string"?Number(s):0}function lr(s){return typeof s=="string"?_e.fromBase64String(s):_e.fromUint8Array(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CA="server_timestamp",NA="__type__",xA="__previous_value__",OA="__local_write_time__";function Uf(s){var e,r;return((r=(((e=s==null?void 0:s.mapValue)==null?void 0:e.fields)||{})[NA])==null?void 0:r.stringValue)===CA}function Lf(s){const t=s.mapValue.fields[xA];return Uf(t)?Lf(t):t}function Qu(s){const t=or(s.mapValue.fields[OA].timestampValue);return new Ht(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rD{constructor(t,e,r,o,u,h,m,g,_,E){this.databaseId=t,this.appId=e,this.persistenceKey=r,this.host=o,this.ssl=u,this.forceLongPolling=h,this.autoDetectLongPolling=m,this.longPollingOptions=g,this.useFetchStreams=_,this.isUsingEmulator=E}}const Mg="(default)";class ns{constructor(t,e){this.projectId=t,this.database=e||Mg}static empty(){return new ns("","")}get isDefaultDatabase(){return this.database===Mg}isEqual(t){return t instanceof ns&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bp="__type__",MA="__max__",Kr={mapValue:{fields:{__type__:{stringValue:MA}}}},Sp="__vector__",qo="value",tf={nullValue:"NULL_VALUE"};function is(s){return"nullValue"in s?0:"booleanValue"in s?1:"integerValue"in s||"doubleValue"in s?2:"timestampValue"in s?3:"stringValue"in s?5:"bytesValue"in s?6:"referenceValue"in s?7:"geoPointValue"in s?8:"arrayValue"in s?9:"mapValue"in s?Uf(s)?4:PA(s)?9007199254740991:Bf(s)?10:11:lt(28295,{value:s})}function Ni(s,t){if(s===t)return!0;const e=is(s);if(e!==is(t))return!1;switch(e){case 0:case 9007199254740991:return!0;case 1:return s.booleanValue===t.booleanValue;case 4:return Qu(s).isEqual(Qu(t));case 3:return(function(o,u){if(typeof o.timestampValue=="string"&&typeof u.timestampValue=="string"&&o.timestampValue.length===u.timestampValue.length)return o.timestampValue===u.timestampValue;const h=or(o.timestampValue),m=or(u.timestampValue);return h.seconds===m.seconds&&h.nanos===m.nanos})(s,t);case 5:return s.stringValue===t.stringValue;case 6:return(function(o,u){return lr(o.bytesValue).isEqual(lr(u.bytesValue))})(s,t);case 7:return s.referenceValue===t.referenceValue;case 8:return(function(o,u){return ue(o.geoPointValue.latitude)===ue(u.geoPointValue.latitude)&&ue(o.geoPointValue.longitude)===ue(u.geoPointValue.longitude)})(s,t);case 2:return(function(o,u){if("integerValue"in o&&"integerValue"in u)return ue(o.integerValue)===ue(u.integerValue);if("doubleValue"in o&&"doubleValue"in u){const h=ue(o.doubleValue),m=ue(u.doubleValue);return h===m?Fu(h)===Fu(m):isNaN(h)&&isNaN(m)}return!1})(s,t);case 9:return Po(s.arrayValue.values||[],t.arrayValue.values||[],Ni);case 10:case 11:return(function(o,u){const h=o.mapValue.fields||{},m=u.mapValue.fields||{};if(gT(h)!==gT(m))return!1;for(const g in h)if(h.hasOwnProperty(g)&&(m[g]===void 0||!Ni(h[g],m[g])))return!1;return!0})(s,t);default:return lt(52216,{left:s})}}function Ku(s,t){return(s.values||[]).find((e=>Ni(e,t)))!==void 0}function rs(s,t){if(s===t)return 0;const e=is(s),r=is(t);if(e!==r)return bt(e,r);switch(e){case 0:case 9007199254740991:return 0;case 1:return bt(s.booleanValue,t.booleanValue);case 2:return(function(u,h){const m=ue(u.integerValue||u.doubleValue),g=ue(h.integerValue||h.doubleValue);return m<g?-1:m>g?1:m===g?0:isNaN(m)?isNaN(g)?0:-1:1})(s,t);case 3:return _T(s.timestampValue,t.timestampValue);case 4:return _T(Qu(s),Qu(t));case 5:return Dg(s.stringValue,t.stringValue);case 6:return(function(u,h){const m=lr(u),g=lr(h);return m.compareTo(g)})(s.bytesValue,t.bytesValue);case 7:return(function(u,h){const m=u.split("/"),g=h.split("/");for(let _=0;_<m.length&&_<g.length;_++){const E=bt(m[_],g[_]);if(E!==0)return E}return bt(m.length,g.length)})(s.referenceValue,t.referenceValue);case 8:return(function(u,h){const m=bt(ue(u.latitude),ue(h.latitude));return m!==0?m:bt(ue(u.longitude),ue(h.longitude))})(s.geoPointValue,t.geoPointValue);case 9:return yT(s.arrayValue,t.arrayValue);case 10:return(function(u,h){var S,O,H,Z;const m=u.fields||{},g=h.fields||{},_=(S=m[qo])==null?void 0:S.arrayValue,E=(O=g[qo])==null?void 0:O.arrayValue,A=bt(((H=_==null?void 0:_.values)==null?void 0:H.length)||0,((Z=E==null?void 0:E.values)==null?void 0:Z.length)||0);return A!==0?A:yT(_,E)})(s.mapValue,t.mapValue);case 11:return(function(u,h){if(u===Kr.mapValue&&h===Kr.mapValue)return 0;if(u===Kr.mapValue)return 1;if(h===Kr.mapValue)return-1;const m=u.fields||{},g=Object.keys(m),_=h.fields||{},E=Object.keys(_);g.sort(),E.sort();for(let A=0;A<g.length&&A<E.length;++A){const S=Dg(g[A],E[A]);if(S!==0)return S;const O=rs(m[g[A]],_[E[A]]);if(O!==0)return O}return bt(g.length,E.length)})(s.mapValue,t.mapValue);default:throw lt(23264,{he:e})}}function _T(s,t){if(typeof s=="string"&&typeof t=="string"&&s.length===t.length)return bt(s,t);const e=or(s),r=or(t),o=bt(e.seconds,r.seconds);return o!==0?o:bt(e.nanos,r.nanos)}function yT(s,t){const e=s.values||[],r=t.values||[];for(let o=0;o<e.length&&o<r.length;++o){const u=rs(e[o],r[o]);if(u)return u}return bt(e.length,r.length)}function Fo(s){return Pg(s)}function Pg(s){return"nullValue"in s?"null":"booleanValue"in s?""+s.booleanValue:"integerValue"in s?""+s.integerValue:"doubleValue"in s?""+s.doubleValue:"timestampValue"in s?(function(e){const r=or(e);return`time(${r.seconds},${r.nanos})`})(s.timestampValue):"stringValue"in s?s.stringValue:"bytesValue"in s?(function(e){return lr(e).toBase64()})(s.bytesValue):"referenceValue"in s?(function(e){return rt.fromName(e).toString()})(s.referenceValue):"geoPointValue"in s?(function(e){return`geo(${e.latitude},${e.longitude})`})(s.geoPointValue):"arrayValue"in s?(function(e){let r="[",o=!0;for(const u of e.values||[])o?o=!1:r+=",",r+=Pg(u);return r+"]"})(s.arrayValue):"mapValue"in s?(function(e){const r=Object.keys(e.fields||{}).sort();let o="{",u=!0;for(const h of r)u?u=!1:o+=",",o+=`${h}:${Pg(e.fields[h])}`;return o+"}"})(s.mapValue):lt(61005,{value:s})}function ef(s){switch(is(s)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=Lf(s);return t?16+ef(t):16;case 5:return 2*s.stringValue.length;case 6:return lr(s.bytesValue).approximateByteSize();case 7:return s.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((o,u)=>o+ef(u)),0)})(s.arrayValue);case 10:case 11:return(function(r){let o=0;return hs(r.fields,((u,h)=>{o+=u.length+ef(h)})),o})(s.mapValue);default:throw lt(13486,{value:s})}}function ha(s,t){return{referenceValue:`projects/${s.projectId}/databases/${s.database}/documents/${t.path.canonicalString()}`}}function Ug(s){return!!s&&"integerValue"in s}function Yu(s){return!!s&&"arrayValue"in s}function vT(s){return!!s&&"nullValue"in s}function ET(s){return!!s&&"doubleValue"in s&&isNaN(Number(s.doubleValue))}function nf(s){return!!s&&"mapValue"in s}function Bf(s){var e,r;return((r=(((e=s==null?void 0:s.mapValue)==null?void 0:e.fields)||{})[bp])==null?void 0:r.stringValue)===Sp}function Ou(s){if(s.geoPointValue)return{geoPointValue:{...s.geoPointValue}};if(s.timestampValue&&typeof s.timestampValue=="object")return{timestampValue:{...s.timestampValue}};if(s.mapValue){const t={mapValue:{fields:{}}};return hs(s.mapValue.fields,((e,r)=>t.mapValue.fields[e]=Ou(r))),t}if(s.arrayValue){const t={arrayValue:{values:[]}};for(let e=0;e<(s.arrayValue.values||[]).length;++e)t.arrayValue.values[e]=Ou(s.arrayValue.values[e]);return t}return{...s}}function PA(s){return(((s.mapValue||{}).fields||{}).__type__||{}).stringValue===MA}const UA={mapValue:{fields:{[bp]:{stringValue:Sp},[qo]:{arrayValue:{}}}}};function sD(s){return"nullValue"in s?tf:"booleanValue"in s?{booleanValue:!1}:"integerValue"in s||"doubleValue"in s?{doubleValue:NaN}:"timestampValue"in s?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in s?{stringValue:""}:"bytesValue"in s?{bytesValue:""}:"referenceValue"in s?ha(ns.empty(),rt.empty()):"geoPointValue"in s?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in s?{arrayValue:{}}:"mapValue"in s?Bf(s)?UA:{mapValue:{}}:lt(35942,{value:s})}function aD(s){return"nullValue"in s?{booleanValue:!1}:"booleanValue"in s?{doubleValue:NaN}:"integerValue"in s||"doubleValue"in s?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in s?{stringValue:""}:"stringValue"in s?{bytesValue:""}:"bytesValue"in s?ha(ns.empty(),rt.empty()):"referenceValue"in s?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in s?{arrayValue:{}}:"arrayValue"in s?UA:"mapValue"in s?Bf(s)?{mapValue:{}}:Kr:lt(61959,{value:s})}function TT(s,t){const e=rs(s.value,t.value);return e!==0?e:s.inclusive&&!t.inclusive?-1:!s.inclusive&&t.inclusive?1:0}function AT(s,t){const e=rs(s.value,t.value);return e!==0?e:s.inclusive&&!t.inclusive?1:!s.inclusive&&t.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Je{constructor(t){this.value=t}static empty(){return new Je({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let e=this.value;for(let r=0;r<t.length-1;++r)if(e=(e.mapValue.fields||{})[t.get(r)],!nf(e))return null;return e=(e.mapValue.fields||{})[t.lastSegment()],e||null}}set(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=Ou(e)}setAll(t){let e=ce.emptyPath(),r={},o=[];t.forEach(((h,m)=>{if(!e.isImmediateParentOf(m)){const g=this.getFieldsMap(e);this.applyChanges(g,r,o),r={},o=[],e=m.popLast()}h?r[m.lastSegment()]=Ou(h):o.push(m.lastSegment())}));const u=this.getFieldsMap(e);this.applyChanges(u,r,o)}delete(t){const e=this.field(t.popLast());nf(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]}isEqual(t){return Ni(this.value,t.value)}getFieldsMap(t){let e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(let r=0;r<t.length;++r){let o=e.mapValue.fields[t.get(r)];nf(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},e.mapValue.fields[t.get(r)]=o),e=o}return e.mapValue.fields}applyChanges(t,e,r){hs(e,((o,u)=>t[o]=u));for(const o of r)delete t[o]}clone(){return new Je(Ou(this.value))}}function LA(s){const t=[];return hs(s.fields,((e,r)=>{const o=new ce([e]);if(nf(r)){const u=LA(r.mapValue).fields;if(u.length===0)t.push(o);else for(const h of u)t.push(o.child(h))}else t.push(o)})),new An(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ae{constructor(t,e,r,o,u,h,m){this.key=t,this.documentType=e,this.version=r,this.readTime=o,this.createTime=u,this.data=h,this.documentState=m}static newInvalidDocument(t){return new ae(t,0,dt.min(),dt.min(),dt.min(),Je.empty(),0)}static newFoundDocument(t,e,r,o){return new ae(t,1,e,dt.min(),r,o,0)}static newNoDocument(t,e){return new ae(t,2,e,dt.min(),dt.min(),Je.empty(),0)}static newUnknownDocument(t,e){return new ae(t,3,e,dt.min(),dt.min(),Je.empty(),2)}convertToFoundDocument(t,e){return!this.createTime.isEqual(dt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Je.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Je.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=dt.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof ae&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new ae(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ss{constructor(t,e){this.position=t,this.inclusive=e}}function bT(s,t,e){let r=0;for(let o=0;o<s.position.length;o++){const u=t[o],h=s.position[o];if(u.field.isKeyField()?r=rt.comparator(rt.fromName(h.referenceValue),e.key):r=rs(h,e.data.field(u.field)),u.dir==="desc"&&(r*=-1),r!==0)break}return r}function ST(s,t){if(s===null)return t===null;if(t===null||s.inclusive!==t.inclusive||s.position.length!==t.position.length)return!1;for(let e=0;e<s.position.length;e++)if(!Ni(s.position[e],t.position[e]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xu{constructor(t,e="asc"){this.field=t,this.dir=e}}function oD(s,t){return s.dir===t.dir&&s.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BA{}class Mt extends BA{constructor(t,e,r){super(),this.field=t,this.op=e,this.value=r}static create(t,e,r){return t.isKeyField()?e==="in"||e==="not-in"?this.createKeyFieldInFilter(t,e,r):new lD(t,e,r):e==="array-contains"?new hD(t,r):e==="in"?new GA(t,r):e==="not-in"?new fD(t,r):e==="array-contains-any"?new dD(t,r):new Mt(t,e,r)}static createKeyFieldInFilter(t,e,r){return e==="in"?new uD(t,r):new cD(t,r)}matches(t){const e=t.data.field(this.field);return this.op==="!="?e!==null&&e.nullValue===void 0&&this.matchesComparison(rs(e,this.value)):e!==null&&is(this.value)===is(e)&&this.matchesComparison(rs(e,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return lt(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Xt extends BA{constructor(t,e){super(),this.filters=t,this.op=e,this.Pe=null}static create(t,e){return new Xt(t,e)}matches(t){return jo(this)?this.filters.find((e=>!e.matches(t)))===void 0:this.filters.find((e=>e.matches(t)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((t,e)=>t.concat(e.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function jo(s){return s.op==="and"}function Lg(s){return s.op==="or"}function wp(s){return kA(s)&&jo(s)}function kA(s){for(const t of s.filters)if(t instanceof Xt)return!1;return!0}function Bg(s){if(s instanceof Mt)return s.field.canonicalString()+s.op.toString()+Fo(s.value);if(wp(s))return s.filters.map((t=>Bg(t))).join(",");{const t=s.filters.map((e=>Bg(e))).join(",");return`${s.op}(${t})`}}function zA(s,t){return s instanceof Mt?(function(r,o){return o instanceof Mt&&r.op===o.op&&r.field.isEqual(o.field)&&Ni(r.value,o.value)})(s,t):s instanceof Xt?(function(r,o){return o instanceof Xt&&r.op===o.op&&r.filters.length===o.filters.length?r.filters.reduce(((u,h,m)=>u&&zA(h,o.filters[m])),!0):!1})(s,t):void lt(19439)}function qA(s,t){const e=s.filters.concat(t);return Xt.create(e,s.op)}function FA(s){return s instanceof Mt?(function(e){return`${e.field.canonicalString()} ${e.op} ${Fo(e.value)}`})(s):s instanceof Xt?(function(e){return e.op.toString()+" {"+e.getFilters().map(FA).join(" ,")+"}"})(s):"Filter"}class lD extends Mt{constructor(t,e,r){super(t,e,r),this.key=rt.fromName(r.referenceValue)}matches(t){const e=rt.comparator(t.key,this.key);return this.matchesComparison(e)}}class uD extends Mt{constructor(t,e){super(t,"in",e),this.keys=jA("in",e)}matches(t){return this.keys.some((e=>e.isEqual(t.key)))}}class cD extends Mt{constructor(t,e){super(t,"not-in",e),this.keys=jA("not-in",e)}matches(t){return!this.keys.some((e=>e.isEqual(t.key)))}}function jA(s,t){var e;return(((e=t.arrayValue)==null?void 0:e.values)||[]).map((r=>rt.fromName(r.referenceValue)))}class hD extends Mt{constructor(t,e){super(t,"array-contains",e)}matches(t){const e=t.data.field(this.field);return Yu(e)&&Ku(e.arrayValue,this.value)}}class GA extends Mt{constructor(t,e){super(t,"in",e)}matches(t){const e=t.data.field(this.field);return e!==null&&Ku(this.value.arrayValue,e)}}class fD extends Mt{constructor(t,e){super(t,"not-in",e)}matches(t){if(Ku(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const e=t.data.field(this.field);return e!==null&&e.nullValue===void 0&&!Ku(this.value.arrayValue,e)}}class dD extends Mt{constructor(t,e){super(t,"array-contains-any",e)}matches(t){const e=t.data.field(this.field);return!(!Yu(e)||!e.arrayValue.values)&&e.arrayValue.values.some((r=>Ku(this.value.arrayValue,r)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mD{constructor(t,e=null,r=[],o=[],u=null,h=null,m=null){this.path=t,this.collectionGroup=e,this.orderBy=r,this.filters=o,this.limit=u,this.startAt=h,this.endAt=m,this.Te=null}}function kg(s,t=null,e=[],r=[],o=null,u=null,h=null){return new mD(s,t,e,r,o,u,h)}function fa(s){const t=at(s);if(t.Te===null){let e=t.path.canonicalString();t.collectionGroup!==null&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map((r=>Bg(r))).join(","),e+="|ob:",e+=t.orderBy.map((r=>(function(u){return u.field.canonicalString()+u.dir})(r))).join(","),sc(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((r=>Fo(r))).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((r=>Fo(r))).join(",")),t.Te=e}return t.Te}function oc(s,t){if(s.limit!==t.limit||s.orderBy.length!==t.orderBy.length)return!1;for(let e=0;e<s.orderBy.length;e++)if(!oD(s.orderBy[e],t.orderBy[e]))return!1;if(s.filters.length!==t.filters.length)return!1;for(let e=0;e<s.filters.length;e++)if(!zA(s.filters[e],t.filters[e]))return!1;return s.collectionGroup===t.collectionGroup&&!!s.path.isEqual(t.path)&&!!ST(s.startAt,t.startAt)&&ST(s.endAt,t.endAt)}function _f(s){return rt.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}function yf(s,t){return s.filters.filter((e=>e instanceof Mt&&e.field.isEqual(t)))}function wT(s,t,e){let r=tf,o=!0;for(const u of yf(s,t)){let h=tf,m=!0;switch(u.op){case"<":case"<=":h=sD(u.value);break;case"==":case"in":case">=":h=u.value;break;case">":h=u.value,m=!1;break;case"!=":case"not-in":h=tf}TT({value:r,inclusive:o},{value:h,inclusive:m})<0&&(r=h,o=m)}if(e!==null){for(let u=0;u<s.orderBy.length;++u)if(s.orderBy[u].field.isEqual(t)){const h=e.position[u];TT({value:r,inclusive:o},{value:h,inclusive:e.inclusive})<0&&(r=h,o=e.inclusive);break}}return{value:r,inclusive:o}}function IT(s,t,e){let r=Kr,o=!0;for(const u of yf(s,t)){let h=Kr,m=!0;switch(u.op){case">=":case">":h=aD(u.value),m=!1;break;case"==":case"in":case"<=":h=u.value;break;case"<":h=u.value,m=!1;break;case"!=":case"not-in":h=Kr}AT({value:r,inclusive:o},{value:h,inclusive:m})>0&&(r=h,o=m)}if(e!==null){for(let u=0;u<s.orderBy.length;++u)if(s.orderBy[u].field.isEqual(t)){const h=e.position[u];AT({value:r,inclusive:o},{value:h,inclusive:e.inclusive})>0&&(r=h,o=e.inclusive);break}}return{value:r,inclusive:o}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ur{constructor(t,e=null,r=[],o=[],u=null,h="F",m=null,g=null){this.path=t,this.collectionGroup=e,this.explicitOrderBy=r,this.filters=o,this.limit=u,this.limitType=h,this.startAt=m,this.endAt=g,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function HA(s,t,e,r,o,u,h,m){return new ur(s,t,e,r,o,u,h,m)}function el(s){return new ur(s)}function RT(s){return s.filters.length===0&&s.limit===null&&s.startAt==null&&s.endAt==null&&(s.explicitOrderBy.length===0||s.explicitOrderBy.length===1&&s.explicitOrderBy[0].field.isKeyField())}function Ip(s){return s.collectionGroup!==null}function Vo(s){const t=at(s);if(t.Ie===null){t.Ie=[];const e=new Set;for(const u of t.explicitOrderBy)t.Ie.push(u),e.add(u.field.canonicalString());const r=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(h){let m=new $t(ce.comparator);return h.filters.forEach((g=>{g.getFlattenedFilters().forEach((_=>{_.isInequality()&&(m=m.add(_.field))}))})),m})(t).forEach((u=>{e.has(u.canonicalString())||u.isKeyField()||t.Ie.push(new Xu(u,r))})),e.has(ce.keyField().canonicalString())||t.Ie.push(new Xu(ce.keyField(),r))}return t.Ie}function gn(s){const t=at(s);return t.Ee||(t.Ee=gD(t,Vo(s))),t.Ee}function gD(s,t){if(s.limitType==="F")return kg(s.path,s.collectionGroup,t,s.filters,s.limit,s.startAt,s.endAt);{t=t.map((o=>{const u=o.dir==="desc"?"asc":"desc";return new Xu(o.field,u)}));const e=s.endAt?new ss(s.endAt.position,s.endAt.inclusive):null,r=s.startAt?new ss(s.startAt.position,s.startAt.inclusive):null;return kg(s.path,s.collectionGroup,t,s.filters,s.limit,e,r)}}function zg(s,t){const e=s.filters.concat([t]);return new ur(s.path,s.collectionGroup,s.explicitOrderBy.slice(),e,s.limit,s.limitType,s.startAt,s.endAt)}function vf(s,t,e){return new ur(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),t,e,s.startAt,s.endAt)}function lc(s,t){return oc(gn(s),gn(t))&&s.limitType===t.limitType}function QA(s){return`${fa(gn(s))}|lt:${s.limitType}`}function wo(s){return`Query(target=${(function(e){let r=e.path.canonicalString();return e.collectionGroup!==null&&(r+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(r+=`, filters: [${e.filters.map((o=>FA(o))).join(", ")}]`),sc(e.limit)||(r+=", limit: "+e.limit),e.orderBy.length>0&&(r+=`, orderBy: [${e.orderBy.map((o=>(function(h){return`${h.field.canonicalString()} (${h.dir})`})(o))).join(", ")}]`),e.startAt&&(r+=", startAt: ",r+=e.startAt.inclusive?"b:":"a:",r+=e.startAt.position.map((o=>Fo(o))).join(",")),e.endAt&&(r+=", endAt: ",r+=e.endAt.inclusive?"a:":"b:",r+=e.endAt.position.map((o=>Fo(o))).join(",")),`Target(${r})`})(gn(s))}; limitType=${s.limitType})`}function uc(s,t){return t.isFoundDocument()&&(function(r,o){const u=o.key.path;return r.collectionGroup!==null?o.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(u):rt.isDocumentKey(r.path)?r.path.isEqual(u):r.path.isImmediateParentOf(u)})(s,t)&&(function(r,o){for(const u of Vo(r))if(!u.field.isKeyField()&&o.data.field(u.field)===null)return!1;return!0})(s,t)&&(function(r,o){for(const u of r.filters)if(!u.matches(o))return!1;return!0})(s,t)&&(function(r,o){return!(r.startAt&&!(function(h,m,g){const _=bT(h,m,g);return h.inclusive?_<=0:_<0})(r.startAt,Vo(r),o)||r.endAt&&!(function(h,m,g){const _=bT(h,m,g);return h.inclusive?_>=0:_>0})(r.endAt,Vo(r),o))})(s,t)}function KA(s){return s.collectionGroup||(s.path.length%2==1?s.path.lastSegment():s.path.get(s.path.length-2))}function YA(s){return(t,e)=>{let r=!1;for(const o of Vo(s)){const u=pD(o,t,e);if(u!==0)return u;r=r||o.field.isKeyField()}return 0}}function pD(s,t,e){const r=s.field.isKeyField()?rt.comparator(t.key,e.key):(function(u,h,m){const g=h.data.field(u),_=m.data.field(u);return g!==null&&_!==null?rs(g,_):lt(42886)})(s.field,t,e);switch(s.dir){case"asc":return r;case"desc":return-1*r;default:return lt(19790,{direction:s.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cr{constructor(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={},this.innerSize=0}get(t){const e=this.mapKeyFn(t),r=this.inner[e];if(r!==void 0){for(const[o,u]of r)if(this.equalsFn(o,t))return u}}has(t){return this.get(t)!==void 0}set(t,e){const r=this.mapKeyFn(t),o=this.inner[r];if(o===void 0)return this.inner[r]=[[t,e]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],t))return void(o[u]=[t,e]);o.push([t,e]),this.innerSize++}delete(t){const e=this.mapKeyFn(t),r=this.inner[e];if(r===void 0)return!1;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],t))return r.length===1?delete this.inner[e]:r.splice(o,1),this.innerSize--,!0;return!1}forEach(t){hs(this.inner,((e,r)=>{for(const[o,u]of r)t(o,u)}))}isEmpty(){return DA(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _D=new se(rt.comparator);function bn(){return _D}const XA=new se(rt.comparator);function Su(...s){let t=XA;for(const e of s)t=t.insert(e.key,e);return t}function $A(s){let t=XA;return s.forEach(((e,r)=>t=t.insert(e,r.overlayedDocument))),t}function Ii(){return Mu()}function ZA(){return Mu()}function Mu(){return new cr((s=>s.toString()),((s,t)=>s.isEqual(t)))}const yD=new se(rt.comparator),vD=new $t(rt.comparator);function It(...s){let t=vD;for(const e of s)t=t.add(e);return t}const ED=new $t(bt);function Rp(){return ED}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dp(s,t){if(s.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Fu(t)?"-0":t}}function JA(s){return{integerValue:""+s}}function WA(s,t){return _A(t)?JA(t):Dp(s,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kf{constructor(){this._=void 0}}function TD(s,t,e){return s instanceof Go?(function(o,u){const h={fields:{[NA]:{stringValue:CA},[OA]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return u&&Uf(u)&&(u=Lf(u)),u&&(h.fields[xA]=u),{mapValue:h}})(e,t):s instanceof da?eb(s,t):s instanceof ma?nb(s,t):(function(o,u){const h=tb(o,u),m=DT(h)+DT(o.Ae);return Ug(h)&&Ug(o.Ae)?JA(m):Dp(o.serializer,m)})(s,t)}function AD(s,t,e){return s instanceof da?eb(s,t):s instanceof ma?nb(s,t):e}function tb(s,t){return s instanceof Ho?(function(r){return Ug(r)||(function(u){return!!u&&"doubleValue"in u})(r)})(t)?t:{integerValue:0}:null}class Go extends kf{}class da extends kf{constructor(t){super(),this.elements=t}}function eb(s,t){const e=ib(t);for(const r of s.elements)e.some((o=>Ni(o,r)))||e.push(r);return{arrayValue:{values:e}}}class ma extends kf{constructor(t){super(),this.elements=t}}function nb(s,t){let e=ib(t);for(const r of s.elements)e=e.filter((o=>!Ni(o,r)));return{arrayValue:{values:e}}}class Ho extends kf{constructor(t,e){super(),this.serializer=t,this.Ae=e}}function DT(s){return ue(s.integerValue||s.doubleValue)}function ib(s){return Yu(s)&&s.arrayValue.values?s.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cc{constructor(t,e){this.field=t,this.transform=e}}function bD(s,t){return s.field.isEqual(t.field)&&(function(r,o){return r instanceof da&&o instanceof da||r instanceof ma&&o instanceof ma?Po(r.elements,o.elements,Ni):r instanceof Ho&&o instanceof Ho?Ni(r.Ae,o.Ae):r instanceof Go&&o instanceof Go})(s.transform,t.transform)}class SD{constructor(t,e){this.version=t,this.transformResults=e}}class he{constructor(t,e){this.updateTime=t,this.exists=e}static none(){return new he}static exists(t){return new he(void 0,t)}static updateTime(t){return new he(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function rf(s,t){return s.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(s.updateTime):s.exists===void 0||s.exists===t.isFoundDocument()}class zf{}function rb(s,t){if(!s.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return s.isNoDocument()?new il(s.key,he.none()):new nl(s.key,s.data,he.none());{const e=s.data,r=Je.empty();let o=new $t(ce.comparator);for(let u of t.fields)if(!o.has(u)){let h=e.field(u);h===null&&u.length>1&&(u=u.popLast(),h=e.field(u)),h===null?r.delete(u):r.set(u,h),o=o.add(u)}return new hr(s.key,r,new An(o.toArray()),he.none())}}function wD(s,t,e){s instanceof nl?(function(o,u,h){const m=o.value.clone(),g=CT(o.fieldTransforms,u,h.transformResults);m.setAll(g),u.convertToFoundDocument(h.version,m).setHasCommittedMutations()})(s,t,e):s instanceof hr?(function(o,u,h){if(!rf(o.precondition,u))return void u.convertToUnknownDocument(h.version);const m=CT(o.fieldTransforms,u,h.transformResults),g=u.data;g.setAll(sb(o)),g.setAll(m),u.convertToFoundDocument(h.version,g).setHasCommittedMutations()})(s,t,e):(function(o,u,h){u.convertToNoDocument(h.version).setHasCommittedMutations()})(0,t,e)}function Pu(s,t,e,r){return s instanceof nl?(function(u,h,m,g){if(!rf(u.precondition,h))return m;const _=u.value.clone(),E=NT(u.fieldTransforms,g,h);return _.setAll(E),h.convertToFoundDocument(h.version,_).setHasLocalMutations(),null})(s,t,e,r):s instanceof hr?(function(u,h,m,g){if(!rf(u.precondition,h))return m;const _=NT(u.fieldTransforms,g,h),E=h.data;return E.setAll(sb(u)),E.setAll(_),h.convertToFoundDocument(h.version,E).setHasLocalMutations(),m===null?null:m.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map((A=>A.field)))})(s,t,e,r):(function(u,h,m){return rf(u.precondition,h)?(h.convertToNoDocument(h.version).setHasLocalMutations(),null):m})(s,t,e)}function ID(s,t){let e=null;for(const r of s.fieldTransforms){const o=t.data.field(r.field),u=tb(r.transform,o||null);u!=null&&(e===null&&(e=Je.empty()),e.set(r.field,u))}return e||null}function VT(s,t){return s.type===t.type&&!!s.key.isEqual(t.key)&&!!s.precondition.isEqual(t.precondition)&&!!(function(r,o){return r===void 0&&o===void 0||!(!r||!o)&&Po(r,o,((u,h)=>bD(u,h)))})(s.fieldTransforms,t.fieldTransforms)&&(s.type===0?s.value.isEqual(t.value):s.type!==1||s.data.isEqual(t.data)&&s.fieldMask.isEqual(t.fieldMask))}class nl extends zf{constructor(t,e,r,o=[]){super(),this.key=t,this.value=e,this.precondition=r,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class hr extends zf{constructor(t,e,r,o,u=[]){super(),this.key=t,this.data=e,this.fieldMask=r,this.precondition=o,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function sb(s){const t=new Map;return s.fieldMask.fields.forEach((e=>{if(!e.isEmpty()){const r=s.data.field(e);t.set(e,r)}})),t}function CT(s,t,e){const r=new Map;ht(s.length===e.length,32656,{Re:e.length,Ve:s.length});for(let o=0;o<e.length;o++){const u=s[o],h=u.transform,m=t.data.field(u.field);r.set(u.field,AD(h,m,e[o]))}return r}function NT(s,t,e){const r=new Map;for(const o of s){const u=o.transform,h=e.data.field(o.field);r.set(o.field,TD(u,h,t))}return r}class il extends zf{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Vp extends zf{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cp{constructor(t,e,r,o){this.batchId=t,this.localWriteTime=e,this.baseMutations=r,this.mutations=o}applyToRemoteDocument(t,e){const r=e.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(t.key)&&wD(u,t,r[o])}}applyToLocalView(t,e){for(const r of this.baseMutations)r.key.isEqual(t.key)&&(e=Pu(r,t,e,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(t.key)&&(e=Pu(r,t,e,this.localWriteTime));return e}applyToLocalDocumentSet(t,e){const r=ZA();return this.mutations.forEach((o=>{const u=t.get(o.key),h=u.overlayedDocument;let m=this.applyToLocalView(h,u.mutatedFields);m=e.has(o.key)?null:m;const g=rb(h,m);g!==null&&r.set(o.key,g),h.isValidDocument()||h.convertToNoDocument(dt.min())})),r}keys(){return this.mutations.reduce(((t,e)=>t.add(e.key)),It())}isEqual(t){return this.batchId===t.batchId&&Po(this.mutations,t.mutations,((e,r)=>VT(e,r)))&&Po(this.baseMutations,t.baseMutations,((e,r)=>VT(e,r)))}}class Np{constructor(t,e,r,o){this.batch=t,this.commitVersion=e,this.mutationResults=r,this.docVersions=o}static from(t,e,r){ht(t.mutations.length===r.length,58842,{me:t.mutations.length,fe:r.length});let o=(function(){return yD})();const u=t.mutations;for(let h=0;h<u.length;h++)o=o.insert(u[h].key,r[h].version);return new Np(t,e,r,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xp{constructor(t,e){this.largestBatchId=t,this.mutation=e}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RD{constructor(t,e){this.count=t,this.unchangedNames=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var De,kt;function ab(s){switch(s){case j.OK:return lt(64938);case j.CANCELLED:case j.UNKNOWN:case j.DEADLINE_EXCEEDED:case j.RESOURCE_EXHAUSTED:case j.INTERNAL:case j.UNAVAILABLE:case j.UNAUTHENTICATED:return!1;case j.INVALID_ARGUMENT:case j.NOT_FOUND:case j.ALREADY_EXISTS:case j.PERMISSION_DENIED:case j.FAILED_PRECONDITION:case j.ABORTED:case j.OUT_OF_RANGE:case j.UNIMPLEMENTED:case j.DATA_LOSS:return!0;default:return lt(15467,{code:s})}}function ob(s){if(s===void 0)return Te("GRPC error has no .code"),j.UNKNOWN;switch(s){case De.OK:return j.OK;case De.CANCELLED:return j.CANCELLED;case De.UNKNOWN:return j.UNKNOWN;case De.DEADLINE_EXCEEDED:return j.DEADLINE_EXCEEDED;case De.RESOURCE_EXHAUSTED:return j.RESOURCE_EXHAUSTED;case De.INTERNAL:return j.INTERNAL;case De.UNAVAILABLE:return j.UNAVAILABLE;case De.UNAUTHENTICATED:return j.UNAUTHENTICATED;case De.INVALID_ARGUMENT:return j.INVALID_ARGUMENT;case De.NOT_FOUND:return j.NOT_FOUND;case De.ALREADY_EXISTS:return j.ALREADY_EXISTS;case De.PERMISSION_DENIED:return j.PERMISSION_DENIED;case De.FAILED_PRECONDITION:return j.FAILED_PRECONDITION;case De.ABORTED:return j.ABORTED;case De.OUT_OF_RANGE:return j.OUT_OF_RANGE;case De.UNIMPLEMENTED:return j.UNIMPLEMENTED;case De.DATA_LOSS:return j.DATA_LOSS;default:return lt(39323,{code:s})}}(kt=De||(De={}))[kt.OK=0]="OK",kt[kt.CANCELLED=1]="CANCELLED",kt[kt.UNKNOWN=2]="UNKNOWN",kt[kt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",kt[kt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",kt[kt.NOT_FOUND=5]="NOT_FOUND",kt[kt.ALREADY_EXISTS=6]="ALREADY_EXISTS",kt[kt.PERMISSION_DENIED=7]="PERMISSION_DENIED",kt[kt.UNAUTHENTICATED=16]="UNAUTHENTICATED",kt[kt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",kt[kt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",kt[kt.ABORTED=10]="ABORTED",kt[kt.OUT_OF_RANGE=11]="OUT_OF_RANGE",kt[kt.UNIMPLEMENTED=12]="UNIMPLEMENTED",kt[kt.INTERNAL=13]="INTERNAL",kt[kt.UNAVAILABLE=14]="UNAVAILABLE",kt[kt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lb(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DD=new $r([4294967295,4294967295],0);function xT(s){const t=lb().encode(s),e=new tA;return e.update(t),new Uint8Array(e.digest())}function OT(s){const t=new DataView(s.buffer),e=t.getUint32(0,!0),r=t.getUint32(4,!0),o=t.getUint32(8,!0),u=t.getUint32(12,!0);return[new $r([e,r],0),new $r([o,u],0)]}class Op{constructor(t,e,r){if(this.bitmap=t,this.padding=e,this.hashCount=r,e<0||e>=8)throw new wu(`Invalid padding: ${e}`);if(r<0)throw new wu(`Invalid hash count: ${r}`);if(t.length>0&&this.hashCount===0)throw new wu(`Invalid hash count: ${r}`);if(t.length===0&&e!==0)throw new wu(`Invalid padding when bitmap length is 0: ${e}`);this.ge=8*t.length-e,this.pe=$r.fromNumber(this.ge)}ye(t,e,r){let o=t.add(e.multiply($r.fromNumber(r)));return o.compare(DD)===1&&(o=new $r([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.ge===0)return!1;const e=xT(t),[r,o]=OT(e);for(let u=0;u<this.hashCount;u++){const h=this.ye(r,o,u);if(!this.we(h))return!1}return!0}static create(t,e,r){const o=t%8==0?0:8-t%8,u=new Uint8Array(Math.ceil(t/8)),h=new Op(u,o,e);return r.forEach((m=>h.insert(m))),h}insert(t){if(this.ge===0)return;const e=xT(t),[r,o]=OT(e);for(let u=0;u<this.hashCount;u++){const h=this.ye(r,o,u);this.Se(h)}}Se(t){const e=Math.floor(t/8),r=t%8;this.bitmap[e]|=1<<r}}class wu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hc{constructor(t,e,r,o,u){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=r,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(t,e,r){const o=new Map;return o.set(t,fc.createSynthesizedTargetChangeForCurrentChange(t,e,r)),new hc(dt.min(),o,new se(bt),bn(),It())}}class fc{constructor(t,e,r,o,u){this.resumeToken=t,this.current=e,this.addedDocuments=r,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(t,e,r){return new fc(r,e,It(),It(),It())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sf{constructor(t,e,r,o){this.be=t,this.removedTargetIds=e,this.key=r,this.De=o}}class ub{constructor(t,e){this.targetId=t,this.Ce=e}}class cb{constructor(t,e,r=_e.EMPTY_BYTE_STRING,o=null){this.state=t,this.targetIds=e,this.resumeToken=r,this.cause=o}}class MT{constructor(){this.ve=0,this.Fe=PT(),this.Me=_e.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(t){t.approximateByteSize()>0&&(this.Oe=!0,this.Me=t)}ke(){let t=It(),e=It(),r=It();return this.Fe.forEach(((o,u)=>{switch(u){case 0:t=t.add(o);break;case 2:e=e.add(o);break;case 1:r=r.add(o);break;default:lt(38017,{changeType:u})}})),new fc(this.Me,this.xe,t,e,r)}qe(){this.Oe=!1,this.Fe=PT()}Qe(t,e){this.Oe=!0,this.Fe=this.Fe.insert(t,e)}$e(t){this.Oe=!0,this.Fe=this.Fe.remove(t)}Ue(){this.ve+=1}Ke(){this.ve-=1,ht(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class VD{constructor(t){this.Ge=t,this.ze=new Map,this.je=bn(),this.Je=Hh(),this.He=Hh(),this.Ye=new se(bt)}Ze(t){for(const e of t.be)t.De&&t.De.isFoundDocument()?this.Xe(e,t.De):this.et(e,t.key,t.De);for(const e of t.removedTargetIds)this.et(e,t.key,t.De)}tt(t){this.forEachTarget(t,(e=>{const r=this.nt(e);switch(t.state){case 0:this.rt(e)&&r.Le(t.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(t.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(e);break;case 3:this.rt(e)&&(r.We(),r.Le(t.resumeToken));break;case 4:this.rt(e)&&(this.it(e),r.Le(t.resumeToken));break;default:lt(56790,{state:t.state})}}))}forEachTarget(t,e){t.targetIds.length>0?t.targetIds.forEach(e):this.ze.forEach(((r,o)=>{this.rt(o)&&e(o)}))}st(t){const e=t.targetId,r=t.Ce.count,o=this.ot(e);if(o){const u=o.target;if(_f(u))if(r===0){const h=new rt(u.path);this.et(e,h,ae.newNoDocument(h,dt.min()))}else ht(r===1,20013,{expectedCount:r});else{const h=this._t(e);if(h!==r){const m=this.ut(t),g=m?this.ct(m,t,h):1;if(g!==0){this.it(e);const _=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(e,_)}}}}}ut(t){const e=t.Ce.unchangedNames;if(!e||!e.bits)return null;const{bits:{bitmap:r="",padding:o=0},hashCount:u=0}=e;let h,m;try{h=lr(r).toUint8Array()}catch(g){if(g instanceof VA)return Ci("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{m=new Op(h,o,u)}catch(g){return Ci(g instanceof wu?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return m.ge===0?null:m}ct(t,e,r){return e.Ce.count===r-this.Pt(t,e.targetId)?0:2}Pt(t,e){const r=this.Ge.getRemoteKeysForTarget(e);let o=0;return r.forEach((u=>{const h=this.Ge.ht(),m=`projects/${h.projectId}/databases/${h.database}/documents/${u.path.canonicalString()}`;t.mightContain(m)||(this.et(e,u,null),o++)})),o}Tt(t){const e=new Map;this.ze.forEach(((u,h)=>{const m=this.ot(h);if(m){if(u.current&&_f(m.target)){const g=new rt(m.target.path);this.It(g).has(h)||this.Et(h,g)||this.et(h,g,ae.newNoDocument(g,t))}u.Be&&(e.set(h,u.ke()),u.qe())}}));let r=It();this.He.forEach(((u,h)=>{let m=!0;h.forEachWhile((g=>{const _=this.ot(g);return!_||_.purpose==="TargetPurposeLimboResolution"||(m=!1,!1)})),m&&(r=r.add(u))})),this.je.forEach(((u,h)=>h.setReadTime(t)));const o=new hc(t,e,this.Ye,this.je,r);return this.je=bn(),this.Je=Hh(),this.He=Hh(),this.Ye=new se(bt),o}Xe(t,e){if(!this.rt(t))return;const r=this.Et(t,e.key)?2:0;this.nt(t).Qe(e.key,r),this.je=this.je.insert(e.key,e),this.Je=this.Je.insert(e.key,this.It(e.key).add(t)),this.He=this.He.insert(e.key,this.dt(e.key).add(t))}et(t,e,r){if(!this.rt(t))return;const o=this.nt(t);this.Et(t,e)?o.Qe(e,1):o.$e(e),this.He=this.He.insert(e,this.dt(e).delete(t)),this.He=this.He.insert(e,this.dt(e).add(t)),r&&(this.je=this.je.insert(e,r))}removeTarget(t){this.ze.delete(t)}_t(t){const e=this.nt(t).ke();return this.Ge.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size}Ue(t){this.nt(t).Ue()}nt(t){let e=this.ze.get(t);return e||(e=new MT,this.ze.set(t,e)),e}dt(t){let e=this.He.get(t);return e||(e=new $t(bt),this.He=this.He.insert(t,e)),e}It(t){let e=this.Je.get(t);return e||(e=new $t(bt),this.Je=this.Je.insert(t,e)),e}rt(t){const e=this.ot(t)!==null;return e||tt("WatchChangeAggregator","Detected inactive target",t),e}ot(t){const e=this.ze.get(t);return e&&e.Ne?null:this.Ge.At(t)}it(t){this.ze.set(t,new MT),this.Ge.getRemoteKeysForTarget(t).forEach((e=>{this.et(t,e,null)}))}Et(t,e){return this.Ge.getRemoteKeysForTarget(t).has(e)}}function Hh(){return new se(rt.comparator)}function PT(){return new se(rt.comparator)}const CD={asc:"ASCENDING",desc:"DESCENDING"},ND={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},xD={and:"AND",or:"OR"};class OD{constructor(t,e){this.databaseId=t,this.useProto3Json=e}}function qg(s,t){return s.useProto3Json||sc(t)?t:{value:t}}function Qo(s,t){return s.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function hb(s,t){return s.useProto3Json?t.toBase64():t.toUint8Array()}function MD(s,t){return Qo(s,t.toTimestamp())}function Ae(s){return ht(!!s,49232),dt.fromTimestamp((function(e){const r=or(e);return new Ht(r.seconds,r.nanos)})(s))}function Mp(s,t){return Fg(s,t).canonicalString()}function Fg(s,t){const e=(function(o){return new Ot(["projects",o.projectId,"databases",o.database])})(s).child("documents");return t===void 0?e:e.child(t)}function fb(s){const t=Ot.fromString(s);return ht(Ab(t),10190,{key:t.toString()}),t}function $u(s,t){return Mp(s.databaseId,t.path)}function Di(s,t){const e=fb(t);if(e.get(1)!==s.databaseId.projectId)throw new J(j.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+e.get(1)+" vs "+s.databaseId.projectId);if(e.get(3)!==s.databaseId.database)throw new J(j.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+e.get(3)+" vs "+s.databaseId.database);return new rt(gb(e))}function db(s,t){return Mp(s.databaseId,t)}function mb(s){const t=fb(s);return t.length===4?Ot.emptyPath():gb(t)}function jg(s){return new Ot(["projects",s.databaseId.projectId,"databases",s.databaseId.database]).canonicalString()}function gb(s){return ht(s.length>4&&s.get(4)==="documents",29091,{key:s.toString()}),s.popFirst(5)}function UT(s,t,e){return{name:$u(s,t),fields:e.value.mapValue.fields}}function pb(s,t,e){const r=Di(s,t.name),o=Ae(t.updateTime),u=t.createTime?Ae(t.createTime):dt.min(),h=new Je({mapValue:{fields:t.fields}}),m=ae.newFoundDocument(r,o,u,h);return e&&m.setHasCommittedMutations(),e?m.setHasCommittedMutations():m}function PD(s,t){return"found"in t?(function(r,o){ht(!!o.found,43571),o.found.name,o.found.updateTime;const u=Di(r,o.found.name),h=Ae(o.found.updateTime),m=o.found.createTime?Ae(o.found.createTime):dt.min(),g=new Je({mapValue:{fields:o.found.fields}});return ae.newFoundDocument(u,h,m,g)})(s,t):"missing"in t?(function(r,o){ht(!!o.missing,3894),ht(!!o.readTime,22933);const u=Di(r,o.missing),h=Ae(o.readTime);return ae.newNoDocument(u,h)})(s,t):lt(7234,{result:t})}function UD(s,t){let e;if("targetChange"in t){t.targetChange;const r=(function(_){return _==="NO_CHANGE"?0:_==="ADD"?1:_==="REMOVE"?2:_==="CURRENT"?3:_==="RESET"?4:lt(39313,{state:_})})(t.targetChange.targetChangeType||"NO_CHANGE"),o=t.targetChange.targetIds||[],u=(function(_,E){return _.useProto3Json?(ht(E===void 0||typeof E=="string",58123),_e.fromBase64String(E||"")):(ht(E===void 0||E instanceof Buffer||E instanceof Uint8Array,16193),_e.fromUint8Array(E||new Uint8Array))})(s,t.targetChange.resumeToken),h=t.targetChange.cause,m=h&&(function(_){const E=_.code===void 0?j.UNKNOWN:ob(_.code);return new J(E,_.message||"")})(h);e=new cb(r,o,u,m||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const o=Di(s,r.document.name),u=Ae(r.document.updateTime),h=r.document.createTime?Ae(r.document.createTime):dt.min(),m=new Je({mapValue:{fields:r.document.fields}}),g=ae.newFoundDocument(o,u,h,m),_=r.targetIds||[],E=r.removedTargetIds||[];e=new sf(_,E,g.key,g)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const o=Di(s,r.document),u=r.readTime?Ae(r.readTime):dt.min(),h=ae.newNoDocument(o,u),m=r.removedTargetIds||[];e=new sf([],m,h.key,h)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const o=Di(s,r.document),u=r.removedTargetIds||[];e=new sf([],u,o,null)}else{if(!("filter"in t))return lt(11601,{Rt:t});{t.filter;const r=t.filter;r.targetId;const{count:o=0,unchangedNames:u}=r,h=new RD(o,u),m=r.targetId;e=new ub(m,h)}}return e}function Zu(s,t){let e;if(t instanceof nl)e={update:UT(s,t.key,t.value)};else if(t instanceof il)e={delete:$u(s,t.key)};else if(t instanceof hr)e={update:UT(s,t.key,t.data),updateMask:FD(t.fieldMask)};else{if(!(t instanceof Vp))return lt(16599,{Vt:t.type});e={verify:$u(s,t.key)}}return t.fieldTransforms.length>0&&(e.updateTransforms=t.fieldTransforms.map((r=>(function(u,h){const m=h.transform;if(m instanceof Go)return{fieldPath:h.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof da)return{fieldPath:h.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof ma)return{fieldPath:h.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof Ho)return{fieldPath:h.field.canonicalString(),increment:m.Ae};throw lt(20930,{transform:h.transform})})(0,r)))),t.precondition.isNone||(e.currentDocument=(function(o,u){return u.updateTime!==void 0?{updateTime:MD(o,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:lt(27497)})(s,t.precondition)),e}function Gg(s,t){const e=t.currentDocument?(function(u){return u.updateTime!==void 0?he.updateTime(Ae(u.updateTime)):u.exists!==void 0?he.exists(u.exists):he.none()})(t.currentDocument):he.none(),r=t.updateTransforms?t.updateTransforms.map((o=>(function(h,m){let g=null;if("setToServerValue"in m)ht(m.setToServerValue==="REQUEST_TIME",16630,{proto:m}),g=new Go;else if("appendMissingElements"in m){const E=m.appendMissingElements.values||[];g=new da(E)}else if("removeAllFromArray"in m){const E=m.removeAllFromArray.values||[];g=new ma(E)}else"increment"in m?g=new Ho(h,m.increment):lt(16584,{proto:m});const _=ce.fromServerFormat(m.fieldPath);return new cc(_,g)})(s,o))):[];if(t.update){t.update.name;const o=Di(s,t.update.name),u=new Je({mapValue:{fields:t.update.fields}});if(t.updateMask){const h=(function(g){const _=g.fieldPaths||[];return new An(_.map((E=>ce.fromServerFormat(E))))})(t.updateMask);return new hr(o,u,h,e,r)}return new nl(o,u,e,r)}if(t.delete){const o=Di(s,t.delete);return new il(o,e)}if(t.verify){const o=Di(s,t.verify);return new Vp(o,e)}return lt(1463,{proto:t})}function LD(s,t){return s&&s.length>0?(ht(t!==void 0,14353),s.map((e=>(function(o,u){let h=o.updateTime?Ae(o.updateTime):Ae(u);return h.isEqual(dt.min())&&(h=Ae(u)),new SD(h,o.transformResults||[])})(e,t)))):[]}function _b(s,t){return{documents:[db(s,t.path)]}}function yb(s,t){const e={structuredQuery:{}},r=t.path;let o;t.collectionGroup!==null?(o=r,e.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(o=r.popLast(),e.structuredQuery.from=[{collectionId:r.lastSegment()}]),e.parent=db(s,o);const u=(function(_){if(_.length!==0)return Tb(Xt.create(_,"and"))})(t.filters);u&&(e.structuredQuery.where=u);const h=(function(_){if(_.length!==0)return _.map((E=>(function(S){return{field:Io(S.field),direction:kD(S.dir)}})(E)))})(t.orderBy);h&&(e.structuredQuery.orderBy=h);const m=qg(s,t.limit);return m!==null&&(e.structuredQuery.limit=m),t.startAt&&(e.structuredQuery.startAt=(function(_){return{before:_.inclusive,values:_.position}})(t.startAt)),t.endAt&&(e.structuredQuery.endAt=(function(_){return{before:!_.inclusive,values:_.position}})(t.endAt)),{ft:e,parent:o}}function vb(s){let t=mb(s.parent);const e=s.structuredQuery,r=e.from?e.from.length:0;let o=null;if(r>0){ht(r===1,65062);const E=e.from[0];E.allDescendants?o=E.collectionId:t=t.child(E.collectionId)}let u=[];e.where&&(u=(function(A){const S=Eb(A);return S instanceof Xt&&wp(S)?S.getFilters():[S]})(e.where));let h=[];e.orderBy&&(h=(function(A){return A.map((S=>(function(H){return new Xu(Ro(H.field),(function(Y){switch(Y){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(H.direction))})(S)))})(e.orderBy));let m=null;e.limit&&(m=(function(A){let S;return S=typeof A=="object"?A.value:A,sc(S)?null:S})(e.limit));let g=null;e.startAt&&(g=(function(A){const S=!!A.before,O=A.values||[];return new ss(O,S)})(e.startAt));let _=null;return e.endAt&&(_=(function(A){const S=!A.before,O=A.values||[];return new ss(O,S)})(e.endAt)),HA(t,o,h,u,m,"F",g,_)}function BD(s,t){const e=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return lt(28987,{purpose:o})}})(t.purpose);return e==null?null:{"goog-listen-tags":e}}function Eb(s){return s.unaryFilter!==void 0?(function(e){switch(e.unaryFilter.op){case"IS_NAN":const r=Ro(e.unaryFilter.field);return Mt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const o=Ro(e.unaryFilter.field);return Mt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=Ro(e.unaryFilter.field);return Mt.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const h=Ro(e.unaryFilter.field);return Mt.create(h,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return lt(61313);default:return lt(60726)}})(s):s.fieldFilter!==void 0?(function(e){return Mt.create(Ro(e.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return lt(58110);default:return lt(50506)}})(e.fieldFilter.op),e.fieldFilter.value)})(s):s.compositeFilter!==void 0?(function(e){return Xt.create(e.compositeFilter.filters.map((r=>Eb(r))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return lt(1026)}})(e.compositeFilter.op))})(s):lt(30097,{filter:s})}function kD(s){return CD[s]}function zD(s){return ND[s]}function qD(s){return xD[s]}function Io(s){return{fieldPath:s.canonicalString()}}function Ro(s){return ce.fromServerFormat(s.fieldPath)}function Tb(s){return s instanceof Mt?(function(e){if(e.op==="=="){if(ET(e.value))return{unaryFilter:{field:Io(e.field),op:"IS_NAN"}};if(vT(e.value))return{unaryFilter:{field:Io(e.field),op:"IS_NULL"}}}else if(e.op==="!="){if(ET(e.value))return{unaryFilter:{field:Io(e.field),op:"IS_NOT_NAN"}};if(vT(e.value))return{unaryFilter:{field:Io(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Io(e.field),op:zD(e.op),value:e.value}}})(s):s instanceof Xt?(function(e){const r=e.getFilters().map((o=>Tb(o)));return r.length===1?r[0]:{compositeFilter:{op:qD(e.op),filters:r}}})(s):lt(54877,{filter:s})}function FD(s){const t=[];return s.fields.forEach((e=>t.push(e.canonicalString()))),{fieldPaths:t}}function Ab(s){return s.length>=4&&s.get(0)==="projects"&&s.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rr{constructor(t,e,r,o,u=dt.min(),h=dt.min(),m=_e.EMPTY_BYTE_STRING,g=null){this.target=t,this.targetId=e,this.purpose=r,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=h,this.resumeToken=m,this.expectedCount=g}withSequenceNumber(t){return new rr(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,e){return new rr(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new rr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new rr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bb{constructor(t){this.yt=t}}function jD(s,t){let e;if(t.document)e=pb(s.yt,t.document,!!t.hasCommittedMutations);else if(t.noDocument){const r=rt.fromSegments(t.noDocument.path),o=pa(t.noDocument.readTime);e=ae.newNoDocument(r,o),t.hasCommittedMutations&&e.setHasCommittedMutations()}else{if(!t.unknownDocument)return lt(56709);{const r=rt.fromSegments(t.unknownDocument.path),o=pa(t.unknownDocument.version);e=ae.newUnknownDocument(r,o)}}return t.readTime&&e.setReadTime((function(o){const u=new Ht(o[0],o[1]);return dt.fromTimestamp(u)})(t.readTime)),e}function LT(s,t){const e=t.key,r={prefixPath:e.getCollectionPath().popLast().toArray(),collectionGroup:e.collectionGroup,documentId:e.path.lastSegment(),readTime:Ef(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=(function(u,h){return{name:$u(u,h.key),fields:h.data.value.mapValue.fields,updateTime:Qo(u,h.version.toTimestamp()),createTime:Qo(u,h.createTime.toTimestamp())}})(s.yt,t);else if(t.isNoDocument())r.noDocument={path:e.path.toArray(),readTime:ga(t.version)};else{if(!t.isUnknownDocument())return lt(57904,{document:t});r.unknownDocument={path:e.path.toArray(),version:ga(t.version)}}return r}function Ef(s){const t=s.toTimestamp();return[t.seconds,t.nanoseconds]}function ga(s){const t=s.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function pa(s){const t=new Ht(s.seconds,s.nanoseconds);return dt.fromTimestamp(t)}function na(s,t){const e=(t.baseMutations||[]).map((u=>Gg(s.yt,u)));for(let u=0;u<t.mutations.length-1;++u){const h=t.mutations[u];if(u+1<t.mutations.length&&t.mutations[u+1].transform!==void 0){const m=t.mutations[u+1];h.updateTransforms=m.transform.fieldTransforms,t.mutations.splice(u+1,1),++u}}const r=t.mutations.map((u=>Gg(s.yt,u))),o=Ht.fromMillis(t.localWriteTimeMs);return new Cp(t.batchId,o,e,r)}function Iu(s){const t=pa(s.readTime),e=s.lastLimboFreeSnapshotVersion!==void 0?pa(s.lastLimboFreeSnapshotVersion):dt.min();let r;return r=(function(u){return u.documents!==void 0})(s.query)?(function(u){const h=u.documents.length;return ht(h===1,1966,{count:h}),gn(el(mb(u.documents[0])))})(s.query):(function(u){return gn(vb(u))})(s.query),new rr(r,s.targetId,"TargetPurposeListen",s.lastListenSequenceNumber,t,e,_e.fromBase64String(s.resumeToken))}function Sb(s,t){const e=ga(t.snapshotVersion),r=ga(t.lastLimboFreeSnapshotVersion);let o;o=_f(t.target)?_b(s.yt,t.target):yb(s.yt,t.target).ft;const u=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:fa(t.target),readTime:e,resumeToken:u,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:o}}function Pp(s){const t=vb({parent:s.parent,structuredQuery:s.structuredQuery});return s.limitType==="LAST"?vf(t,t.limit,"L"):t}function gg(s,t){return new xp(t.largestBatchId,Gg(s.yt,t.overlayMutation))}function BT(s,t){const e=t.path.lastSegment();return[s,on(t.path.popLast()),e]}function kT(s,t,e,r){return{indexId:s,uid:t,sequenceNumber:e,readTime:ga(r.readTime),documentKey:on(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GD{getBundleMetadata(t,e){return zT(t).get(e).next((r=>{if(r)return(function(u){return{id:u.bundleId,createTime:pa(u.createTime),version:u.version}})(r)}))}saveBundleMetadata(t,e){return zT(t).put((function(o){return{bundleId:o.id,createTime:ga(Ae(o.createTime)),version:o.version}})(e))}getNamedQuery(t,e){return qT(t).get(e).next((r=>{if(r)return(function(u){return{name:u.name,query:Pp(u.bundledQuery),readTime:pa(u.readTime)}})(r)}))}saveNamedQuery(t,e){return qT(t).put((function(o){return{name:o.name,readTime:ga(Ae(o.readTime)),bundledQuery:o.bundledQuery}})(e))}}function zT(s){return Ue(s,Of)}function qT(s){return Ue(s,Mf)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qf{constructor(t,e){this.serializer=t,this.userId=e}static wt(t,e){const r=e.uid||"";return new qf(t,r)}getOverlay(t,e){return yu(t).get(BT(this.userId,e)).next((r=>r?gg(this.serializer,r):null))}getOverlays(t,e){const r=Ii();return B.forEach(e,(o=>this.getOverlay(t,o).next((u=>{u!==null&&r.set(o,u)})))).next((()=>r))}saveOverlays(t,e,r){const o=[];return r.forEach(((u,h)=>{const m=new xp(e,h);o.push(this.St(t,m))})),B.waitFor(o)}removeOverlaysForBatchId(t,e,r){const o=new Set;e.forEach((h=>o.add(on(h.getCollectionPath()))));const u=[];return o.forEach((h=>{const m=IDBKeyRange.bound([this.userId,h,r],[this.userId,h,r+1],!1,!0);u.push(yu(t).Z(xg,m))})),B.waitFor(u)}getOverlaysForCollection(t,e,r){const o=Ii(),u=on(e),h=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,Number.POSITIVE_INFINITY],!0);return yu(t).J(xg,h).next((m=>{for(const g of m){const _=gg(this.serializer,g);o.set(_.getKey(),_)}return o}))}getOverlaysForCollectionGroup(t,e,r,o){const u=Ii();let h;const m=IDBKeyRange.bound([this.userId,e,r],[this.userId,e,Number.POSITIVE_INFINITY],!0);return yu(t).ee({index:bA,range:m},((g,_,E)=>{const A=gg(this.serializer,_);u.size()<o||A.largestBatchId===h?(u.set(A.getKey(),A),h=A.largestBatchId):E.done()})).next((()=>u))}St(t,e){return yu(t).put((function(o,u,h){const[m,g,_]=BT(u,h.mutation.key);return{userId:u,collectionPath:g,documentId:_,collectionGroup:h.mutation.key.getCollectionGroup(),largestBatchId:h.largestBatchId,overlayMutation:Zu(o.yt,h.mutation)}})(this.serializer,this.userId,e))}}function yu(s){return Ue(s,Pf)}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HD{bt(t){return Ue(t,Tp)}getSessionToken(t){return this.bt(t).get("sessionToken").next((e=>{const r=e==null?void 0:e.value;return r?_e.fromUint8Array(r):_e.EMPTY_BYTE_STRING}))}setSessionToken(t,e){return this.bt(t).put({name:"sessionToken",value:e.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ia{constructor(){}Dt(t,e){this.Ct(t,e),e.vt()}Ct(t,e){if("nullValue"in t)this.Ft(e,5);else if("booleanValue"in t)this.Ft(e,10),e.Mt(t.booleanValue?1:0);else if("integerValue"in t)this.Ft(e,15),e.Mt(ue(t.integerValue));else if("doubleValue"in t){const r=ue(t.doubleValue);isNaN(r)?this.Ft(e,13):(this.Ft(e,15),Fu(r)?e.Mt(0):e.Mt(r))}else if("timestampValue"in t){let r=t.timestampValue;this.Ft(e,20),typeof r=="string"&&(r=or(r)),e.xt(`${r.seconds||""}`),e.Mt(r.nanos||0)}else if("stringValue"in t)this.Ot(t.stringValue,e),this.Nt(e);else if("bytesValue"in t)this.Ft(e,30),e.Bt(lr(t.bytesValue)),this.Nt(e);else if("referenceValue"in t)this.Lt(t.referenceValue,e);else if("geoPointValue"in t){const r=t.geoPointValue;this.Ft(e,45),e.Mt(r.latitude||0),e.Mt(r.longitude||0)}else"mapValue"in t?PA(t)?this.Ft(e,Number.MAX_SAFE_INTEGER):Bf(t)?this.kt(t.mapValue,e):(this.qt(t.mapValue,e),this.Nt(e)):"arrayValue"in t?(this.Qt(t.arrayValue,e),this.Nt(e)):lt(19022,{$t:t})}Ot(t,e){this.Ft(e,25),this.Ut(t,e)}Ut(t,e){e.xt(t)}qt(t,e){const r=t.fields||{};this.Ft(e,55);for(const o of Object.keys(r))this.Ot(o,e),this.Ct(r[o],e)}kt(t,e){var h,m;const r=t.fields||{};this.Ft(e,53);const o=qo,u=((m=(h=r[o].arrayValue)==null?void 0:h.values)==null?void 0:m.length)||0;this.Ft(e,15),e.Mt(ue(u)),this.Ot(o,e),this.Ct(r[o],e)}Qt(t,e){const r=t.values||[];this.Ft(e,50);for(const o of r)this.Ct(o,e)}Lt(t,e){this.Ft(e,37),rt.fromName(t).path.forEach((r=>{this.Ft(e,60),this.Ut(r,e)}))}Ft(t,e){t.Mt(e)}Nt(t){t.Mt(2)}}ia.Kt=new ia;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law | agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES | CONDITIONS OF ANY KIND, either express | implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eo=255;function QD(s){if(s===0)return 8;let t=0;return s>>4||(t+=4,s<<=4),s>>6||(t+=2,s<<=2),s>>7||(t+=1),t}function FT(s){const t=64-(function(r){let o=0;for(let u=0;u<8;++u){const h=QD(255&r[u]);if(o+=h,h!==8)break}return o})(s);return Math.ceil(t/8)}class KD{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Wt(t){const e=t[Symbol.iterator]();let r=e.next();for(;!r.done;)this.Gt(r.value),r=e.next();this.zt()}jt(t){const e=t[Symbol.iterator]();let r=e.next();for(;!r.done;)this.Jt(r.value),r=e.next();this.Ht()}Yt(t){for(const e of t){const r=e.charCodeAt(0);if(r<128)this.Gt(r);else if(r<2048)this.Gt(960|r>>>6),this.Gt(128|63&r);else if(e<"\uD800"||"\uDBFF"<e)this.Gt(480|r>>>12),this.Gt(128|63&r>>>6),this.Gt(128|63&r);else{const o=e.codePointAt(0);this.Gt(240|o>>>18),this.Gt(128|63&o>>>12),this.Gt(128|63&o>>>6),this.Gt(128|63&o)}}this.zt()}Zt(t){for(const e of t){const r=e.charCodeAt(0);if(r<128)this.Jt(r);else if(r<2048)this.Jt(960|r>>>6),this.Jt(128|63&r);else if(e<"\uD800"||"\uDBFF"<e)this.Jt(480|r>>>12),this.Jt(128|63&r>>>6),this.Jt(128|63&r);else{const o=e.codePointAt(0);this.Jt(240|o>>>18),this.Jt(128|63&o>>>12),this.Jt(128|63&o>>>6),this.Jt(128|63&o)}}this.Ht()}Xt(t){const e=this.en(t),r=FT(e);this.tn(1+r),this.buffer[this.position++]=255&r;for(let o=e.length-r;o<e.length;++o)this.buffer[this.position++]=255&e[o]}nn(t){const e=this.en(t),r=FT(e);this.tn(1+r),this.buffer[this.position++]=~(255&r);for(let o=e.length-r;o<e.length;++o)this.buffer[this.position++]=~(255&e[o])}rn(){this.sn(Eo),this.sn(255)}_n(){this.an(Eo),this.an(255)}reset(){this.position=0}seed(t){this.tn(t.length),this.buffer.set(t,this.position),this.position+=t.length}un(){return this.buffer.slice(0,this.position)}en(t){const e=(function(u){const h=new DataView(new ArrayBuffer(8));return h.setFloat64(0,u,!1),new Uint8Array(h.buffer)})(t),r=!!(128&e[0]);e[0]^=r?255:128;for(let o=1;o<e.length;++o)e[o]^=r?255:0;return e}Gt(t){const e=255&t;e===0?(this.sn(0),this.sn(255)):e===Eo?(this.sn(Eo),this.sn(0)):this.sn(e)}Jt(t){const e=255&t;e===0?(this.an(0),this.an(255)):e===Eo?(this.an(Eo),this.an(0)):this.an(t)}zt(){this.sn(0),this.sn(1)}Ht(){this.an(0),this.an(1)}sn(t){this.tn(1),this.buffer[this.position++]=t}an(t){this.tn(1),this.buffer[this.position++]=~t}tn(t){const e=t+this.position;if(e<=this.buffer.length)return;let r=2*this.buffer.length;r<e&&(r=e);const o=new Uint8Array(r);o.set(this.buffer),this.buffer=o}}class YD{constructor(t){this.cn=t}Bt(t){this.cn.Wt(t)}xt(t){this.cn.Yt(t)}Mt(t){this.cn.Xt(t)}vt(){this.cn.rn()}}class XD{constructor(t){this.cn=t}Bt(t){this.cn.jt(t)}xt(t){this.cn.Zt(t)}Mt(t){this.cn.nn(t)}vt(){this.cn._n()}}class vu{constructor(){this.cn=new KD,this.ln=new YD(this.cn),this.hn=new XD(this.cn)}seed(t){this.cn.seed(t)}Pn(t){return t===0?this.ln:this.hn}un(){return this.cn.un()}reset(){this.cn.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ra{constructor(t,e,r,o){this.Tn=t,this.In=e,this.En=r,this.dn=o}An(){const t=this.dn.length,e=t===0||this.dn[t-1]===255?t+1:t,r=new Uint8Array(e);return r.set(this.dn,0),e!==t?r.set([0],this.dn.length):++r[r.length-1],new ra(this.Tn,this.In,this.En,r)}Rn(t,e,r){return{indexId:this.Tn,uid:t,arrayValue:af(this.En),directionalValue:af(this.dn),orderedDocumentKey:af(e),documentKey:r.path.toArray()}}Vn(t,e,r){const o=this.Rn(t,e,r);return[o.indexId,o.uid,o.arrayValue,o.directionalValue,o.orderedDocumentKey,o.documentKey]}}function Fr(s,t){let e=s.Tn-t.Tn;return e!==0?e:(e=jT(s.En,t.En),e!==0?e:(e=jT(s.dn,t.dn),e!==0?e:rt.comparator(s.In,t.In)))}function jT(s,t){for(let e=0;e<s.length&&e<t.length;++e){const r=s[e]-t[e];if(r!==0)return r}return s.length-t.length}function af(s){return B0()?(function(e){let r="";for(let o=0;o<e.length;o++)r+=String.fromCharCode(e[o]);return r})(s):s}function GT(s){return typeof s!="string"?s:(function(e){const r=new Uint8Array(e.length);for(let o=0;o<e.length;o++)r[o]=e.charCodeAt(o);return r})(s)}class HT{constructor(t){this.mn=new $t(((e,r)=>ce.comparator(e.field,r.field))),this.collectionId=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment(),this.fn=t.orderBy,this.gn=[];for(const e of t.filters){const r=e;r.isInequality()?this.mn=this.mn.add(r):this.gn.push(r)}}get pn(){return this.mn.size>1}yn(t){if(ht(t.collectionGroup===this.collectionId,49279),this.pn)return!1;const e=Vg(t);if(e!==void 0&&!this.wn(e))return!1;const r=Ws(t);let o=new Set,u=0,h=0;for(;u<r.length&&this.wn(r[u]);++u)o=o.add(r[u].fieldPath.canonicalString());if(u===r.length)return!0;if(this.mn.size>0){const m=this.mn.getIterator().getNext();if(!o.has(m.field.canonicalString())){const g=r[u];if(!this.Sn(m,g)||!this.bn(this.fn[h++],g))return!1}++u}for(;u<r.length;++u){const m=r[u];if(h>=this.fn.length||!this.bn(this.fn[h++],m))return!1}return!0}Dn(){if(this.pn)return null;let t=new $t(ce.comparator);const e=[];for(const r of this.gn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")e.push(new Zh(r.field,2));else{if(t.has(r.field))continue;t=t.add(r.field),e.push(new Zh(r.field,0))}for(const r of this.fn)r.field.isKeyField()||t.has(r.field)||(t=t.add(r.field),e.push(new Zh(r.field,r.dir==="asc"?0:1)));return new df(df.UNKNOWN_ID,this.collectionId,e,qu.empty())}wn(t){for(const e of this.gn)if(this.Sn(e,t))return!0;return!1}Sn(t,e){if(t===void 0||!t.field.isEqual(e.fieldPath))return!1;const r=t.op==="array-contains"||t.op==="array-contains-any";return e.kind===2===r}bn(t,e){return!!t.field.isEqual(e.fieldPath)&&(e.kind===0&&t.dir==="asc"||e.kind===1&&t.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wb(s){var e,r;if(ht(s instanceof Mt||s instanceof Xt,20012),s instanceof Mt){if(s instanceof GA){const o=((r=(e=s.value.arrayValue)==null?void 0:e.values)==null?void 0:r.map((u=>Mt.create(s.field,"==",u))))||[];return Xt.create(o,"or")}return s}const t=s.filters.map((o=>wb(o)));return Xt.create(t,s.op)}function $D(s){if(s.getFilters().length===0)return[];const t=Kg(wb(s));return ht(Ib(t),7391),Hg(t)||Qg(t)?[t]:t.getFilters()}function Hg(s){return s instanceof Mt}function Qg(s){return s instanceof Xt&&wp(s)}function Ib(s){return Hg(s)||Qg(s)||(function(e){if(e instanceof Xt&&Lg(e)){for(const r of e.getFilters())if(!Hg(r)&&!Qg(r))return!1;return!0}return!1})(s)}function Kg(s){if(ht(s instanceof Mt||s instanceof Xt,34018),s instanceof Mt)return s;if(s.filters.length===1)return Kg(s.filters[0]);const t=s.filters.map((r=>Kg(r)));let e=Xt.create(t,s.op);return e=Tf(e),Ib(e)?e:(ht(e instanceof Xt,64498),ht(jo(e),40251),ht(e.filters.length>1,57927),e.filters.reduce(((r,o)=>Up(r,o))))}function Up(s,t){let e;return ht(s instanceof Mt||s instanceof Xt,38388),ht(t instanceof Mt||t instanceof Xt,25473),e=s instanceof Mt?t instanceof Mt?(function(o,u){return Xt.create([o,u],"and")})(s,t):QT(s,t):t instanceof Mt?QT(t,s):(function(o,u){if(ht(o.filters.length>0&&u.filters.length>0,48005),jo(o)&&jo(u))return qA(o,u.getFilters());const h=Lg(o)?o:u,m=Lg(o)?u:o,g=h.filters.map((_=>Up(_,m)));return Xt.create(g,"or")})(s,t),Tf(e)}function QT(s,t){if(jo(t))return qA(t,s.getFilters());{const e=t.filters.map((r=>Up(s,r)));return Xt.create(e,"or")}}function Tf(s){if(ht(s instanceof Mt||s instanceof Xt,11850),s instanceof Mt)return s;const t=s.getFilters();if(t.length===1)return Tf(t[0]);if(kA(s))return s;const e=t.map((o=>Tf(o))),r=[];return e.forEach((o=>{o instanceof Mt?r.push(o):o instanceof Xt&&(o.op===s.op?r.push(...o.filters):r.push(o))})),r.length===1?r[0]:Xt.create(r,s.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZD{constructor(){this.Cn=new Lp}addToCollectionParentIndex(t,e){return this.Cn.add(e),B.resolve()}getCollectionParents(t,e){return B.resolve(this.Cn.getEntries(e))}addFieldIndex(t,e){return B.resolve()}deleteFieldIndex(t,e){return B.resolve()}deleteAllFieldIndexes(t){return B.resolve()}createTargetIndexes(t,e){return B.resolve()}getDocumentsMatchingTarget(t,e){return B.resolve(null)}getIndexType(t,e){return B.resolve(0)}getFieldIndexes(t,e){return B.resolve([])}getNextCollectionGroupToUpdate(t){return B.resolve(null)}getMinOffset(t,e){return B.resolve(Pn.min())}getMinOffsetFromCollectionGroup(t,e){return B.resolve(Pn.min())}updateCollectionGroup(t,e,r){return B.resolve()}updateIndexEntries(t,e){return B.resolve()}}class Lp{constructor(){this.index={}}add(t){const e=t.lastSegment(),r=t.popLast(),o=this.index[e]||new $t(Ot.comparator),u=!o.has(r);return this.index[e]=o.add(r),u}has(t){const e=t.lastSegment(),r=t.popLast(),o=this.index[e];return o&&o.has(r)}getEntries(t){return(this.index[t]||new $t(Ot.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KT="IndexedDbIndexManager",Qh=new Uint8Array(0);class JD{constructor(t,e){this.databaseId=e,this.vn=new Lp,this.Fn=new cr((r=>fa(r)),((r,o)=>oc(r,o))),this.uid=t.uid||""}addToCollectionParentIndex(t,e){if(!this.vn.has(e)){const r=e.lastSegment(),o=e.popLast();t.addOnCommittedListener((()=>{this.vn.add(e)}));const u={collectionId:r,parent:on(o)};return YT(t).put(u)}return B.resolve()}getCollectionParents(t,e){const r=[],o=IDBKeyRange.bound([e,""],[lA(e),""],!1,!0);return YT(t).J(o).next((u=>{for(const h of u){if(h.collectionId!==e)break;r.push(wi(h.parent))}return r}))}addFieldIndex(t,e){const r=Eu(t),o=(function(m){return{indexId:m.indexId,collectionGroup:m.collectionGroup,fields:m.fields.map((g=>[g.fieldPath.canonicalString(),g.kind]))}})(e);delete o.indexId;const u=r.add(o);if(e.indexState){const h=Ao(t);return u.next((m=>{h.put(kT(m,this.uid,e.indexState.sequenceNumber,e.indexState.offset))}))}return u.next()}deleteFieldIndex(t,e){const r=Eu(t),o=Ao(t),u=To(t);return r.delete(e.indexId).next((()=>o.delete(IDBKeyRange.bound([e.indexId],[e.indexId+1],!1,!0)))).next((()=>u.delete(IDBKeyRange.bound([e.indexId],[e.indexId+1],!1,!0))))}deleteAllFieldIndexes(t){const e=Eu(t),r=To(t),o=Ao(t);return e.Z().next((()=>r.Z())).next((()=>o.Z()))}createTargetIndexes(t,e){return B.forEach(this.Mn(e),(r=>this.getIndexType(t,r).next((o=>{if(o===0||o===1){const u=new HT(r).Dn();if(u!=null)return this.addFieldIndex(t,u)}}))))}getDocumentsMatchingTarget(t,e){const r=To(t);let o=!0;const u=new Map;return B.forEach(this.Mn(e),(h=>this.xn(t,h).next((m=>{o&&(o=!!m),u.set(h,m)})))).next((()=>{if(o){let h=It();const m=[];return B.forEach(u,((g,_)=>{tt(KT,`Using index ${(function(it){return`id=${it.indexId}|cg=${it.collectionGroup}|f=${it.fields.map((St=>`${St.fieldPath}:${St.kind}`)).join(",")}`})(g)} to execute ${fa(e)}`);const E=(function(it,St){const ft=Vg(St);if(ft===void 0)return null;for(const Tt of yf(it,ft.fieldPath))switch(Tt.op){case"array-contains-any":return Tt.value.arrayValue.values||[];case"array-contains":return[Tt.value]}return null})(_,g),A=(function(it,St){const ft=new Map;for(const Tt of Ws(St))for(const N of yf(it,Tt.fieldPath))switch(N.op){case"==":case"in":ft.set(Tt.fieldPath.canonicalString(),N.value);break;case"not-in":case"!=":return ft.set(Tt.fieldPath.canonicalString(),N.value),Array.from(ft.values())}return null})(_,g),S=(function(it,St){const ft=[];let Tt=!0;for(const N of Ws(St)){const w=N.kind===0?wT(it,N.fieldPath,it.startAt):IT(it,N.fieldPath,it.startAt);ft.push(w.value),Tt&&(Tt=w.inclusive)}return new ss(ft,Tt)})(_,g),O=(function(it,St){const ft=[];let Tt=!0;for(const N of Ws(St)){const w=N.kind===0?IT(it,N.fieldPath,it.endAt):wT(it,N.fieldPath,it.endAt);ft.push(w.value),Tt&&(Tt=w.inclusive)}return new ss(ft,Tt)})(_,g),H=this.On(g,_,S),Z=this.On(g,_,O),Y=this.Nn(g,_,A),mt=this.Bn(g.indexId,E,H,S.inclusive,Z,O.inclusive,Y);return B.forEach(mt,(ut=>r.Y(ut,e.limit).next((it=>{it.forEach((St=>{const ft=rt.fromSegments(St.documentKey);h.has(ft)||(h=h.add(ft),m.push(ft))}))}))))})).next((()=>m))}return B.resolve(null)}))}Mn(t){let e=this.Fn.get(t);return e||(t.filters.length===0?e=[t]:e=$D(Xt.create(t.filters,"and")).map((r=>kg(t.path,t.collectionGroup,t.orderBy,r.getFilters(),t.limit,t.startAt,t.endAt))),this.Fn.set(t,e),e)}Bn(t,e,r,o,u,h,m){const g=(e!=null?e.length:1)*Math.max(r.length,u.length),_=g/(e!=null?e.length:1),E=[];for(let A=0;A<g;++A){const S=e?this.Ln(e[A/_]):Qh,O=this.kn(t,S,r[A%_],o),H=this.qn(t,S,u[A%_],h),Z=m.map((Y=>this.kn(t,S,Y,!0)));E.push(...this.createRange(O,H,Z))}return E}kn(t,e,r,o){const u=new ra(t,rt.empty(),e,r);return o?u:u.An()}qn(t,e,r,o){const u=new ra(t,rt.empty(),e,r);return o?u.An():u}xn(t,e){const r=new HT(e),o=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment();return this.getFieldIndexes(t,o).next((u=>{let h=null;for(const m of u)r.yn(m)&&(!h||m.fields.length>h.fields.length)&&(h=m);return h}))}getIndexType(t,e){let r=2;const o=this.Mn(e);return B.forEach(o,(u=>this.xn(t,u).next((h=>{h?r!==0&&h.fields.length<(function(g){let _=new $t(ce.comparator),E=!1;for(const A of g.filters)for(const S of A.getFlattenedFilters())S.field.isKeyField()||(S.op==="array-contains"||S.op==="array-contains-any"?E=!0:_=_.add(S.field));for(const A of g.orderBy)A.field.isKeyField()||(_=_.add(A.field));return _.size+(E?1:0)})(u)&&(r=1):r=0})))).next((()=>(function(h){return h.limit!==null})(e)&&o.length>1&&r===2?1:r))}Qn(t,e){const r=new vu;for(const o of Ws(t)){const u=e.data.field(o.fieldPath);if(u==null)return null;const h=r.Pn(o.kind);ia.Kt.Dt(u,h)}return r.un()}Ln(t){const e=new vu;return ia.Kt.Dt(t,e.Pn(0)),e.un()}$n(t,e){const r=new vu;return ia.Kt.Dt(ha(this.databaseId,e),r.Pn((function(u){const h=Ws(u);return h.length===0?0:h[h.length-1].kind})(t))),r.un()}Nn(t,e,r){if(r===null)return[];let o=[];o.push(new vu);let u=0;for(const h of Ws(t)){const m=r[u++];for(const g of o)if(this.Un(e,h.fieldPath)&&Yu(m))o=this.Kn(o,h,m);else{const _=g.Pn(h.kind);ia.Kt.Dt(m,_)}}return this.Wn(o)}On(t,e,r){return this.Nn(t,e,r.position)}Wn(t){const e=[];for(let r=0;r<t.length;++r)e[r]=t[r].un();return e}Kn(t,e,r){const o=[...t],u=[];for(const h of r.arrayValue.values||[])for(const m of o){const g=new vu;g.seed(m.un()),ia.Kt.Dt(h,g.Pn(e.kind)),u.push(g)}return u}Un(t,e){return!!t.filters.find((r=>r instanceof Mt&&r.field.isEqual(e)&&(r.op==="in"||r.op==="not-in")))}getFieldIndexes(t,e){const r=Eu(t),o=Ao(t);return(e?r.J(Ng,IDBKeyRange.bound(e,e)):r.J()).next((u=>{const h=[];return B.forEach(u,(m=>o.get([m.indexId,this.uid]).next((g=>{h.push((function(E,A){const S=A?new qu(A.sequenceNumber,new Pn(pa(A.readTime),new rt(wi(A.documentKey)),A.largestBatchId)):qu.empty(),O=E.fields.map((([H,Z])=>new Zh(ce.fromServerFormat(H),Z)));return new df(E.indexId,E.collectionGroup,O,S)})(m,g))})))).next((()=>h))}))}getNextCollectionGroupToUpdate(t){return this.getFieldIndexes(t).next((e=>e.length===0?null:(e.sort(((r,o)=>{const u=r.indexState.sequenceNumber-o.indexState.sequenceNumber;return u!==0?u:bt(r.collectionGroup,o.collectionGroup)})),e[0].collectionGroup)))}updateCollectionGroup(t,e,r){const o=Eu(t),u=Ao(t);return this.Gn(t).next((h=>o.J(Ng,IDBKeyRange.bound(e,e)).next((m=>B.forEach(m,(g=>u.put(kT(g.indexId,this.uid,h,r))))))))}updateIndexEntries(t,e){const r=new Map;return B.forEach(e,((o,u)=>{const h=r.get(o.collectionGroup);return(h?B.resolve(h):this.getFieldIndexes(t,o.collectionGroup)).next((m=>(r.set(o.collectionGroup,m),B.forEach(m,(g=>this.zn(t,o,g).next((_=>{const E=this.jn(u,g);return _.isEqual(E)?B.resolve():this.Jn(t,u,g,_,E)})))))))}))}Hn(t,e,r,o){return To(t).put(o.Rn(this.uid,this.$n(r,e.key),e.key))}Yn(t,e,r,o){return To(t).delete(o.Vn(this.uid,this.$n(r,e.key),e.key))}zn(t,e,r){const o=To(t);let u=new $t(Fr);return o.ee({index:AA,range:IDBKeyRange.only([r.indexId,this.uid,af(this.$n(r,e))])},((h,m)=>{u=u.add(new ra(r.indexId,e,GT(m.arrayValue),GT(m.directionalValue)))})).next((()=>u))}jn(t,e){let r=new $t(Fr);const o=this.Qn(e,t);if(o==null)return r;const u=Vg(e);if(u!=null){const h=t.data.field(u.fieldPath);if(Yu(h))for(const m of h.arrayValue.values||[])r=r.add(new ra(e.indexId,t.key,this.Ln(m),o))}else r=r.add(new ra(e.indexId,t.key,Qh,o));return r}Jn(t,e,r,o,u){tt(KT,"Updating index entries for document '%s'",e.key);const h=[];return(function(g,_,E,A,S){const O=g.getIterator(),H=_.getIterator();let Z=vo(O),Y=vo(H);for(;Z||Y;){let mt=!1,ut=!1;if(Z&&Y){const it=E(Z,Y);it<0?ut=!0:it>0&&(mt=!0)}else Z!=null?ut=!0:mt=!0;mt?(A(Y),Y=vo(H)):ut?(S(Z),Z=vo(O)):(Z=vo(O),Y=vo(H))}})(o,u,Fr,(m=>{h.push(this.Hn(t,e,r,m))}),(m=>{h.push(this.Yn(t,e,r,m))})),B.waitFor(h)}Gn(t){let e=1;return Ao(t).ee({index:TA,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((r,o,u)=>{u.done(),e=o.sequenceNumber+1})).next((()=>e))}createRange(t,e,r){r=r.sort(((h,m)=>Fr(h,m))).filter(((h,m,g)=>!m||Fr(h,g[m-1])!==0));const o=[];o.push(t);for(const h of r){const m=Fr(h,t),g=Fr(h,e);if(m===0)o[0]=t.An();else if(m>0&&g<0)o.push(h),o.push(h.An());else if(g>0)break}o.push(e);const u=[];for(let h=0;h<o.length;h+=2){if(this.Zn(o[h],o[h+1]))return[];const m=o[h].Vn(this.uid,Qh,rt.empty()),g=o[h+1].Vn(this.uid,Qh,rt.empty());u.push(IDBKeyRange.bound(m,g))}return u}Zn(t,e){return Fr(t,e)>0}getMinOffsetFromCollectionGroup(t,e){return this.getFieldIndexes(t,e).next(XT)}getMinOffset(t,e){return B.mapArray(this.Mn(e),(r=>this.xn(t,r).next((o=>o||lt(44426))))).next(XT)}}function YT(s){return Ue(s,Hu)}function To(s){return Ue(s,xu)}function Eu(s){return Ue(s,Ep)}function Ao(s){return Ue(s,Nu)}function XT(s){ht(s.length!==0,28825);let t=s[0].indexState.offset,e=t.largestBatchId;for(let r=1;r<s.length;r++){const o=s[r].indexState.offset;_p(o,t)<0&&(t=o),e<o.largestBatchId&&(e=o.largestBatchId)}return new Pn(t.readTime,t.documentKey,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $T={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Rb=41943040;class sn{static withCacheSize(t){return new sn(t,sn.DEFAULT_COLLECTION_PERCENTILE,sn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,e,r){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Db(s,t,e){const r=s.store(ii),o=s.store(Lo),u=[],h=IDBKeyRange.only(e.batchId);let m=0;const g=r.ee({range:h},((E,A,S)=>(m++,S.delete())));u.push(g.next((()=>{ht(m===1,47070,{batchId:e.batchId})})));const _=[];for(const E of e.mutations){const A=yA(t,E.key.path,e.batchId);u.push(o.delete(A)),_.push(E.key)}return B.waitFor(u).next((()=>_))}function Af(s){if(!s)return 0;let t;if(s.document)t=s.document;else if(s.unknownDocument)t=s.unknownDocument;else{if(!s.noDocument)throw lt(14731);t=s.noDocument}return JSON.stringify(t).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */sn.DEFAULT_COLLECTION_PERCENTILE=10,sn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,sn.DEFAULT=new sn(Rb,sn.DEFAULT_COLLECTION_PERCENTILE,sn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),sn.DISABLED=new sn(-1,0,0);class Ff{constructor(t,e,r,o){this.userId=t,this.serializer=e,this.indexManager=r,this.referenceDelegate=o,this.Xn={}}static wt(t,e,r,o){ht(t.uid!=="",64387);const u=t.isAuthenticated()?t.uid:"";return new Ff(u,e,r,o)}checkEmpty(t){let e=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return jr(t).ee({index:aa,range:r},((o,u,h)=>{e=!1,h.done()})).next((()=>e))}addMutationBatch(t,e,r,o){const u=Do(t),h=jr(t);return h.add({}).next((m=>{ht(typeof m=="number",49019);const g=new Cp(m,e,r,o),_=(function(O,H,Z){const Y=Z.baseMutations.map((ut=>Zu(O.yt,ut))),mt=Z.mutations.map((ut=>Zu(O.yt,ut)));return{userId:H,batchId:Z.batchId,localWriteTimeMs:Z.localWriteTime.toMillis(),baseMutations:Y,mutations:mt}})(this.serializer,this.userId,g),E=[];let A=new $t(((S,O)=>bt(S.canonicalString(),O.canonicalString())));for(const S of o){const O=yA(this.userId,S.key.path,m);A=A.add(S.key.path.popLast()),E.push(h.put(_)),E.push(u.put(O,xR))}return A.forEach((S=>{E.push(this.indexManager.addToCollectionParentIndex(t,S))})),t.addOnCommittedListener((()=>{this.Xn[m]=g.keys()})),B.waitFor(E).next((()=>g))}))}lookupMutationBatch(t,e){return jr(t).get(e).next((r=>r?(ht(r.userId===this.userId,48,"Unexpected user for mutation batch",{userId:r.userId,batchId:e}),na(this.serializer,r)):null))}er(t,e){return this.Xn[e]?B.resolve(this.Xn[e]):this.lookupMutationBatch(t,e).next((r=>{if(r){const o=r.keys();return this.Xn[e]=o,o}return null}))}getNextMutationBatchAfterBatchId(t,e){const r=e+1,o=IDBKeyRange.lowerBound([this.userId,r]);let u=null;return jr(t).ee({index:aa,range:o},((h,m,g)=>{m.userId===this.userId&&(ht(m.batchId>=r,47524,{tr:r}),u=na(this.serializer,m)),g.done()})).next((()=>u))}getHighestUnacknowledgedBatchId(t){const e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=Zr;return jr(t).ee({index:aa,range:e,reverse:!0},((o,u,h)=>{r=u.batchId,h.done()})).next((()=>r))}getAllMutationBatches(t){const e=IDBKeyRange.bound([this.userId,Zr],[this.userId,Number.POSITIVE_INFINITY]);return jr(t).J(aa,e).next((r=>r.map((o=>na(this.serializer,o)))))}getAllMutationBatchesAffectingDocumentKey(t,e){const r=Jh(this.userId,e.path),o=IDBKeyRange.lowerBound(r),u=[];return Do(t).ee({range:o},((h,m,g)=>{const[_,E,A]=h,S=wi(E);if(_===this.userId&&e.path.isEqual(S))return jr(t).get(A).next((O=>{if(!O)throw lt(61480,{nr:h,batchId:A});ht(O.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:O.userId,batchId:A}),u.push(na(this.serializer,O))}));g.done()})).next((()=>u))}getAllMutationBatchesAffectingDocumentKeys(t,e){let r=new $t(bt);const o=[];return e.forEach((u=>{const h=Jh(this.userId,u.path),m=IDBKeyRange.lowerBound(h),g=Do(t).ee({range:m},((_,E,A)=>{const[S,O,H]=_,Z=wi(O);S===this.userId&&u.path.isEqual(Z)?r=r.add(H):A.done()}));o.push(g)})),B.waitFor(o).next((()=>this.rr(t,r)))}getAllMutationBatchesAffectingQuery(t,e){const r=e.path,o=r.length+1,u=Jh(this.userId,r),h=IDBKeyRange.lowerBound(u);let m=new $t(bt);return Do(t).ee({range:h},((g,_,E)=>{const[A,S,O]=g,H=wi(S);A===this.userId&&r.isPrefixOf(H)?H.length===o&&(m=m.add(O)):E.done()})).next((()=>this.rr(t,m)))}rr(t,e){const r=[],o=[];return e.forEach((u=>{o.push(jr(t).get(u).next((h=>{if(h===null)throw lt(35274,{batchId:u});ht(h.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:h.userId,batchId:u}),r.push(na(this.serializer,h))})))})),B.waitFor(o).next((()=>r))}removeMutationBatch(t,e){return Db(t.le,this.userId,e).next((r=>(t.addOnCommittedListener((()=>{this.ir(e.batchId)})),B.forEach(r,(o=>this.referenceDelegate.markPotentiallyOrphaned(t,o))))))}ir(t){delete this.Xn[t]}performConsistencyCheck(t){return this.checkEmpty(t).next((e=>{if(!e)return B.resolve();const r=IDBKeyRange.lowerBound((function(h){return[h]})(this.userId)),o=[];return Do(t).ee({range:r},((u,h,m)=>{if(u[0]===this.userId){const g=wi(u[1]);o.push(g)}else m.done()})).next((()=>{ht(o.length===0,56720,{sr:o.map((u=>u.canonicalString()))})}))}))}containsKey(t,e){return Vb(t,this.userId,e)}_r(t){return Cb(t).get(this.userId).next((e=>e||{userId:this.userId,lastAcknowledgedBatchId:Zr,lastStreamToken:""}))}}function Vb(s,t,e){const r=Jh(t,e.path),o=r[1],u=IDBKeyRange.lowerBound(r);let h=!1;return Do(s).ee({range:u,X:!0},((m,g,_)=>{const[E,A,S]=m;E===t&&A===o&&(h=!0),_.done()})).next((()=>h))}function jr(s){return Ue(s,ii)}function Do(s){return Ue(s,Lo)}function Cb(s){return Ue(s,ju)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _a{constructor(t){this.ar=t}next(){return this.ar+=2,this.ar}static ur(){return new _a(0)}static cr(){return new _a(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WD{constructor(t,e){this.referenceDelegate=t,this.serializer=e}allocateTargetId(t){return this.lr(t).next((e=>{const r=new _a(e.highestTargetId);return e.highestTargetId=r.next(),this.hr(t,e).next((()=>e.highestTargetId))}))}getLastRemoteSnapshotVersion(t){return this.lr(t).next((e=>dt.fromTimestamp(new Ht(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(t){return this.lr(t).next((e=>e.highestListenSequenceNumber))}setTargetsMetadata(t,e,r){return this.lr(t).next((o=>(o.highestListenSequenceNumber=e,r&&(o.lastRemoteSnapshotVersion=r.toTimestamp()),e>o.highestListenSequenceNumber&&(o.highestListenSequenceNumber=e),this.hr(t,o))))}addTargetData(t,e){return this.Pr(t,e).next((()=>this.lr(t).next((r=>(r.targetCount+=1,this.Tr(e,r),this.hr(t,r))))))}updateTargetData(t,e){return this.Pr(t,e)}removeTargetData(t,e){return this.removeMatchingKeysForTargetId(t,e.targetId).next((()=>bo(t).delete(e.targetId))).next((()=>this.lr(t))).next((r=>(ht(r.targetCount>0,8065),r.targetCount-=1,this.hr(t,r))))}removeTargets(t,e,r){let o=0;const u=[];return bo(t).ee(((h,m)=>{const g=Iu(m);g.sequenceNumber<=e&&r.get(g.targetId)===null&&(o++,u.push(this.removeTargetData(t,g)))})).next((()=>B.waitFor(u))).next((()=>o))}forEachTarget(t,e){return bo(t).ee(((r,o)=>{const u=Iu(o);e(u)}))}lr(t){return ZT(t).get(pf).next((e=>(ht(e!==null,2888),e)))}hr(t,e){return ZT(t).put(pf,e)}Pr(t,e){return bo(t).put(Sb(this.serializer,e))}Tr(t,e){let r=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,r=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,r=!0),r}getTargetCount(t){return this.lr(t).next((e=>e.targetCount))}getTargetData(t,e){const r=fa(e),o=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let u=null;return bo(t).ee({range:o,index:EA},((h,m,g)=>{const _=Iu(m);oc(e,_.target)&&(u=_,g.done())})).next((()=>u))}addMatchingKeys(t,e,r){const o=[],u=Qr(t);return e.forEach((h=>{const m=on(h.path);o.push(u.put({targetId:r,path:m})),o.push(this.referenceDelegate.addReference(t,r,h))})),B.waitFor(o)}removeMatchingKeys(t,e,r){const o=Qr(t);return B.forEach(e,(u=>{const h=on(u.path);return B.waitFor([o.delete([r,h]),this.referenceDelegate.removeReference(t,r,u)])}))}removeMatchingKeysForTargetId(t,e){const r=Qr(t),o=IDBKeyRange.bound([e],[e+1],!1,!0);return r.delete(o)}getMatchingKeysForTargetId(t,e){const r=IDBKeyRange.bound([e],[e+1],!1,!0),o=Qr(t);let u=It();return o.ee({range:r,X:!0},((h,m,g)=>{const _=wi(h[1]),E=new rt(_);u=u.add(E)})).next((()=>u))}containsKey(t,e){const r=on(e.path),o=IDBKeyRange.bound([r],[lA(r)],!1,!0);let u=0;return Qr(t).ee({index:vp,X:!0,range:o},(([h,m],g,_)=>{h!==0&&(u++,_.done())})).next((()=>u>0))}At(t,e){return bo(t).get(e).next((r=>r?Iu(r):null))}}function bo(s){return Ue(s,Bo)}function ZT(s){return Ue(s,ua)}function Qr(s){return Ue(s,ko)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JT="LruGarbageCollector",t2=1048576;function WT([s,t],[e,r]){const o=bt(s,e);return o===0?bt(t,r):o}class e2{constructor(t){this.Ir=t,this.buffer=new $t(WT),this.Er=0}dr(){return++this.Er}Ar(t){const e=[t,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(e);else{const r=this.buffer.last();WT(e,r)<0&&(this.buffer=this.buffer.delete(r).add(e))}}get maxValue(){return this.buffer.last()[0]}}class Nb{constructor(t,e,r){this.garbageCollector=t,this.asyncQueue=e,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(t){tt(JT,`Garbage collection scheduled in ${t}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){cs(e)?tt(JT,"Ignoring IndexedDB error during garbage collection: ",e):await us(e)}await this.Vr(3e5)}))}}class n2{constructor(t,e){this.mr=t,this.params=e}calculateTargetCount(t,e){return this.mr.gr(t).next((r=>Math.floor(e/100*r)))}nthSequenceNumber(t,e){if(e===0)return B.resolve(Tn.ce);const r=new e2(e);return this.mr.forEachTarget(t,(o=>r.Ar(o.sequenceNumber))).next((()=>this.mr.pr(t,(o=>r.Ar(o))))).next((()=>r.maxValue))}removeTargets(t,e,r){return this.mr.removeTargets(t,e,r)}removeOrphanedDocuments(t,e){return this.mr.removeOrphanedDocuments(t,e)}collect(t,e){return this.params.cacheSizeCollectionThreshold===-1?(tt("LruGarbageCollector","Garbage collection skipped; disabled"),B.resolve($T)):this.getCacheSize(t).next((r=>r<this.params.cacheSizeCollectionThreshold?(tt("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),$T):this.yr(t,e)))}getCacheSize(t){return this.mr.getCacheSize(t)}yr(t,e){let r,o,u,h,m,g,_;const E=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next((A=>(A>this.params.maximumSequenceNumbersToCollect?(tt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${A}`),o=this.params.maximumSequenceNumbersToCollect):o=A,h=Date.now(),this.nthSequenceNumber(t,o)))).next((A=>(r=A,m=Date.now(),this.removeTargets(t,r,e)))).next((A=>(u=A,g=Date.now(),this.removeOrphanedDocuments(t,r)))).next((A=>(_=Date.now(),So()<=Pt.DEBUG&&tt("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${h-E}ms
	Determined least recently used ${o} in `+(m-h)+`ms
	Removed ${u} targets in `+(g-m)+`ms
	Removed ${A} documents in `+(_-g)+`ms
Total Duration: ${_-E}ms`),B.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:A}))))}}function xb(s,t){return new n2(s,t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i2{constructor(t,e){this.db=t,this.garbageCollector=xb(this,e)}gr(t){const e=this.wr(t);return this.db.getTargetCache().getTargetCount(t).next((r=>e.next((o=>r+o))))}wr(t){let e=0;return this.pr(t,(r=>{e++})).next((()=>e))}forEachTarget(t,e){return this.db.getTargetCache().forEachTarget(t,e)}pr(t,e){return this.Sr(t,((r,o)=>e(o)))}addReference(t,e,r){return Kh(t,r)}removeReference(t,e,r){return Kh(t,r)}removeTargets(t,e,r){return this.db.getTargetCache().removeTargets(t,e,r)}markPotentiallyOrphaned(t,e){return Kh(t,e)}br(t,e){return(function(o,u){let h=!1;return Cb(o).te((m=>Vb(o,m,u).next((g=>(g&&(h=!0),B.resolve(!g)))))).next((()=>h))})(t,e)}removeOrphanedDocuments(t,e){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),o=[];let u=0;return this.Sr(t,((h,m)=>{if(m<=e){const g=this.br(t,h).next((_=>{if(!_)return u++,r.getEntry(t,h).next((()=>(r.removeEntry(h,dt.min()),Qr(t).delete((function(A){return[0,on(A.path)]})(h)))))}));o.push(g)}})).next((()=>B.waitFor(o))).next((()=>r.apply(t))).next((()=>u))}removeTarget(t,e){const r=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,r)}updateLimboDocument(t,e){return Kh(t,e)}Sr(t,e){const r=Qr(t);let o,u=Tn.ce;return r.ee({index:vp},(([h,m],{path:g,sequenceNumber:_})=>{h===0?(u!==Tn.ce&&e(new rt(wi(o)),u),u=_,o=g):u=Tn.ce})).next((()=>{u!==Tn.ce&&e(new rt(wi(o)),u)}))}getCacheSize(t){return this.db.getRemoteDocumentCache().getSize(t)}}function Kh(s,t){return Qr(s).put((function(r,o){return{targetId:0,path:on(r.path),sequenceNumber:o}})(t,s.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ob{constructor(){this.changes=new cr((t=>t.toString()),((t,e)=>t.isEqual(e))),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,e){this.assertNotApplied(),this.changes.set(t,ae.newInvalidDocument(t).setReadTime(e))}getEntry(t,e){this.assertNotApplied();const r=this.changes.get(e);return r!==void 0?B.resolve(r):this.getFromCache(t,e)}getEntries(t,e){return this.getAllFromCache(t,e)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r2{constructor(t){this.serializer=t}setIndexManager(t){this.indexManager=t}addEntry(t,e,r){return Zs(t).put(r)}removeEntry(t,e,r){return Zs(t).delete((function(u,h){const m=u.path.toArray();return[m.slice(0,m.length-2),m[m.length-2],Ef(h),m[m.length-1]]})(e,r))}updateMetadata(t,e){return this.getMetadata(t).next((r=>(r.byteSize+=e,this.Dr(t,r))))}getEntry(t,e){let r=ae.newInvalidDocument(e);return Zs(t).ee({index:Wh,range:IDBKeyRange.only(Tu(e))},((o,u)=>{r=this.Cr(e,u)})).next((()=>r))}vr(t,e){let r={size:0,document:ae.newInvalidDocument(e)};return Zs(t).ee({index:Wh,range:IDBKeyRange.only(Tu(e))},((o,u)=>{r={document:this.Cr(e,u),size:Af(u)}})).next((()=>r))}getEntries(t,e){let r=bn();return this.Fr(t,e,((o,u)=>{const h=this.Cr(o,u);r=r.insert(o,h)})).next((()=>r))}Mr(t,e){let r=bn(),o=new se(rt.comparator);return this.Fr(t,e,((u,h)=>{const m=this.Cr(u,h);r=r.insert(u,m),o=o.insert(u,Af(h))})).next((()=>({documents:r,Or:o})))}Fr(t,e,r){if(e.isEmpty())return B.resolve();let o=new $t(n0);e.forEach((g=>o=o.add(g)));const u=IDBKeyRange.bound(Tu(o.first()),Tu(o.last())),h=o.getIterator();let m=h.getNext();return Zs(t).ee({index:Wh,range:u},((g,_,E)=>{const A=rt.fromSegments([..._.prefixPath,_.collectionGroup,_.documentId]);for(;m&&n0(m,A)<0;)r(m,null),m=h.getNext();m&&m.isEqual(A)&&(r(m,_),m=h.hasNext()?h.getNext():null),m?E.j(Tu(m)):E.done()})).next((()=>{for(;m;)r(m,null),m=h.hasNext()?h.getNext():null}))}getDocumentsMatchingQuery(t,e,r,o,u){const h=e.path,m=[h.popLast().toArray(),h.lastSegment(),Ef(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],g=[h.popLast().toArray(),h.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Zs(t).J(IDBKeyRange.bound(m,g,!0)).next((_=>{u==null||u.incrementDocumentReadCount(_.length);let E=bn();for(const A of _){const S=this.Cr(rt.fromSegments(A.prefixPath.concat(A.collectionGroup,A.documentId)),A);S.isFoundDocument()&&(uc(e,S)||o.has(S.key))&&(E=E.insert(S.key,S))}return E}))}getAllFromCollectionGroup(t,e,r,o){let u=bn();const h=e0(e,r),m=e0(e,Pn.max());return Zs(t).ee({index:vA,range:IDBKeyRange.bound(h,m,!0)},((g,_,E)=>{const A=this.Cr(rt.fromSegments(_.prefixPath.concat(_.collectionGroup,_.documentId)),_);u=u.insert(A.key,A),u.size===o&&E.done()})).next((()=>u))}newChangeBuffer(t){return new s2(this,!!t&&t.trackRemovals)}getSize(t){return this.getMetadata(t).next((e=>e.byteSize))}getMetadata(t){return t0(t).get(Cg).next((e=>(ht(!!e,20021),e)))}Dr(t,e){return t0(t).put(Cg,e)}Cr(t,e){if(e){const r=jD(this.serializer,e);if(!(r.isNoDocument()&&r.version.isEqual(dt.min())))return r}return ae.newInvalidDocument(t)}}function Mb(s){return new r2(s)}class s2 extends Ob{constructor(t,e){super(),this.Nr=t,this.trackRemovals=e,this.Br=new cr((r=>r.toString()),((r,o)=>r.isEqual(o)))}applyChanges(t){const e=[];let r=0,o=new $t(((u,h)=>bt(u.canonicalString(),h.canonicalString())));return this.changes.forEach(((u,h)=>{const m=this.Br.get(u);if(e.push(this.Nr.removeEntry(t,u,m.readTime)),h.isValidDocument()){const g=LT(this.Nr.serializer,h);o=o.add(u.path.popLast());const _=Af(g);r+=_-m.size,e.push(this.Nr.addEntry(t,u,g))}else if(r-=m.size,this.trackRemovals){const g=LT(this.Nr.serializer,h.convertToNoDocument(dt.min()));e.push(this.Nr.addEntry(t,u,g))}})),o.forEach((u=>{e.push(this.Nr.indexManager.addToCollectionParentIndex(t,u))})),e.push(this.Nr.updateMetadata(t,r)),B.waitFor(e)}getFromCache(t,e){return this.Nr.vr(t,e).next((r=>(this.Br.set(e,{size:r.size,readTime:r.document.readTime}),r.document)))}getAllFromCache(t,e){return this.Nr.Mr(t,e).next((({documents:r,Or:o})=>(o.forEach(((u,h)=>{this.Br.set(u,{size:h,readTime:r.get(u).readTime})})),r)))}}function t0(s){return Ue(s,Gu)}function Zs(s){return Ue(s,gf)}function Tu(s){const t=s.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function e0(s,t){const e=t.documentKey.path.toArray();return[s,Ef(t.readTime),e.slice(0,e.length-2),e.length>0?e[e.length-1]:""]}function n0(s,t){const e=s.path.toArray(),r=t.path.toArray();let o=0;for(let u=0;u<e.length-2&&u<r.length-2;++u)if(o=bt(e[u],r[u]),o)return o;return o=bt(e.length,r.length),o||(o=bt(e[e.length-2],r[r.length-2]),o||bt(e[e.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a2{constructor(t,e){this.overlayedDocument=t,this.mutatedFields=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pb{constructor(t,e,r,o){this.remoteDocumentCache=t,this.mutationQueue=e,this.documentOverlayCache=r,this.indexManager=o}getDocument(t,e){let r=null;return this.documentOverlayCache.getOverlay(t,e).next((o=>(r=o,this.remoteDocumentCache.getEntry(t,e)))).next((o=>(r!==null&&Pu(r.mutation,o,An.empty(),Ht.now()),o)))}getDocuments(t,e){return this.remoteDocumentCache.getEntries(t,e).next((r=>this.getLocalViewOfDocuments(t,r,It()).next((()=>r))))}getLocalViewOfDocuments(t,e,r=It()){const o=Ii();return this.populateOverlays(t,o,e).next((()=>this.computeViews(t,e,o,r).next((u=>{let h=Su();return u.forEach(((m,g)=>{h=h.insert(m,g.overlayedDocument)})),h}))))}getOverlayedDocuments(t,e){const r=Ii();return this.populateOverlays(t,r,e).next((()=>this.computeViews(t,e,r,It())))}populateOverlays(t,e,r){const o=[];return r.forEach((u=>{e.has(u)||o.push(u)})),this.documentOverlayCache.getOverlays(t,o).next((u=>{u.forEach(((h,m)=>{e.set(h,m)}))}))}computeViews(t,e,r,o){let u=bn();const h=Mu(),m=(function(){return Mu()})();return e.forEach(((g,_)=>{const E=r.get(_.key);o.has(_.key)&&(E===void 0||E.mutation instanceof hr)?u=u.insert(_.key,_):E!==void 0?(h.set(_.key,E.mutation.getFieldMask()),Pu(E.mutation,_,E.mutation.getFieldMask(),Ht.now())):h.set(_.key,An.empty())})),this.recalculateAndSaveOverlays(t,u).next((g=>(g.forEach(((_,E)=>h.set(_,E))),e.forEach(((_,E)=>m.set(_,new a2(E,h.get(_)??null)))),m)))}recalculateAndSaveOverlays(t,e){const r=Mu();let o=new se(((h,m)=>h-m)),u=It();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,e).next((h=>{for(const m of h)m.keys().forEach((g=>{const _=e.get(g);if(_===null)return;let E=r.get(g)||An.empty();E=m.applyToLocalView(_,E),r.set(g,E);const A=(o.get(m.batchId)||It()).add(g);o=o.insert(m.batchId,A)}))})).next((()=>{const h=[],m=o.getReverseIterator();for(;m.hasNext();){const g=m.getNext(),_=g.key,E=g.value,A=ZA();E.forEach((S=>{if(!u.has(S)){const O=rb(e.get(S),r.get(S));O!==null&&A.set(S,O),u=u.add(S)}})),h.push(this.documentOverlayCache.saveOverlays(t,_,A))}return B.waitFor(h)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(t,e){return this.remoteDocumentCache.getEntries(t,e).next((r=>this.recalculateAndSaveOverlays(t,r)))}getDocumentsMatchingQuery(t,e,r,o){return(function(h){return rt.isDocumentKey(h.path)&&h.collectionGroup===null&&h.filters.length===0})(e)?this.getDocumentsMatchingDocumentQuery(t,e.path):Ip(e)?this.getDocumentsMatchingCollectionGroupQuery(t,e,r,o):this.getDocumentsMatchingCollectionQuery(t,e,r,o)}getNextDocuments(t,e,r,o){return this.remoteDocumentCache.getAllFromCollectionGroup(t,e,r,o).next((u=>{const h=o-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,e,r.largestBatchId,o-u.size):B.resolve(Ii());let m=Uo,g=u;return h.next((_=>B.forEach(_,((E,A)=>(m<A.largestBatchId&&(m=A.largestBatchId),u.get(E)?B.resolve():this.remoteDocumentCache.getEntry(t,E).next((S=>{g=g.insert(E,S)}))))).next((()=>this.populateOverlays(t,_,u))).next((()=>this.computeViews(t,g,_,It()))).next((E=>({batchId:m,changes:$A(E)})))))}))}getDocumentsMatchingDocumentQuery(t,e){return this.getDocument(t,new rt(e)).next((r=>{let o=Su();return r.isFoundDocument()&&(o=o.insert(r.key,r)),o}))}getDocumentsMatchingCollectionGroupQuery(t,e,r,o){const u=e.collectionGroup;let h=Su();return this.indexManager.getCollectionParents(t,u).next((m=>B.forEach(m,(g=>{const _=(function(A,S){return new ur(S,null,A.explicitOrderBy.slice(),A.filters.slice(),A.limit,A.limitType,A.startAt,A.endAt)})(e,g.child(u));return this.getDocumentsMatchingCollectionQuery(t,_,r,o).next((E=>{E.forEach(((A,S)=>{h=h.insert(A,S)}))}))})).next((()=>h))))}getDocumentsMatchingCollectionQuery(t,e,r,o){let u;return this.documentOverlayCache.getOverlaysForCollection(t,e.path,r.largestBatchId).next((h=>(u=h,this.remoteDocumentCache.getDocumentsMatchingQuery(t,e,r,u,o)))).next((h=>{u.forEach(((g,_)=>{const E=_.getKey();h.get(E)===null&&(h=h.insert(E,ae.newInvalidDocument(E)))}));let m=Su();return h.forEach(((g,_)=>{const E=u.get(g);E!==void 0&&Pu(E.mutation,_,An.empty(),Ht.now()),uc(e,_)&&(m=m.insert(g,_))})),m}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o2{constructor(t){this.serializer=t,this.Lr=new Map,this.kr=new Map}getBundleMetadata(t,e){return B.resolve(this.Lr.get(e))}saveBundleMetadata(t,e){return this.Lr.set(e.id,(function(o){return{id:o.id,version:o.version,createTime:Ae(o.createTime)}})(e)),B.resolve()}getNamedQuery(t,e){return B.resolve(this.kr.get(e))}saveNamedQuery(t,e){return this.kr.set(e.name,(function(o){return{name:o.name,query:Pp(o.bundledQuery),readTime:Ae(o.readTime)}})(e)),B.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l2{constructor(){this.overlays=new se(rt.comparator),this.qr=new Map}getOverlay(t,e){return B.resolve(this.overlays.get(e))}getOverlays(t,e){const r=Ii();return B.forEach(e,(o=>this.getOverlay(t,o).next((u=>{u!==null&&r.set(o,u)})))).next((()=>r))}saveOverlays(t,e,r){return r.forEach(((o,u)=>{this.St(t,e,u)})),B.resolve()}removeOverlaysForBatchId(t,e,r){const o=this.qr.get(r);return o!==void 0&&(o.forEach((u=>this.overlays=this.overlays.remove(u))),this.qr.delete(r)),B.resolve()}getOverlaysForCollection(t,e,r){const o=Ii(),u=e.length+1,h=new rt(e.child("")),m=this.overlays.getIteratorFrom(h);for(;m.hasNext();){const g=m.getNext().value,_=g.getKey();if(!e.isPrefixOf(_.path))break;_.path.length===u&&g.largestBatchId>r&&o.set(g.getKey(),g)}return B.resolve(o)}getOverlaysForCollectionGroup(t,e,r,o){let u=new se(((_,E)=>_-E));const h=this.overlays.getIterator();for(;h.hasNext();){const _=h.getNext().value;if(_.getKey().getCollectionGroup()===e&&_.largestBatchId>r){let E=u.get(_.largestBatchId);E===null&&(E=Ii(),u=u.insert(_.largestBatchId,E)),E.set(_.getKey(),_)}}const m=Ii(),g=u.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach(((_,E)=>m.set(_,E))),!(m.size()>=o)););return B.resolve(m)}St(t,e,r){const o=this.overlays.get(r.key);if(o!==null){const h=this.qr.get(o.largestBatchId).delete(r.key);this.qr.set(o.largestBatchId,h)}this.overlays=this.overlays.insert(r.key,new xp(e,r));let u=this.qr.get(e);u===void 0&&(u=It(),this.qr.set(e,u)),this.qr.set(e,u.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u2{constructor(){this.sessionToken=_e.EMPTY_BYTE_STRING}getSessionToken(t){return B.resolve(this.sessionToken)}setSessionToken(t,e){return this.sessionToken=e,B.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bp{constructor(){this.Qr=new $t(je.$r),this.Ur=new $t(je.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(t,e){const r=new je(t,e);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(t,e){t.forEach((r=>this.addReference(r,e)))}removeReference(t,e){this.Gr(new je(t,e))}zr(t,e){t.forEach((r=>this.removeReference(r,e)))}jr(t){const e=new rt(new Ot([])),r=new je(e,t),o=new je(e,t+1),u=[];return this.Ur.forEachInRange([r,o],(h=>{this.Gr(h),u.push(h.key)})),u}Jr(){this.Qr.forEach((t=>this.Gr(t)))}Gr(t){this.Qr=this.Qr.delete(t),this.Ur=this.Ur.delete(t)}Hr(t){const e=new rt(new Ot([])),r=new je(e,t),o=new je(e,t+1);let u=It();return this.Ur.forEachInRange([r,o],(h=>{u=u.add(h.key)})),u}containsKey(t){const e=new je(t,0),r=this.Qr.firstAfterOrEqual(e);return r!==null&&t.isEqual(r.key)}}class je{constructor(t,e){this.key=t,this.Yr=e}static $r(t,e){return rt.comparator(t.key,e.key)||bt(t.Yr,e.Yr)}static Kr(t,e){return bt(t.Yr,e.Yr)||rt.comparator(t.key,e.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c2{constructor(t,e){this.indexManager=t,this.referenceDelegate=e,this.mutationQueue=[],this.tr=1,this.Zr=new $t(je.$r)}checkEmpty(t){return B.resolve(this.mutationQueue.length===0)}addMutationBatch(t,e,r,o){const u=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const h=new Cp(u,e,r,o);this.mutationQueue.push(h);for(const m of o)this.Zr=this.Zr.add(new je(m.key,u)),this.indexManager.addToCollectionParentIndex(t,m.key.path.popLast());return B.resolve(h)}lookupMutationBatch(t,e){return B.resolve(this.Xr(e))}getNextMutationBatchAfterBatchId(t,e){const r=e+1,o=this.ei(r),u=o<0?0:o;return B.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return B.resolve(this.mutationQueue.length===0?Zr:this.tr-1)}getAllMutationBatches(t){return B.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,e){const r=new je(e,0),o=new je(e,Number.POSITIVE_INFINITY),u=[];return this.Zr.forEachInRange([r,o],(h=>{const m=this.Xr(h.Yr);u.push(m)})),B.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(t,e){let r=new $t(bt);return e.forEach((o=>{const u=new je(o,0),h=new je(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([u,h],(m=>{r=r.add(m.Yr)}))})),B.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(t,e){const r=e.path,o=r.length+1;let u=r;rt.isDocumentKey(u)||(u=u.child(""));const h=new je(new rt(u),0);let m=new $t(bt);return this.Zr.forEachWhile((g=>{const _=g.key.path;return!!r.isPrefixOf(_)&&(_.length===o&&(m=m.add(g.Yr)),!0)}),h),B.resolve(this.ti(m))}ti(t){const e=[];return t.forEach((r=>{const o=this.Xr(r);o!==null&&e.push(o)})),e}removeMutationBatch(t,e){ht(this.ni(e.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return B.forEach(e.mutations,(o=>{const u=new je(o.key,e.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(t,o.key)})).next((()=>{this.Zr=r}))}ir(t){}containsKey(t,e){const r=new je(e,0),o=this.Zr.firstAfterOrEqual(r);return B.resolve(e.isEqual(o&&o.key))}performConsistencyCheck(t){return this.mutationQueue.length,B.resolve()}ni(t,e){return this.ei(t)}ei(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Xr(t){const e=this.ei(t);return e<0||e>=this.mutationQueue.length?null:this.mutationQueue[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h2{constructor(t){this.ri=t,this.docs=(function(){return new se(rt.comparator)})(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,e){const r=e.key,o=this.docs.get(r),u=o?o.size:0,h=this.ri(e);return this.docs=this.docs.insert(r,{document:e.mutableCopy(),size:h}),this.size+=h-u,this.indexManager.addToCollectionParentIndex(t,r.path.popLast())}removeEntry(t){const e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}getEntry(t,e){const r=this.docs.get(e);return B.resolve(r?r.document.mutableCopy():ae.newInvalidDocument(e))}getEntries(t,e){let r=bn();return e.forEach((o=>{const u=this.docs.get(o);r=r.insert(o,u?u.document.mutableCopy():ae.newInvalidDocument(o))})),B.resolve(r)}getDocumentsMatchingQuery(t,e,r,o){let u=bn();const h=e.path,m=new rt(h.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(m);for(;g.hasNext();){const{key:_,value:{document:E}}=g.getNext();if(!h.isPrefixOf(_.path))break;_.path.length>h.length+1||_p(dA(E),r)<=0||(o.has(E.key)||uc(e,E))&&(u=u.insert(E.key,E.mutableCopy()))}return B.resolve(u)}getAllFromCollectionGroup(t,e,r,o){lt(9500)}ii(t,e){return B.forEach(this.docs,(r=>e(r)))}newChangeBuffer(t){return new f2(this)}getSize(t){return B.resolve(this.size)}}class f2 extends Ob{constructor(t){super(),this.Nr=t}applyChanges(t){const e=[];return this.changes.forEach(((r,o)=>{o.isValidDocument()?e.push(this.Nr.addEntry(t,o)):this.Nr.removeEntry(r)})),B.waitFor(e)}getFromCache(t,e){return this.Nr.getEntry(t,e)}getAllFromCache(t,e){return this.Nr.getEntries(t,e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d2{constructor(t){this.persistence=t,this.si=new cr((e=>fa(e)),oc),this.lastRemoteSnapshotVersion=dt.min(),this.highestTargetId=0,this.oi=0,this._i=new Bp,this.targetCount=0,this.ai=_a.ur()}forEachTarget(t,e){return this.si.forEach(((r,o)=>e(o))),B.resolve()}getLastRemoteSnapshotVersion(t){return B.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return B.resolve(this.oi)}allocateTargetId(t){return this.highestTargetId=this.ai.next(),B.resolve(this.highestTargetId)}setTargetsMetadata(t,e,r){return r&&(this.lastRemoteSnapshotVersion=r),e>this.oi&&(this.oi=e),B.resolve()}Pr(t){this.si.set(t.target,t);const e=t.targetId;e>this.highestTargetId&&(this.ai=new _a(e),this.highestTargetId=e),t.sequenceNumber>this.oi&&(this.oi=t.sequenceNumber)}addTargetData(t,e){return this.Pr(e),this.targetCount+=1,B.resolve()}updateTargetData(t,e){return this.Pr(e),B.resolve()}removeTargetData(t,e){return this.si.delete(e.target),this._i.jr(e.targetId),this.targetCount-=1,B.resolve()}removeTargets(t,e,r){let o=0;const u=[];return this.si.forEach(((h,m)=>{m.sequenceNumber<=e&&r.get(m.targetId)===null&&(this.si.delete(h),u.push(this.removeMatchingKeysForTargetId(t,m.targetId)),o++)})),B.waitFor(u).next((()=>o))}getTargetCount(t){return B.resolve(this.targetCount)}getTargetData(t,e){const r=this.si.get(e)||null;return B.resolve(r)}addMatchingKeys(t,e,r){return this._i.Wr(e,r),B.resolve()}removeMatchingKeys(t,e,r){this._i.zr(e,r);const o=this.persistence.referenceDelegate,u=[];return o&&e.forEach((h=>{u.push(o.markPotentiallyOrphaned(t,h))})),B.waitFor(u)}removeMatchingKeysForTargetId(t,e){return this._i.jr(e),B.resolve()}getMatchingKeysForTargetId(t,e){const r=this._i.Hr(e);return B.resolve(r)}containsKey(t,e){return B.resolve(this._i.containsKey(e))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kp{constructor(t,e){this.ui={},this.overlays={},this.ci=new Tn(0),this.li=!1,this.li=!0,this.hi=new u2,this.referenceDelegate=t(this),this.Pi=new d2(this),this.indexManager=new ZD,this.remoteDocumentCache=(function(o){return new h2(o)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new bb(e),this.Ii=new o2(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let e=this.overlays[t.toKey()];return e||(e=new l2,this.overlays[t.toKey()]=e),e}getMutationQueue(t,e){let r=this.ui[t.toKey()];return r||(r=new c2(e,this.referenceDelegate),this.ui[t.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(t,e,r){tt("MemoryPersistence","Starting transaction:",t);const o=new m2(this.ci.next());return this.referenceDelegate.Ei(),r(o).next((u=>this.referenceDelegate.di(o).next((()=>u)))).toPromise().then((u=>(o.raiseOnCommittedEvent(),u)))}Ai(t,e){return B.or(Object.values(this.ui).map((r=>()=>r.containsKey(t,e))))}}class m2 extends gA{constructor(t){super(),this.currentSequenceNumber=t}}class jf{constructor(t){this.persistence=t,this.Ri=new Bp,this.Vi=null}static mi(t){return new jf(t)}get fi(){if(this.Vi)return this.Vi;throw lt(60996)}addReference(t,e,r){return this.Ri.addReference(r,e),this.fi.delete(r.toString()),B.resolve()}removeReference(t,e,r){return this.Ri.removeReference(r,e),this.fi.add(r.toString()),B.resolve()}markPotentiallyOrphaned(t,e){return this.fi.add(e.toString()),B.resolve()}removeTarget(t,e){this.Ri.jr(e.targetId).forEach((o=>this.fi.add(o.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,e.targetId).next((o=>{o.forEach((u=>this.fi.add(u.toString())))})).next((()=>r.removeTargetData(t,e)))}Ei(){this.Vi=new Set}di(t){const e=this.persistence.getRemoteDocumentCache().newChangeBuffer();return B.forEach(this.fi,(r=>{const o=rt.fromPath(r);return this.gi(t,o).next((u=>{u||e.removeEntry(o,dt.min())}))})).next((()=>(this.Vi=null,e.apply(t))))}updateLimboDocument(t,e){return this.gi(t,e).next((r=>{r?this.fi.delete(e.toString()):this.fi.add(e.toString())}))}Ti(t){return 0}gi(t,e){return B.or([()=>B.resolve(this.Ri.containsKey(e)),()=>this.persistence.getTargetCache().containsKey(t,e),()=>this.persistence.Ai(t,e)])}}class bf{constructor(t,e){this.persistence=t,this.pi=new cr((r=>on(r.path)),((r,o)=>r.isEqual(o))),this.garbageCollector=xb(this,e)}static mi(t,e){return new bf(t,e)}Ei(){}di(t){return B.resolve()}forEachTarget(t,e){return this.persistence.getTargetCache().forEachTarget(t,e)}gr(t){const e=this.wr(t);return this.persistence.getTargetCache().getTargetCount(t).next((r=>e.next((o=>r+o))))}wr(t){let e=0;return this.pr(t,(r=>{e++})).next((()=>e))}pr(t,e){return B.forEach(this.pi,((r,o)=>this.br(t,r,o).next((u=>u?B.resolve():e(o)))))}removeTargets(t,e,r){return this.persistence.getTargetCache().removeTargets(t,e,r)}removeOrphanedDocuments(t,e){let r=0;const o=this.persistence.getRemoteDocumentCache(),u=o.newChangeBuffer();return o.ii(t,(h=>this.br(t,h,e).next((m=>{m||(r++,u.removeEntry(h,dt.min()))})))).next((()=>u.apply(t))).next((()=>r))}markPotentiallyOrphaned(t,e){return this.pi.set(e,t.currentSequenceNumber),B.resolve()}removeTarget(t,e){const r=e.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,r)}addReference(t,e,r){return this.pi.set(r,t.currentSequenceNumber),B.resolve()}removeReference(t,e,r){return this.pi.set(r,t.currentSequenceNumber),B.resolve()}updateLimboDocument(t,e){return this.pi.set(e,t.currentSequenceNumber),B.resolve()}Ti(t){let e=t.key.toString().length;return t.isFoundDocument()&&(e+=ef(t.data.value)),e}br(t,e,r){return B.or([()=>this.persistence.Ai(t,e),()=>this.persistence.getTargetCache().containsKey(t,e),()=>{const o=this.pi.get(e);return B.resolve(o!==void 0&&o>r)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g2{constructor(t){this.serializer=t}k(t,e,r,o){const u=new xf("createOrUpgrade",e);r<1&&o>=1&&((function(g){g.createObjectStore(ac)})(t),(function(g){g.createObjectStore(ju,{keyPath:NR}),g.createObjectStore(ii,{keyPath:dT,autoIncrement:!0}).createIndex(aa,mT,{unique:!0}),g.createObjectStore(Lo)})(t),i0(t),(function(g){g.createObjectStore(ta)})(t));let h=B.resolve();return r<3&&o>=3&&(r!==0&&((function(g){g.deleteObjectStore(ko),g.deleteObjectStore(Bo),g.deleteObjectStore(ua)})(t),i0(t)),h=h.next((()=>(function(g){const _=g.store(ua),E={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:dt.min().toTimestamp(),targetCount:0};return _.put(pf,E)})(u)))),r<4&&o>=4&&(r!==0&&(h=h.next((()=>(function(g,_){return _.store(ii).J().next((A=>{g.deleteObjectStore(ii),g.createObjectStore(ii,{keyPath:dT,autoIncrement:!0}).createIndex(aa,mT,{unique:!0});const S=_.store(ii),O=A.map((H=>S.put(H)));return B.waitFor(O)}))})(t,u)))),h=h.next((()=>{(function(g){g.createObjectStore(zo,{keyPath:zR})})(t)}))),r<5&&o>=5&&(h=h.next((()=>this.yi(u)))),r<6&&o>=6&&(h=h.next((()=>((function(g){g.createObjectStore(Gu)})(t),this.wi(u))))),r<7&&o>=7&&(h=h.next((()=>this.Si(u)))),r<8&&o>=8&&(h=h.next((()=>this.bi(t,u)))),r<9&&o>=9&&(h=h.next((()=>{(function(g){g.objectStoreNames.contains("remoteDocumentChanges")&&g.deleteObjectStore("remoteDocumentChanges")})(t)}))),r<10&&o>=10&&(h=h.next((()=>this.Di(u)))),r<11&&o>=11&&(h=h.next((()=>{(function(g){g.createObjectStore(Of,{keyPath:qR})})(t),(function(g){g.createObjectStore(Mf,{keyPath:FR})})(t)}))),r<12&&o>=12&&(h=h.next((()=>{(function(g){const _=g.createObjectStore(Pf,{keyPath:XR});_.createIndex(xg,$R,{unique:!1}),_.createIndex(bA,ZR,{unique:!1})})(t)}))),r<13&&o>=13&&(h=h.next((()=>(function(g){const _=g.createObjectStore(gf,{keyPath:OR});_.createIndex(Wh,MR),_.createIndex(vA,PR)})(t))).next((()=>this.Ci(t,u))).next((()=>t.deleteObjectStore(ta)))),r<14&&o>=14&&(h=h.next((()=>this.Fi(t,u)))),r<15&&o>=15&&(h=h.next((()=>(function(g){g.createObjectStore(Ep,{keyPath:jR,autoIncrement:!0}).createIndex(Ng,GR,{unique:!1}),g.createObjectStore(Nu,{keyPath:HR}).createIndex(TA,QR,{unique:!1}),g.createObjectStore(xu,{keyPath:KR}).createIndex(AA,YR,{unique:!1})})(t)))),r<16&&o>=16&&(h=h.next((()=>{e.objectStore(Nu).clear()})).next((()=>{e.objectStore(xu).clear()}))),r<17&&o>=17&&(h=h.next((()=>{(function(g){g.createObjectStore(Tp,{keyPath:JR})})(t)}))),r<18&&o>=18&&B0()&&(h=h.next((()=>{e.objectStore(Nu).clear()})).next((()=>{e.objectStore(xu).clear()}))),h}wi(t){let e=0;return t.store(ta).ee(((r,o)=>{e+=Af(o)})).next((()=>{const r={byteSize:e};return t.store(Gu).put(Cg,r)}))}yi(t){const e=t.store(ju),r=t.store(ii);return e.J().next((o=>B.forEach(o,(u=>{const h=IDBKeyRange.bound([u.userId,Zr],[u.userId,u.lastAcknowledgedBatchId]);return r.J(aa,h).next((m=>B.forEach(m,(g=>{ht(g.userId===u.userId,18650,"Cannot process batch from unexpected user",{batchId:g.batchId});const _=na(this.serializer,g);return Db(t,u.userId,_).next((()=>{}))}))))}))))}Si(t){const e=t.store(ko),r=t.store(ta);return t.store(ua).get(pf).next((o=>{const u=[];return r.ee(((h,m)=>{const g=new Ot(h),_=(function(A){return[0,on(A)]})(g);u.push(e.get(_).next((E=>E?B.resolve():(A=>e.put({targetId:0,path:on(A),sequenceNumber:o.highestListenSequenceNumber}))(g))))})).next((()=>B.waitFor(u)))}))}bi(t,e){t.createObjectStore(Hu,{keyPath:kR});const r=e.store(Hu),o=new Lp,u=h=>{if(o.add(h)){const m=h.lastSegment(),g=h.popLast();return r.put({collectionId:m,parent:on(g)})}};return e.store(ta).ee({X:!0},((h,m)=>{const g=new Ot(h);return u(g.popLast())})).next((()=>e.store(Lo).ee({X:!0},(([h,m,g],_)=>{const E=wi(m);return u(E.popLast())}))))}Di(t){const e=t.store(Bo);return e.ee(((r,o)=>{const u=Iu(o),h=Sb(this.serializer,u);return e.put(h)}))}Ci(t,e){const r=e.store(ta),o=[];return r.ee(((u,h)=>{const m=e.store(gf),g=(function(A){return A.document?new rt(Ot.fromString(A.document.name).popFirst(5)):A.noDocument?rt.fromSegments(A.noDocument.path):A.unknownDocument?rt.fromSegments(A.unknownDocument.path):lt(36783)})(h).path.toArray(),_={prefixPath:g.slice(0,g.length-2),collectionGroup:g[g.length-2],documentId:g[g.length-1],readTime:h.readTime||[0,0],unknownDocument:h.unknownDocument,noDocument:h.noDocument,document:h.document,hasCommittedMutations:!!h.hasCommittedMutations};o.push(m.put(_))})).next((()=>B.waitFor(o)))}Fi(t,e){const r=e.store(ii),o=Mb(this.serializer),u=new kp(jf.mi,this.serializer.yt);return r.J().next((h=>{const m=new Map;return h.forEach((g=>{let _=m.get(g.userId)??It();na(this.serializer,g).keys().forEach((E=>_=_.add(E))),m.set(g.userId,_)})),B.forEach(m,((g,_)=>{const E=new Ge(_),A=qf.wt(this.serializer,E),S=u.getIndexManager(E),O=Ff.wt(E,this.serializer,S,u.referenceDelegate);return new Pb(o,O,A,S).recalculateAndSaveOverlaysForDocumentKeys(new Og(e,Tn.ce),g).next()}))}))}}function i0(s){s.createObjectStore(ko,{keyPath:LR}).createIndex(vp,BR,{unique:!0}),s.createObjectStore(Bo,{keyPath:"targetId"}).createIndex(EA,UR,{unique:!0}),s.createObjectStore(ua)}const Gr="IndexedDbPersistence",pg=18e5,_g=5e3,yg="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Ub="main";class zp{constructor(t,e,r,o,u,h,m,g,_,E,A=18){if(this.allowTabSynchronization=t,this.persistenceKey=e,this.clientId=r,this.Mi=u,this.window=h,this.document=m,this.xi=_,this.Oi=E,this.Ni=A,this.ci=null,this.li=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Bi=null,this.inForeground=!1,this.Li=null,this.ki=null,this.qi=Number.NEGATIVE_INFINITY,this.Qi=S=>Promise.resolve(),!zp.v())throw new J(j.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new i2(this,o),this.$i=e+Ub,this.serializer=new bb(g),this.Ui=new Ri(this.$i,this.Ni,new g2(this.serializer)),this.hi=new HD,this.Pi=new WD(this.referenceDelegate,this.serializer),this.remoteDocumentCache=Mb(this.serializer),this.Ii=new GD,this.window&&this.window.localStorage?this.Ki=this.window.localStorage:(this.Ki=null,E===!1&&Te(Gr,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Wi().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new J(j.FAILED_PRECONDITION,yg);return this.Gi(),this.zi(),this.ji(),this.runTransaction("getHighestListenSequenceNumber","readonly",(t=>this.Pi.getHighestSequenceNumber(t)))})).then((t=>{this.ci=new Tn(t,this.xi)})).then((()=>{this.li=!0})).catch((t=>(this.Ui&&this.Ui.close(),Promise.reject(t))))}Ji(t){return this.Qi=async e=>{if(this.started)return t(e)},t(this.isPrimary)}setDatabaseDeletedListener(t){this.Ui.$((async e=>{e.newVersion===null&&await t()}))}setNetworkEnabled(t){this.networkEnabled!==t&&(this.networkEnabled=t,this.Mi.enqueueAndForget((async()=>{this.started&&await this.Wi()})))}Wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(t=>Yh(t).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.Hi(t).next((e=>{e||(this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))))}))})).next((()=>this.Yi(t))).next((e=>this.isPrimary&&!e?this.Zi(t).next((()=>!1)):!!e&&this.Xi(t).next((()=>!0)))))).catch((t=>{if(cs(t))return tt(Gr,"Failed to extend owner lease: ",t),this.isPrimary;if(!this.allowTabSynchronization)throw t;return tt(Gr,"Releasing owner lease after error during lease refresh",t),!1})).then((t=>{this.isPrimary!==t&&this.Mi.enqueueRetryable((()=>this.Qi(t))),this.isPrimary=t}))}Hi(t){return Au(t).get(yo).next((e=>B.resolve(this.es(e))))}ts(t){return Yh(t).delete(this.clientId)}async ns(){if(this.isPrimary&&!this.rs(this.qi,pg)){this.qi=Date.now();const t=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(e=>{const r=Ue(e,zo);return r.J().next((o=>{const u=this.ss(o,pg),h=o.filter((m=>u.indexOf(m)===-1));return B.forEach(h,(m=>r.delete(m.clientId))).next((()=>h))}))})).catch((()=>[]));if(this.Ki)for(const e of t)this.Ki.removeItem(this._s(e.clientId))}}ji(){this.ki=this.Mi.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.Wi().then((()=>this.ns())).then((()=>this.ji()))))}es(t){return!!t&&t.ownerId===this.clientId}Yi(t){return this.Oi?B.resolve(!0):Au(t).get(yo).next((e=>{if(e!==null&&this.rs(e.leaseTimestampMs,_g)&&!this.us(e.ownerId)){if(this.es(e)&&this.networkEnabled)return!0;if(!this.es(e)){if(!e.allowTabSynchronization)throw new J(j.FAILED_PRECONDITION,yg);return!1}}return!(!this.networkEnabled||!this.inForeground)||Yh(t).J().next((r=>this.ss(r,_g).find((o=>{if(this.clientId!==o.clientId){const u=!this.networkEnabled&&o.networkEnabled,h=!this.inForeground&&o.inForeground,m=this.networkEnabled===o.networkEnabled;if(u||h&&m)return!0}return!1}))===void 0))})).next((e=>(this.isPrimary!==e&&tt(Gr,`Client ${e?"is":"is not"} eligible for a primary lease.`),e)))}async shutdown(){this.li=!1,this.cs(),this.ki&&(this.ki.cancel(),this.ki=null),this.ls(),this.hs(),await this.Ui.runTransaction("shutdown","readwrite",[ac,zo],(t=>{const e=new Og(t,Tn.ce);return this.Zi(e).next((()=>this.ts(e)))})),this.Ui.close(),this.Ps()}ss(t,e){return t.filter((r=>this.rs(r.updateTimeMs,e)&&!this.us(r.clientId)))}Ts(){return this.runTransaction("getActiveClients","readonly",(t=>Yh(t).J().next((e=>this.ss(e,pg).map((r=>r.clientId))))))}get started(){return this.li}getGlobalsCache(){return this.hi}getMutationQueue(t,e){return Ff.wt(t,this.serializer,e,this.referenceDelegate)}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(t){return new JD(t,this.serializer.yt.databaseId)}getDocumentOverlayCache(t){return qf.wt(this.serializer,t)}getBundleCache(){return this.Ii}runTransaction(t,e,r){tt(Gr,"Starting transaction:",t);const o=e==="readonly"?"readonly":"readwrite",u=(function(g){return g===18?eD:g===17?RA:g===16?tD:g===15?Ap:g===14?IA:g===13?wA:g===12?WR:g===11?SA:void lt(60245)})(this.Ni);let h;return this.Ui.runTransaction(t,o,u,(m=>(h=new Og(m,this.ci?this.ci.next():Tn.ce),e==="readwrite-primary"?this.Hi(h).next((g=>!!g||this.Yi(h))).next((g=>{if(!g)throw Te(`Failed to obtain primary lease for action '${t}'.`),this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))),new J(j.FAILED_PRECONDITION,mA);return r(h)})).next((g=>this.Xi(h).next((()=>g)))):this.Is(h).next((()=>r(h)))))).then((m=>(h.raiseOnCommittedEvent(),m)))}Is(t){return Au(t).get(yo).next((e=>{if(e!==null&&this.rs(e.leaseTimestampMs,_g)&&!this.us(e.ownerId)&&!this.es(e)&&!(this.Oi||this.allowTabSynchronization&&e.allowTabSynchronization))throw new J(j.FAILED_PRECONDITION,yg)}))}Xi(t){const e={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Au(t).put(yo,e)}static v(){return Ri.v()}Zi(t){const e=Au(t);return e.get(yo).next((r=>this.es(r)?(tt(Gr,"Releasing primary lease."),e.delete(yo)):B.resolve()))}rs(t,e){const r=Date.now();return!(t<r-e)&&(!(t>r)||(Te(`Detected an update time that is in the future: ${t} > ${r}`),!1))}Gi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Li=()=>{this.Mi.enqueueAndForget((()=>(this.inForeground=this.document.visibilityState==="visible",this.Wi())))},this.document.addEventListener("visibilitychange",this.Li),this.inForeground=this.document.visibilityState==="visible")}ls(){this.Li&&(this.document.removeEventListener("visibilitychange",this.Li),this.Li=null)}zi(){var t;typeof((t=this.window)==null?void 0:t.addEventListener)=="function"&&(this.Bi=()=>{this.cs();const e=/(?:Version|Mobile)\/1[456]/;L0()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.Mi.enterRestrictedMode(!0),this.Mi.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Bi))}hs(){this.Bi&&(this.window.removeEventListener("pagehide",this.Bi),this.Bi=null)}us(t){var e;try{const r=((e=this.Ki)==null?void 0:e.getItem(this._s(t)))!==null;return tt(Gr,`Client '${t}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Te(Gr,"Failed to get zombied client id.",r),!1}}cs(){if(this.Ki)try{this.Ki.setItem(this._s(this.clientId),String(Date.now()))}catch(t){Te("Failed to set zombie client id.",t)}}Ps(){if(this.Ki)try{this.Ki.removeItem(this._s(this.clientId))}catch{}}_s(t){return`firestore_zombie_${this.persistenceKey}_${t}`}}function Au(s){return Ue(s,ac)}function Yh(s){return Ue(s,zo)}function qp(s,t){let e=s.projectId;return s.isDefaultDatabase||(e+="."+s.database),"firestore/"+t+"/"+e+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fp{constructor(t,e,r,o){this.targetId=t,this.fromCache=e,this.Es=r,this.ds=o}static As(t,e){let r=It(),o=It();for(const u of e.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new Fp(t,e.fromCache,r,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p2{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lb{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return L0()?8:pA(hf())>0?6:4})()}initialize(t,e){this.ps=t,this.indexManager=e,this.Rs=!0}getDocumentsMatchingQuery(t,e,r,o){const u={result:null};return this.ys(t,e).next((h=>{u.result=h})).next((()=>{if(!u.result)return this.ws(t,e,o,r).next((h=>{u.result=h}))})).next((()=>{if(u.result)return;const h=new p2;return this.Ss(t,e,h).next((m=>{if(u.result=m,this.Vs)return this.bs(t,e,h,m.size)}))})).next((()=>u.result))}bs(t,e,r,o){return r.documentReadCount<this.fs?(So()<=Pt.DEBUG&&tt("QueryEngine","SDK will not create cache indexes for query:",wo(e),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),B.resolve()):(So()<=Pt.DEBUG&&tt("QueryEngine","Query:",wo(e),"scans",r.documentReadCount,"local documents and returns",o,"documents as results."),r.documentReadCount>this.gs*o?(So()<=Pt.DEBUG&&tt("QueryEngine","The SDK decides to create cache indexes for query:",wo(e),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,gn(e))):B.resolve())}ys(t,e){if(RT(e))return B.resolve(null);let r=gn(e);return this.indexManager.getIndexType(t,r).next((o=>o===0?null:(e.limit!==null&&o===1&&(e=vf(e,null,"F"),r=gn(e)),this.indexManager.getDocumentsMatchingTarget(t,r).next((u=>{const h=It(...u);return this.ps.getDocuments(t,h).next((m=>this.indexManager.getMinOffset(t,r).next((g=>{const _=this.Ds(e,m);return this.Cs(e,_,h,g.readTime)?this.ys(t,vf(e,null,"F")):this.vs(t,_,e,g)}))))})))))}ws(t,e,r,o){return RT(e)||o.isEqual(dt.min())?B.resolve(null):this.ps.getDocuments(t,r).next((u=>{const h=this.Ds(e,u);return this.Cs(e,h,r,o)?B.resolve(null):(So()<=Pt.DEBUG&&tt("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),wo(e)),this.vs(t,h,e,fA(o,Uo)).next((m=>m)))}))}Ds(t,e){let r=new $t(YA(t));return e.forEach(((o,u)=>{uc(t,u)&&(r=r.add(u))})),r}Cs(t,e,r,o){if(t.limit===null)return!1;if(r.size!==e.size)return!0;const u=t.limitType==="F"?e.last():e.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}Ss(t,e,r){return So()<=Pt.DEBUG&&tt("QueryEngine","Using full collection scan to execute query:",wo(e)),this.ps.getDocumentsMatchingQuery(t,e,Pn.min(),r)}vs(t,e,r,o){return this.ps.getDocumentsMatchingQuery(t,r,o).next((u=>(e.forEach((h=>{u=u.insert(h.key,h)})),u)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jp="LocalStore",_2=3e8;class y2{constructor(t,e,r,o){this.persistence=t,this.Fs=e,this.serializer=o,this.Ms=new se(bt),this.xs=new cr((u=>fa(u)),oc),this.Os=new Map,this.Ns=t.getRemoteDocumentCache(),this.Pi=t.getTargetCache(),this.Ii=t.getBundleCache(),this.Bs(r)}Bs(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new Pb(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(e=>t.collect(e,this.Ms)))}}function Bb(s,t,e,r){return new y2(s,t,e,r)}async function kb(s,t){const e=at(s);return await e.persistence.runTransaction("Handle user change","readonly",(r=>{let o;return e.mutationQueue.getAllMutationBatches(r).next((u=>(o=u,e.Bs(t),e.mutationQueue.getAllMutationBatches(r)))).next((u=>{const h=[],m=[];let g=It();for(const _ of o){h.push(_.batchId);for(const E of _.mutations)g=g.add(E.key)}for(const _ of u){m.push(_.batchId);for(const E of _.mutations)g=g.add(E.key)}return e.localDocuments.getDocuments(r,g).next((_=>({Ls:_,removedBatchIds:h,addedBatchIds:m})))}))}))}function v2(s,t){const e=at(s);return e.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const o=t.batch.keys(),u=e.Ns.newChangeBuffer({trackRemovals:!0});return(function(m,g,_,E){const A=_.batch,S=A.keys();let O=B.resolve();return S.forEach((H=>{O=O.next((()=>E.getEntry(g,H))).next((Z=>{const Y=_.docVersions.get(H);ht(Y!==null,48541),Z.version.compareTo(Y)<0&&(A.applyToRemoteDocument(Z,_),Z.isValidDocument()&&(Z.setReadTime(_.commitVersion),E.addEntry(Z)))}))})),O.next((()=>m.mutationQueue.removeMutationBatch(g,A)))})(e,r,t,u).next((()=>u.apply(r))).next((()=>e.mutationQueue.performConsistencyCheck(r))).next((()=>e.documentOverlayCache.removeOverlaysForBatchId(r,o,t.batch.batchId))).next((()=>e.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(m){let g=It();for(let _=0;_<m.mutationResults.length;++_)m.mutationResults[_].transformResults.length>0&&(g=g.add(m.batch.mutations[_].key));return g})(t)))).next((()=>e.localDocuments.getDocuments(r,o)))}))}function zb(s){const t=at(s);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(e=>t.Pi.getLastRemoteSnapshotVersion(e)))}function E2(s,t){const e=at(s),r=t.snapshotVersion;let o=e.Ms;return e.persistence.runTransaction("Apply remote event","readwrite-primary",(u=>{const h=e.Ns.newChangeBuffer({trackRemovals:!0});o=e.Ms;const m=[];t.targetChanges.forEach(((E,A)=>{const S=o.get(A);if(!S)return;m.push(e.Pi.removeMatchingKeys(u,E.removedDocuments,A).next((()=>e.Pi.addMatchingKeys(u,E.addedDocuments,A))));let O=S.withSequenceNumber(u.currentSequenceNumber);t.targetMismatches.get(A)!==null?O=O.withResumeToken(_e.EMPTY_BYTE_STRING,dt.min()).withLastLimboFreeSnapshotVersion(dt.min()):E.resumeToken.approximateByteSize()>0&&(O=O.withResumeToken(E.resumeToken,r)),o=o.insert(A,O),(function(Z,Y,mt){return Z.resumeToken.approximateByteSize()===0||Y.snapshotVersion.toMicroseconds()-Z.snapshotVersion.toMicroseconds()>=_2?!0:mt.addedDocuments.size+mt.modifiedDocuments.size+mt.removedDocuments.size>0})(S,O,E)&&m.push(e.Pi.updateTargetData(u,O))}));let g=bn(),_=It();if(t.documentUpdates.forEach((E=>{t.resolvedLimboDocuments.has(E)&&m.push(e.persistence.referenceDelegate.updateLimboDocument(u,E))})),m.push(qb(u,h,t.documentUpdates).next((E=>{g=E.ks,_=E.qs}))),!r.isEqual(dt.min())){const E=e.Pi.getLastRemoteSnapshotVersion(u).next((A=>e.Pi.setTargetsMetadata(u,u.currentSequenceNumber,r)));m.push(E)}return B.waitFor(m).next((()=>h.apply(u))).next((()=>e.localDocuments.getLocalViewOfDocuments(u,g,_))).next((()=>g))})).then((u=>(e.Ms=o,u)))}function qb(s,t,e){let r=It(),o=It();return e.forEach((u=>r=r.add(u))),t.getEntries(s,r).next((u=>{let h=bn();return e.forEach(((m,g)=>{const _=u.get(m);g.isFoundDocument()!==_.isFoundDocument()&&(o=o.add(m)),g.isNoDocument()&&g.version.isEqual(dt.min())?(t.removeEntry(m,g.readTime),h=h.insert(m,g)):!_.isValidDocument()||g.version.compareTo(_.version)>0||g.version.compareTo(_.version)===0&&_.hasPendingWrites?(t.addEntry(g),h=h.insert(m,g)):tt(jp,"Ignoring outdated watch update for ",m,". Current version:",_.version," Watch version:",g.version)})),{ks:h,qs:o}}))}function T2(s,t){const e=at(s);return e.persistence.runTransaction("Get next mutation batch","readonly",(r=>(t===void 0&&(t=Zr),e.mutationQueue.getNextMutationBatchAfterBatchId(r,t))))}function Ko(s,t){const e=at(s);return e.persistence.runTransaction("Allocate target","readwrite",(r=>{let o;return e.Pi.getTargetData(r,t).next((u=>u?(o=u,B.resolve(o)):e.Pi.allocateTargetId(r).next((h=>(o=new rr(t,h,"TargetPurposeListen",r.currentSequenceNumber),e.Pi.addTargetData(r,o).next((()=>o)))))))})).then((r=>{const o=e.Ms.get(r.targetId);return(o===null||r.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(e.Ms=e.Ms.insert(r.targetId,r),e.xs.set(t,r.targetId)),r}))}async function Yo(s,t,e){const r=at(s),o=r.Ms.get(t),u=e?"readwrite":"readwrite-primary";try{e||await r.persistence.runTransaction("Release target",u,(h=>r.persistence.referenceDelegate.removeTarget(h,o)))}catch(h){if(!cs(h))throw h;tt(jp,`Failed to update sequence numbers for target ${t}: ${h}`)}r.Ms=r.Ms.remove(t),r.xs.delete(o.target)}function Sf(s,t,e){const r=at(s);let o=dt.min(),u=It();return r.persistence.runTransaction("Execute query","readwrite",(h=>(function(g,_,E){const A=at(g),S=A.xs.get(E);return S!==void 0?B.resolve(A.Ms.get(S)):A.Pi.getTargetData(_,E)})(r,h,gn(t)).next((m=>{if(m)return o=m.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(h,m.targetId).next((g=>{u=g}))})).next((()=>r.Fs.getDocumentsMatchingQuery(h,t,e?o:dt.min(),e?u:It()))).next((m=>(Gb(r,KA(t),m),{documents:m,Qs:u})))))}function Fb(s,t){const e=at(s),r=at(e.Pi),o=e.Ms.get(t);return o?Promise.resolve(o.target):e.persistence.runTransaction("Get target data","readonly",(u=>r.At(u,t).next((h=>h?h.target:null))))}function jb(s,t){const e=at(s),r=e.Os.get(t)||dt.min();return e.persistence.runTransaction("Get new document changes","readonly",(o=>e.Ns.getAllFromCollectionGroup(o,t,fA(r,Uo),Number.MAX_SAFE_INTEGER))).then((o=>(Gb(e,t,o),o)))}function Gb(s,t,e){let r=s.Os.get(t)||dt.min();e.forEach(((o,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)})),s.Os.set(t,r)}async function A2(s,t,e,r){const o=at(s);let u=It(),h=bn();for(const _ of e){const E=t.$s(_.metadata.name);_.document&&(u=u.add(E));const A=t.Us(_);A.setReadTime(t.Ks(_.metadata.readTime)),h=h.insert(E,A)}const m=o.Ns.newChangeBuffer({trackRemovals:!0}),g=await Ko(o,(function(E){return gn(el(Ot.fromString(`__bundle__/docs/${E}`)))})(r));return o.persistence.runTransaction("Apply bundle documents","readwrite",(_=>qb(_,m,h).next((E=>(m.apply(_),E))).next((E=>o.Pi.removeMatchingKeysForTargetId(_,g.targetId).next((()=>o.Pi.addMatchingKeys(_,u,g.targetId))).next((()=>o.localDocuments.getLocalViewOfDocuments(_,E.ks,E.qs))).next((()=>E.ks))))))}async function b2(s,t,e=It()){const r=await Ko(s,gn(Pp(t.bundledQuery))),o=at(s);return o.persistence.runTransaction("Save named query","readwrite",(u=>{const h=Ae(t.readTime);if(r.snapshotVersion.compareTo(h)>=0)return o.Ii.saveNamedQuery(u,t);const m=r.withResumeToken(_e.EMPTY_BYTE_STRING,h);return o.Ms=o.Ms.insert(m.targetId,m),o.Pi.updateTargetData(u,m).next((()=>o.Pi.removeMatchingKeysForTargetId(u,r.targetId))).next((()=>o.Pi.addMatchingKeys(u,e,r.targetId))).next((()=>o.Ii.saveNamedQuery(u,t)))}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hb="firestore_clients";function r0(s,t){return`${Hb}_${s}_${t}`}const Qb="firestore_mutations";function s0(s,t,e){let r=`${Qb}_${s}_${e}`;return t.isAuthenticated()&&(r+=`_${t.uid}`),r}const Kb="firestore_targets";function vg(s,t){return`${Kb}_${s}_${t}`}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Si="SharedClientState";class wf{constructor(t,e,r,o){this.user=t,this.batchId=e,this.state=r,this.error=o}static Ws(t,e,r){const o=JSON.parse(r);let u,h=typeof o=="object"&&["pending","acknowledged","rejected"].indexOf(o.state)!==-1&&(o.error===void 0||typeof o.error=="object");return h&&o.error&&(h=typeof o.error.message=="string"&&typeof o.error.code=="string",h&&(u=new J(o.error.code,o.error.message))),h?new wf(t,e,o.state,u):(Te(Si,`Failed to parse mutation state for ID '${e}': ${r}`),null)}Gs(){const t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)}}class Uu{constructor(t,e,r){this.targetId=t,this.state=e,this.error=r}static Ws(t,e){const r=JSON.parse(e);let o,u=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return u&&r.error&&(u=typeof r.error.message=="string"&&typeof r.error.code=="string",u&&(o=new J(r.error.code,r.error.message))),u?new Uu(t,r.state,o):(Te(Si,`Failed to parse target state for ID '${t}': ${e}`),null)}Gs(){const t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)}}class If{constructor(t,e){this.clientId=t,this.activeTargetIds=e}static Ws(t,e){const r=JSON.parse(e);let o=typeof r=="object"&&r.activeTargetIds instanceof Array,u=Rp();for(let h=0;o&&h<r.activeTargetIds.length;++h)o=_A(r.activeTargetIds[h]),u=u.add(r.activeTargetIds[h]);return o?new If(t,u):(Te(Si,`Failed to parse client data for instance '${t}': ${e}`),null)}}class Gp{constructor(t,e){this.clientId=t,this.onlineState=e}static Ws(t){const e=JSON.parse(t);return typeof e=="object"&&["Unknown","Online","Offline"].indexOf(e.onlineState)!==-1&&typeof e.clientId=="string"?new Gp(e.clientId,e.onlineState):(Te(Si,`Failed to parse online state: ${t}`),null)}}class Yg{constructor(){this.activeTargetIds=Rp()}zs(t){this.activeTargetIds=this.activeTargetIds.add(t)}js(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Gs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class Eg{constructor(t,e,r,o,u){this.window=t,this.Mi=e,this.persistenceKey=r,this.Js=o,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Hs=this.Ys.bind(this),this.Zs=new se(bt),this.started=!1,this.Xs=[];const h=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=u,this.eo=r0(this.persistenceKey,this.Js),this.no=(function(g){return`firestore_sequence_number_${g}`})(this.persistenceKey),this.Zs=this.Zs.insert(this.Js,new Yg),this.ro=new RegExp(`^${Hb}_${h}_([^_]*)$`),this.io=new RegExp(`^${Qb}_${h}_(\\d+)(?:_(.*))?$`),this.so=new RegExp(`^${Kb}_${h}_(\\d+)$`),this.oo=(function(g){return`firestore_online_state_${g}`})(this.persistenceKey),this._o=(function(g){return`firestore_bundle_loaded_v2_${g}`})(this.persistenceKey),this.window.addEventListener("storage",this.Hs)}static v(t){return!(!t||!t.localStorage)}async start(){const t=await this.syncEngine.Ts();for(const r of t){if(r===this.Js)continue;const o=this.getItem(r0(this.persistenceKey,r));if(o){const u=If.Ws(r,o);u&&(this.Zs=this.Zs.insert(u.clientId,u))}}this.ao();const e=this.storage.getItem(this.oo);if(e){const r=this.uo(e);r&&this.co(r)}for(const r of this.Xs)this.Ys(r);this.Xs=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(t){this.setItem(this.no,JSON.stringify(t))}getAllActiveQueryTargets(){return this.lo(this.Zs)}isActiveQueryTarget(t){let e=!1;return this.Zs.forEach(((r,o)=>{o.activeTargetIds.has(t)&&(e=!0)})),e}addPendingMutation(t){this.ho(t,"pending")}updateMutationState(t,e,r){this.ho(t,e,r),this.Po(t)}addLocalQueryTarget(t,e=!0){let r="not-current";if(this.isActiveQueryTarget(t)){const o=this.storage.getItem(vg(this.persistenceKey,t));if(o){const u=Uu.Ws(t,o);u&&(r=u.state)}}return e&&this.To.zs(t),this.ao(),r}removeLocalQueryTarget(t){this.To.js(t),this.ao()}isLocalQueryTarget(t){return this.To.activeTargetIds.has(t)}clearQueryState(t){this.removeItem(vg(this.persistenceKey,t))}updateQueryState(t,e,r){this.Io(t,e,r)}handleUserChange(t,e,r){e.forEach((o=>{this.Po(o)})),this.currentUser=t,r.forEach((o=>{this.addPendingMutation(o)}))}setOnlineState(t){this.Eo(t)}notifyBundleLoaded(t){this.Ao(t)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Hs),this.removeItem(this.eo),this.started=!1)}getItem(t){const e=this.storage.getItem(t);return tt(Si,"READ",t,e),e}setItem(t,e){tt(Si,"SET",t,e),this.storage.setItem(t,e)}removeItem(t){tt(Si,"REMOVE",t),this.storage.removeItem(t)}Ys(t){const e=t;if(e.storageArea===this.storage){if(tt(Si,"EVENT",e.key,e.newValue),e.key===this.eo)return void Te("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Mi.enqueueRetryable((async()=>{if(this.started){if(e.key!==null){if(this.ro.test(e.key)){if(e.newValue==null){const r=this.Ro(e.key);return this.Vo(r,null)}{const r=this.mo(e.key,e.newValue);if(r)return this.Vo(r.clientId,r)}}else if(this.io.test(e.key)){if(e.newValue!==null){const r=this.fo(e.key,e.newValue);if(r)return this.po(r)}}else if(this.so.test(e.key)){if(e.newValue!==null){const r=this.yo(e.key,e.newValue);if(r)return this.wo(r)}}else if(e.key===this.oo){if(e.newValue!==null){const r=this.uo(e.newValue);if(r)return this.co(r)}}else if(e.key===this.no){const r=(function(u){let h=Tn.ce;if(u!=null)try{const m=JSON.parse(u);ht(typeof m=="number",30636,{So:u}),h=m}catch(m){Te(Si,"Failed to read sequence number from WebStorage",m)}return h})(e.newValue);r!==Tn.ce&&this.sequenceNumberHandler(r)}else if(e.key===this._o){const r=this.bo(e.newValue);await Promise.all(r.map((o=>this.syncEngine.Do(o))))}}}else this.Xs.push(e)}))}}get To(){return this.Zs.get(this.Js)}ao(){this.setItem(this.eo,this.To.Gs())}ho(t,e,r){const o=new wf(this.currentUser,t,e,r),u=s0(this.persistenceKey,this.currentUser,t);this.setItem(u,o.Gs())}Po(t){const e=s0(this.persistenceKey,this.currentUser,t);this.removeItem(e)}Eo(t){const e={clientId:this.Js,onlineState:t};this.storage.setItem(this.oo,JSON.stringify(e))}Io(t,e,r){const o=vg(this.persistenceKey,t),u=new Uu(t,e,r);this.setItem(o,u.Gs())}Ao(t){const e=JSON.stringify(Array.from(t));this.setItem(this._o,e)}Ro(t){const e=this.ro.exec(t);return e?e[1]:null}mo(t,e){const r=this.Ro(t);return If.Ws(r,e)}fo(t,e){const r=this.io.exec(t),o=Number(r[1]),u=r[2]!==void 0?r[2]:null;return wf.Ws(new Ge(u),o,e)}yo(t,e){const r=this.so.exec(t),o=Number(r[1]);return Uu.Ws(o,e)}uo(t){return Gp.Ws(t)}bo(t){return JSON.parse(t)}async po(t){if(t.user.uid===this.currentUser.uid)return this.syncEngine.Co(t.batchId,t.state,t.error);tt(Si,`Ignoring mutation for non-active user ${t.user.uid}`)}wo(t){return this.syncEngine.vo(t.targetId,t.state,t.error)}Vo(t,e){const r=e?this.Zs.insert(t,e):this.Zs.remove(t),o=this.lo(this.Zs),u=this.lo(r),h=[],m=[];return u.forEach((g=>{o.has(g)||h.push(g)})),o.forEach((g=>{u.has(g)||m.push(g)})),this.syncEngine.Fo(h,m).then((()=>{this.Zs=r}))}co(t){this.Zs.get(t.clientId)&&this.onlineStateHandler(t.onlineState)}lo(t){let e=Rp();return t.forEach(((r,o)=>{e=e.unionWith(o.activeTargetIds)})),e}}class Yb{constructor(){this.Mo=new Yg,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,e,r){}addLocalQueryTarget(t,e=!0){return e&&this.Mo.zs(t),this.xo[t]||"not-current"}updateQueryState(t,e,r){this.xo[t]=e}removeLocalQueryTarget(t){this.Mo.js(t)}isLocalQueryTarget(t){return this.Mo.activeTargetIds.has(t)}clearQueryState(t){delete this.xo[t]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(t){return this.Mo.activeTargetIds.has(t)}start(){return this.Mo=new Yg,Promise.resolve()}handleUserChange(t,e,r){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S2{Oo(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a0="ConnectivityMonitor";class o0{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(t){this.qo.push(t)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){tt(a0,"Network connectivity changed: AVAILABLE");for(const t of this.qo)t(0)}ko(){tt(a0,"Network connectivity changed: UNAVAILABLE");for(const t of this.qo)t(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Xh=null;function Xg(){return Xh===null?Xh=(function(){return 268435456+Math.round(2147483648*Math.random())})():Xh++,"0x"+Xh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tg="RestConnection",w2={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class I2{get $o(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const e=t.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=e+"://"+t.host,this.Ko=`projects/${r}/databases/${o}`,this.Wo=this.databaseId.database===Mg?`project_id=${r}`:`project_id=${r}&database_id=${o}`}Go(t,e,r,o,u){const h=Xg(),m=this.zo(t,e.toUriEncodedString());tt(Tg,`Sending RPC '${t}' ${h}:`,m,r);const g={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(g,o,u);const{host:_}=new URL(m),E=ap(_);return this.Jo(t,m,g,r,E).then((A=>(tt(Tg,`Received RPC '${t}' ${h}: `,A),A)),(A=>{throw Ci(Tg,`RPC '${t}' ${h} failed with error: `,A,"url: ",m,"request:",r),A}))}Ho(t,e,r,o,u,h){return this.Go(t,e,r,o,u)}jo(t,e,r){t["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+tl})(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e&&e.headers.forEach(((o,u)=>t[u]=o)),r&&r.headers.forEach(((o,u)=>t[u]=o))}zo(t,e){const r=w2[t];return`${this.Uo}/v1/${e}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R2{constructor(t){this.Yo=t.Yo,this.Zo=t.Zo}Xo(t){this.e_=t}t_(t){this.n_=t}r_(t){this.i_=t}onMessage(t){this.s_=t}close(){this.Zo()}send(t){this.Yo(t)}o_(){this.e_()}__(){this.n_()}a_(t){this.i_(t)}u_(t){this.s_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rn="WebChannelConnection";class D2 extends I2{constructor(t){super(t),this.c_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Jo(t,e,r,o,u){const h=Xg();return new Promise(((m,g)=>{const _=new eA;_.setWithCredentials(!0),_.listenOnce(nA.COMPLETE,(()=>{try{switch(_.getLastErrorCode()){case $h.NO_ERROR:const A=_.getResponseJson();tt(rn,`XHR for RPC '${t}' ${h} received:`,JSON.stringify(A)),m(A);break;case $h.TIMEOUT:tt(rn,`RPC '${t}' ${h} timed out`),g(new J(j.DEADLINE_EXCEEDED,"Request time out"));break;case $h.HTTP_ERROR:const S=_.getStatus();if(tt(rn,`RPC '${t}' ${h} failed with status:`,S,"response text:",_.getResponseText()),S>0){let O=_.getResponseJson();Array.isArray(O)&&(O=O[0]);const H=O==null?void 0:O.error;if(H&&H.status&&H.message){const Z=(function(mt){const ut=mt.toLowerCase().replace(/_/g,"-");return Object.values(j).indexOf(ut)>=0?ut:j.UNKNOWN})(H.status);g(new J(Z,H.message))}else g(new J(j.UNKNOWN,"Server responded with status "+_.getStatus()))}else g(new J(j.UNAVAILABLE,"Connection failed."));break;default:lt(9055,{l_:t,streamId:h,h_:_.getLastErrorCode(),P_:_.getLastError()})}}finally{tt(rn,`RPC '${t}' ${h} completed.`)}}));const E=JSON.stringify(o);tt(rn,`RPC '${t}' ${h} sending request:`,o),_.send(e,"POST",E,r,15)}))}T_(t,e,r){const o=Xg(),u=[this.Uo,"/","google.firestore.v1.Firestore","/",t,"/channel"],h=sA(),m=rA(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},_=this.longPollingOptions.timeoutSeconds;_!==void 0&&(g.longPollingTimeout=Math.round(1e3*_)),this.useFetchStreams&&(g.useFetchStreams=!0),this.jo(g.initMessageHeaders,e,r),g.encodeInitMessageHeaders=!0;const E=u.join("");tt(rn,`Creating RPC '${t}' stream ${o}: ${E}`,g);const A=h.createWebChannel(E,g);this.I_(A);let S=!1,O=!1;const H=new R2({Yo:Y=>{O?tt(rn,`Not sending because RPC '${t}' stream ${o} is closed:`,Y):(S||(tt(rn,`Opening RPC '${t}' stream ${o} transport.`),A.open(),S=!0),tt(rn,`RPC '${t}' stream ${o} sending:`,Y),A.send(Y))},Zo:()=>A.close()}),Z=(Y,mt,ut)=>{Y.listen(mt,(it=>{try{ut(it)}catch(St){setTimeout((()=>{throw St}),0)}}))};return Z(A,bu.EventType.OPEN,(()=>{O||(tt(rn,`RPC '${t}' stream ${o} transport opened.`),H.o_())})),Z(A,bu.EventType.CLOSE,(()=>{O||(O=!0,tt(rn,`RPC '${t}' stream ${o} transport closed`),H.a_(),this.E_(A))})),Z(A,bu.EventType.ERROR,(Y=>{O||(O=!0,Ci(rn,`RPC '${t}' stream ${o} transport errored. Name:`,Y.name,"Message:",Y.message),H.a_(new J(j.UNAVAILABLE,"The operation could not be completed")))})),Z(A,bu.EventType.MESSAGE,(Y=>{var mt;if(!O){const ut=Y.data[0];ht(!!ut,16349);const it=ut,St=(it==null?void 0:it.error)||((mt=it[0])==null?void 0:mt.error);if(St){tt(rn,`RPC '${t}' stream ${o} received error:`,St);const ft=St.status;let Tt=(function(D){const x=De[D];if(x!==void 0)return ob(x)})(ft),N=St.message;Tt===void 0&&(Tt=j.INTERNAL,N="Unknown error status: "+ft+" with message "+St.message),O=!0,H.a_(new J(Tt,N)),A.close()}else tt(rn,`RPC '${t}' stream ${o} received:`,ut),H.u_(ut)}})),Z(m,iA.STAT_EVENT,(Y=>{Y.stat===Rg.PROXY?tt(rn,`RPC '${t}' stream ${o} detected buffering proxy`):Y.stat===Rg.NOPROXY&&tt(rn,`RPC '${t}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{H.__()}),0),H}terminate(){this.c_.forEach((t=>t.close())),this.c_=[]}I_(t){this.c_.push(t)}E_(t){this.c_=this.c_.filter((e=>e===t))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xb(){return typeof window<"u"?window:null}function of(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dc(s){return new OD(s,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hp{constructor(t,e,r=1e3,o=1.5,u=6e4){this.Mi=t,this.timerId=e,this.d_=r,this.A_=o,this.R_=u,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(t){this.cancel();const e=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),o=Math.max(0,e-r);o>0&&tt("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${e} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),t()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l0="PersistentStream";class $b{constructor(t,e,r,o,u,h,m,g){this.Mi=t,this.S_=r,this.b_=o,this.connection=u,this.authCredentialsProvider=h,this.appCheckCredentialsProvider=m,this.listener=g,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Hp(t,e)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(t){this.Q_(),this.stream.send(t)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(t,e){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,t!==4?this.M_.reset():e&&e.code===j.RESOURCE_EXHAUSTED?(Te(e.toString()),Te("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):e&&e.code===j.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.r_(e)}K_(){}auth(){this.state=1;const t=this.W_(this.D_),e=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,o])=>{this.D_===e&&this.G_(r,o)}),(r=>{t((()=>{const o=new J(j.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(o)}))}))}G_(t,e){const r=this.W_(this.D_);this.stream=this.j_(t,e),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((o=>{r((()=>this.z_(o)))})),this.stream.onMessage((o=>{r((()=>++this.F_==1?this.J_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(t){return tt(l0,`close with error: ${t}`),this.stream=null,this.close(4,t)}W_(t){return e=>{this.Mi.enqueueAndForget((()=>this.D_===t?e():(tt(l0,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class V2 extends $b{constructor(t,e,r,o,u,h){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",e,r,o,h),this.serializer=u}j_(t,e){return this.connection.T_("Listen",t,e)}J_(t){return this.onNext(t)}onNext(t){this.M_.reset();const e=UD(this.serializer,t),r=(function(u){if(!("targetChange"in u))return dt.min();const h=u.targetChange;return h.targetIds&&h.targetIds.length?dt.min():h.readTime?Ae(h.readTime):dt.min()})(t);return this.listener.H_(e,r)}Y_(t){const e={};e.database=jg(this.serializer),e.addTarget=(function(u,h){let m;const g=h.target;if(m=_f(g)?{documents:_b(u,g)}:{query:yb(u,g).ft},m.targetId=h.targetId,h.resumeToken.approximateByteSize()>0){m.resumeToken=hb(u,h.resumeToken);const _=qg(u,h.expectedCount);_!==null&&(m.expectedCount=_)}else if(h.snapshotVersion.compareTo(dt.min())>0){m.readTime=Qo(u,h.snapshotVersion.toTimestamp());const _=qg(u,h.expectedCount);_!==null&&(m.expectedCount=_)}return m})(this.serializer,t);const r=BD(this.serializer,t);r&&(e.labels=r),this.q_(e)}Z_(t){const e={};e.database=jg(this.serializer),e.removeTarget=t,this.q_(e)}}class C2 extends $b{constructor(t,e,r,o,u,h){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",e,r,o,h),this.serializer=u}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(t,e){return this.connection.T_("Write",t,e)}J_(t){return ht(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,ht(!t.writeResults||t.writeResults.length===0,55816),this.listener.ta()}onNext(t){ht(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.M_.reset();const e=LD(t.writeResults,t.commitTime),r=Ae(t.commitTime);return this.listener.na(r,e)}ra(){const t={};t.database=jg(this.serializer),this.q_(t)}ea(t){const e={streamToken:this.lastStreamToken,writes:t.map((r=>Zu(this.serializer,r)))};this.q_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N2{}class x2 extends N2{constructor(t,e,r,o){super(),this.authCredentials=t,this.appCheckCredentials=e,this.connection=r,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new J(j.FAILED_PRECONDITION,"The client has already been terminated.")}Go(t,e,r,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,h])=>this.connection.Go(t,Fg(e,r),o,u,h))).catch((u=>{throw u.name==="FirebaseError"?(u.code===j.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new J(j.UNKNOWN,u.toString())}))}Ho(t,e,r,o,u){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([h,m])=>this.connection.Ho(t,Fg(e,r),o,h,m,u))).catch((h=>{throw h.name==="FirebaseError"?(h.code===j.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new J(j.UNKNOWN,h.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class O2{constructor(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(t){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ca("Offline")))}set(t){this.Pa(),this.oa=0,t==="Online"&&(this.aa=!1),this.ca(t)}ca(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}la(t){const e=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Te(e),this.aa=!1):tt("OnlineStateTracker",e)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ya="RemoteStore";class M2{constructor(t,e,r,o,u){this.localStore=t,this.datastore=e,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=u,this.Aa.Oo((h=>{r.enqueueAndForget((async()=>{fs(this)&&(tt(ya,"Restarting streams for network reachability change."),await(async function(g){const _=at(g);_.Ea.add(4),await rl(_),_.Ra.set("Unknown"),_.Ea.delete(4),await mc(_)})(this))}))})),this.Ra=new O2(r,o)}}async function mc(s){if(fs(s))for(const t of s.da)await t(!0)}async function rl(s){for(const t of s.da)await t(!1)}function Gf(s,t){const e=at(s);e.Ia.has(t.targetId)||(e.Ia.set(t.targetId,t),Yp(e)?Kp(e):al(e).O_()&&Qp(e,t))}function Xo(s,t){const e=at(s),r=al(e);e.Ia.delete(t),r.O_()&&Zb(e,t),e.Ia.size===0&&(r.O_()?r.L_():fs(e)&&e.Ra.set("Unknown"))}function Qp(s,t){if(s.Va.Ue(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(dt.min())>0){const e=s.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(e)}al(s).Y_(t)}function Zb(s,t){s.Va.Ue(t),al(s).Z_(t)}function Kp(s){s.Va=new VD({getRemoteKeysForTarget:t=>s.remoteSyncer.getRemoteKeysForTarget(t),At:t=>s.Ia.get(t)||null,ht:()=>s.datastore.serializer.databaseId}),al(s).start(),s.Ra.ua()}function Yp(s){return fs(s)&&!al(s).x_()&&s.Ia.size>0}function fs(s){return at(s).Ea.size===0}function Jb(s){s.Va=void 0}async function P2(s){s.Ra.set("Online")}async function U2(s){s.Ia.forEach(((t,e)=>{Qp(s,t)}))}async function L2(s,t){Jb(s),Yp(s)?(s.Ra.ha(t),Kp(s)):s.Ra.set("Unknown")}async function B2(s,t,e){if(s.Ra.set("Online"),t instanceof cb&&t.state===2&&t.cause)try{await(async function(o,u){const h=u.cause;for(const m of u.targetIds)o.Ia.has(m)&&(await o.remoteSyncer.rejectListen(m,h),o.Ia.delete(m),o.Va.removeTarget(m))})(s,t)}catch(r){tt(ya,"Failed to remove targets %s: %s ",t.targetIds.join(","),r),await Rf(s,r)}else if(t instanceof sf?s.Va.Ze(t):t instanceof ub?s.Va.st(t):s.Va.tt(t),!e.isEqual(dt.min()))try{const r=await zb(s.localStore);e.compareTo(r)>=0&&await(function(u,h){const m=u.Va.Tt(h);return m.targetChanges.forEach(((g,_)=>{if(g.resumeToken.approximateByteSize()>0){const E=u.Ia.get(_);E&&u.Ia.set(_,E.withResumeToken(g.resumeToken,h))}})),m.targetMismatches.forEach(((g,_)=>{const E=u.Ia.get(g);if(!E)return;u.Ia.set(g,E.withResumeToken(_e.EMPTY_BYTE_STRING,E.snapshotVersion)),Zb(u,g);const A=new rr(E.target,g,_,E.sequenceNumber);Qp(u,A)})),u.remoteSyncer.applyRemoteEvent(m)})(s,e)}catch(r){tt(ya,"Failed to raise snapshot:",r),await Rf(s,r)}}async function Rf(s,t,e){if(!cs(t))throw t;s.Ea.add(1),await rl(s),s.Ra.set("Offline"),e||(e=()=>zb(s.localStore)),s.asyncQueue.enqueueRetryable((async()=>{tt(ya,"Retrying IndexedDB access"),await e(),s.Ea.delete(1),await mc(s)}))}function Wb(s,t){return t().catch((e=>Rf(s,e,t)))}async function sl(s){const t=at(s),e=as(t);let r=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:Zr;for(;k2(t);)try{const o=await T2(t.localStore,r);if(o===null){t.Ta.length===0&&e.L_();break}r=o.batchId,z2(t,o)}catch(o){await Rf(t,o)}tS(t)&&eS(t)}function k2(s){return fs(s)&&s.Ta.length<10}function z2(s,t){s.Ta.push(t);const e=as(s);e.O_()&&e.X_&&e.ea(t.mutations)}function tS(s){return fs(s)&&!as(s).x_()&&s.Ta.length>0}function eS(s){as(s).start()}async function q2(s){as(s).ra()}async function F2(s){const t=as(s);for(const e of s.Ta)t.ea(e.mutations)}async function j2(s,t,e){const r=s.Ta.shift(),o=Np.from(r,t,e);await Wb(s,(()=>s.remoteSyncer.applySuccessfulWrite(o))),await sl(s)}async function G2(s,t){t&&as(s).X_&&await(async function(r,o){if((function(h){return ab(h)&&h!==j.ABORTED})(o.code)){const u=r.Ta.shift();as(r).B_(),await Wb(r,(()=>r.remoteSyncer.rejectFailedWrite(u.batchId,o))),await sl(r)}})(s,t),tS(s)&&eS(s)}async function u0(s,t){const e=at(s);e.asyncQueue.verifyOperationInProgress(),tt(ya,"RemoteStore received new credentials");const r=fs(e);e.Ea.add(3),await rl(e),r&&e.Ra.set("Unknown"),await e.remoteSyncer.handleCredentialChange(t),e.Ea.delete(3),await mc(e)}async function $g(s,t){const e=at(s);t?(e.Ea.delete(2),await mc(e)):t||(e.Ea.add(2),await rl(e),e.Ra.set("Unknown"))}function al(s){return s.ma||(s.ma=(function(e,r,o){const u=at(e);return u.sa(),new V2(r,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(s.datastore,s.asyncQueue,{Xo:P2.bind(null,s),t_:U2.bind(null,s),r_:L2.bind(null,s),H_:B2.bind(null,s)}),s.da.push((async t=>{t?(s.ma.B_(),Yp(s)?Kp(s):s.Ra.set("Unknown")):(await s.ma.stop(),Jb(s))}))),s.ma}function as(s){return s.fa||(s.fa=(function(e,r,o){const u=at(e);return u.sa(),new C2(r,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(s.datastore,s.asyncQueue,{Xo:()=>Promise.resolve(),t_:q2.bind(null,s),r_:G2.bind(null,s),ta:F2.bind(null,s),na:j2.bind(null,s)}),s.da.push((async t=>{t?(s.fa.B_(),await sl(s)):(await s.fa.stop(),s.Ta.length>0&&(tt(ya,`Stopping write stream with ${s.Ta.length} pending writes`),s.Ta=[]))}))),s.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xp{constructor(t,e,r,o,u){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=r,this.op=o,this.removalCallback=u,this.deferred=new We,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((h=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(t,e,r,o,u){const h=Date.now()+r,m=new Xp(t,e,h,o,u);return m.start(r),m}start(t){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new J(j.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((t=>this.deferred.resolve(t)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function ol(s,t){if(Te("AsyncQueue",`${t}: ${s}`),cs(s))return new J(j.UNAVAILABLE,`${t}: ${s}`);throw s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Co{static emptySet(t){return new Co(t.comparator)}constructor(t){this.comparator=t?(e,r)=>t(e,r)||rt.comparator(e.key,r.key):(e,r)=>rt.comparator(e.key,r.key),this.keyedMap=Su(),this.sortedSet=new se(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal(((e,r)=>(t(e),!1)))}add(t){const e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))}delete(t){const e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this}isEqual(t){if(!(t instanceof Co)||this.size!==t.size)return!1;const e=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();for(;e.hasNext();){const o=e.getNext().key,u=r.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const t=[];return this.forEach((e=>{t.push(e.toString())})),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,e){const r=new Co;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=e,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c0{constructor(){this.ga=new se(rt.comparator)}track(t){const e=t.doc.key,r=this.ga.get(e);r?t.type!==0&&r.type===3?this.ga=this.ga.insert(e,t):t.type===3&&r.type!==1?this.ga=this.ga.insert(e,{type:r.type,doc:t.doc}):t.type===2&&r.type===2?this.ga=this.ga.insert(e,{type:2,doc:t.doc}):t.type===2&&r.type===0?this.ga=this.ga.insert(e,{type:0,doc:t.doc}):t.type===1&&r.type===0?this.ga=this.ga.remove(e):t.type===1&&r.type===2?this.ga=this.ga.insert(e,{type:1,doc:r.doc}):t.type===0&&r.type===1?this.ga=this.ga.insert(e,{type:2,doc:t.doc}):lt(63341,{Rt:t,pa:r}):this.ga=this.ga.insert(e,t)}ya(){const t=[];return this.ga.inorderTraversal(((e,r)=>{t.push(r)})),t}}class $o{constructor(t,e,r,o,u,h,m,g,_){this.query=t,this.docs=e,this.oldDocs=r,this.docChanges=o,this.mutatedKeys=u,this.fromCache=h,this.syncStateChanged=m,this.excludesMetadataChanges=g,this.hasCachedResults=_}static fromInitialDocuments(t,e,r,o,u){const h=[];return e.forEach((m=>{h.push({type:0,doc:m})})),new $o(t,e,Co.emptySet(e),h,r,o,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&lc(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const e=this.docChanges,r=t.docChanges;if(e.length!==r.length)return!1;for(let o=0;o<e.length;o++)if(e[o].type!==r[o].type||!e[o].doc.isEqual(r[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H2{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((t=>t.Da()))}}class Q2{constructor(){this.queries=h0(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(e,r){const o=at(e),u=o.queries;o.queries=h0(),u.forEach(((h,m)=>{for(const g of m.Sa)g.onError(r)}))})(this,new J(j.ABORTED,"Firestore shutting down"))}}function h0(){return new cr((s=>QA(s)),lc)}async function $p(s,t){const e=at(s);let r=3;const o=t.query;let u=e.queries.get(o);u?!u.ba()&&t.Da()&&(r=2):(u=new H2,r=t.Da()?0:1);try{switch(r){case 0:u.wa=await e.onListen(o,!0);break;case 1:u.wa=await e.onListen(o,!1);break;case 2:await e.onFirstRemoteStoreListen(o)}}catch(h){const m=ol(h,`Initialization of query '${wo(t.query)}' failed`);return void t.onError(m)}e.queries.set(o,u),u.Sa.push(t),t.va(e.onlineState),u.wa&&t.Fa(u.wa)&&Jp(e)}async function Zp(s,t){const e=at(s),r=t.query;let o=3;const u=e.queries.get(r);if(u){const h=u.Sa.indexOf(t);h>=0&&(u.Sa.splice(h,1),u.Sa.length===0?o=t.Da()?0:1:!u.ba()&&t.Da()&&(o=2))}switch(o){case 0:return e.queries.delete(r),e.onUnlisten(r,!0);case 1:return e.queries.delete(r),e.onUnlisten(r,!1);case 2:return e.onLastRemoteStoreUnlisten(r);default:return}}function K2(s,t){const e=at(s);let r=!1;for(const o of t){const u=o.query,h=e.queries.get(u);if(h){for(const m of h.Sa)m.Fa(o)&&(r=!0);h.wa=o}}r&&Jp(e)}function Y2(s,t,e){const r=at(s),o=r.queries.get(t);if(o)for(const u of o.Sa)u.onError(e);r.queries.delete(t)}function Jp(s){s.Ca.forEach((t=>{t.next()}))}var Zg,f0;(f0=Zg||(Zg={})).Ma="default",f0.Cache="cache";class Wp{constructor(t,e,r){this.query=t,this.xa=e,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(t){if(!this.options.includeMetadataChanges){const r=[];for(const o of t.docChanges)o.type!==3&&r.push(o);t=new $o(t.query,t.docs,t.oldDocs,r,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let e=!1;return this.Oa?this.Ba(t)&&(this.xa.next(t),e=!0):this.La(t,this.onlineState)&&(this.ka(t),e=!0),this.Na=t,e}onError(t){this.xa.error(t)}va(t){this.onlineState=t;let e=!1;return this.Na&&!this.Oa&&this.La(this.Na,t)&&(this.ka(this.Na),e=!0),e}La(t,e){if(!t.fromCache||!this.Da())return!0;const r=e!=="Offline";return(!this.options.qa||!r)&&(!t.docs.isEmpty()||t.hasCachedResults||e==="Offline")}Ba(t){if(t.docChanges.length>0)return!0;const e=this.Na&&this.Na.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&this.options.includeMetadataChanges===!0}ka(t){t=$o.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Oa=!0,this.xa.next(t)}Da(){return this.options.source!==Zg.Cache}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X2{constructor(t,e){this.Qa=t,this.byteLength=e}$a(){return"metadata"in this.Qa}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d0{constructor(t){this.serializer=t}$s(t){return Di(this.serializer,t)}Us(t){return t.metadata.exists?pb(this.serializer,t.document,!1):ae.newNoDocument(this.$s(t.metadata.name),this.Ks(t.metadata.readTime))}Ks(t){return Ae(t)}}class $2{constructor(t,e){this.Ua=t,this.serializer=e,this.Ka=[],this.Wa=[],this.collectionGroups=new Set,this.progress=nS(t)}get queries(){return this.Ka}get documents(){return this.Wa}Ga(t){this.progress.bytesLoaded+=t.byteLength;let e=this.progress.documentsLoaded;if(t.Qa.namedQuery)this.Ka.push(t.Qa.namedQuery);else if(t.Qa.documentMetadata){this.Wa.push({metadata:t.Qa.documentMetadata}),t.Qa.documentMetadata.exists||++e;const r=Ot.fromString(t.Qa.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else t.Qa.document&&(this.Wa[this.Wa.length-1].document=t.Qa.document,++e);return e!==this.progress.documentsLoaded?(this.progress.documentsLoaded=e,{...this.progress}):null}za(t){const e=new Map,r=new d0(this.serializer);for(const o of t)if(o.metadata.queries){const u=r.$s(o.metadata.name);for(const h of o.metadata.queries){const m=(e.get(h)||It()).add(u);e.set(h,m)}}return e}async ja(t){const e=await A2(t,new d0(this.serializer),this.Wa,this.Ua.id),r=this.za(this.documents);for(const o of this.Ka)await b2(t,o,r.get(o.name));return this.progress.taskState="Success",{progress:this.progress,Ja:this.collectionGroups,Ha:e}}}function nS(s){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:s.totalDocuments,totalBytes:s.totalBytes}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iS{constructor(t){this.key=t}}class rS{constructor(t){this.key=t}}class sS{constructor(t,e){this.query=t,this.Ya=e,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=It(),this.mutatedKeys=It(),this.eu=YA(t),this.tu=new Co(this.eu)}get nu(){return this.Ya}ru(t,e){const r=e?e.iu:new c0,o=e?e.tu:this.tu;let u=e?e.mutatedKeys:this.mutatedKeys,h=o,m=!1;const g=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,_=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(t.inorderTraversal(((E,A)=>{const S=o.get(E),O=uc(this.query,A)?A:null,H=!!S&&this.mutatedKeys.has(S.key),Z=!!O&&(O.hasLocalMutations||this.mutatedKeys.has(O.key)&&O.hasCommittedMutations);let Y=!1;S&&O?S.data.isEqual(O.data)?H!==Z&&(r.track({type:3,doc:O}),Y=!0):this.su(S,O)||(r.track({type:2,doc:O}),Y=!0,(g&&this.eu(O,g)>0||_&&this.eu(O,_)<0)&&(m=!0)):!S&&O?(r.track({type:0,doc:O}),Y=!0):S&&!O&&(r.track({type:1,doc:S}),Y=!0,(g||_)&&(m=!0)),Y&&(O?(h=h.add(O),u=Z?u.add(E):u.delete(E)):(h=h.delete(E),u=u.delete(E)))})),this.query.limit!==null)for(;h.size>this.query.limit;){const E=this.query.limitType==="F"?h.last():h.first();h=h.delete(E.key),u=u.delete(E.key),r.track({type:1,doc:E})}return{tu:h,iu:r,Cs:m,mutatedKeys:u}}su(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations}applyChanges(t,e,r,o){const u=this.tu;this.tu=t.tu,this.mutatedKeys=t.mutatedKeys;const h=t.iu.ya();h.sort(((E,A)=>(function(O,H){const Z=Y=>{switch(Y){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return lt(20277,{Rt:Y})}};return Z(O)-Z(H)})(E.type,A.type)||this.eu(E.doc,A.doc))),this.ou(r),o=o??!1;const m=e&&!o?this._u():[],g=this.Xa.size===0&&this.current&&!o?1:0,_=g!==this.Za;return this.Za=g,h.length!==0||_?{snapshot:new $o(this.query,t.tu,u,h,t.mutatedKeys,g===0,_,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:m}:{au:m}}va(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new c0,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(t){return!this.Ya.has(t)&&!!this.tu.has(t)&&!this.tu.get(t).hasLocalMutations}ou(t){t&&(t.addedDocuments.forEach((e=>this.Ya=this.Ya.add(e))),t.modifiedDocuments.forEach((e=>{})),t.removedDocuments.forEach((e=>this.Ya=this.Ya.delete(e))),this.current=t.current)}_u(){if(!this.current)return[];const t=this.Xa;this.Xa=It(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const e=[];return t.forEach((r=>{this.Xa.has(r)||e.push(new rS(r))})),this.Xa.forEach((r=>{t.has(r)||e.push(new iS(r))})),e}cu(t){this.Ya=t.Qs,this.Xa=It();const e=this.ru(t.documents);return this.applyChanges(e,!0)}lu(){return $o.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const ds="SyncEngine";class Z2{constructor(t,e,r){this.query=t,this.targetId=e,this.view=r}}class J2{constructor(t){this.key=t,this.hu=!1}}class W2{constructor(t,e,r,o,u,h){this.localStore=t,this.remoteStore=e,this.eventManager=r,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=h,this.Pu={},this.Tu=new cr((m=>QA(m)),lc),this.Iu=new Map,this.Eu=new Set,this.du=new se(rt.comparator),this.Au=new Map,this.Ru=new Bp,this.Vu={},this.mu=new Map,this.fu=_a.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function tV(s,t,e=!0){const r=Hf(s);let o;const u=r.Tu.get(t);return u?(r.sharedClientState.addLocalQueryTarget(u.targetId),o=u.view.lu()):o=await aS(r,t,e,!0),o}async function eV(s,t){const e=Hf(s);await aS(e,t,!0,!1)}async function aS(s,t,e,r){const o=await Ko(s.localStore,gn(t)),u=o.targetId,h=s.sharedClientState.addLocalQueryTarget(u,e);let m;return r&&(m=await t_(s,t,u,h==="current",o.resumeToken)),s.isPrimaryClient&&e&&Gf(s.remoteStore,o),m}async function t_(s,t,e,r,o){s.pu=(A,S,O)=>(async function(Z,Y,mt,ut){let it=Y.view.ru(mt);it.Cs&&(it=await Sf(Z.localStore,Y.query,!1).then((({documents:N})=>Y.view.ru(N,it))));const St=ut&&ut.targetChanges.get(Y.targetId),ft=ut&&ut.targetMismatches.get(Y.targetId)!=null,Tt=Y.view.applyChanges(it,Z.isPrimaryClient,St,ft);return Jg(Z,Y.targetId,Tt.au),Tt.snapshot})(s,A,S,O);const u=await Sf(s.localStore,t,!0),h=new sS(t,u.Qs),m=h.ru(u.documents),g=fc.createSynthesizedTargetChangeForCurrentChange(e,r&&s.onlineState!=="Offline",o),_=h.applyChanges(m,s.isPrimaryClient,g);Jg(s,e,_.au);const E=new Z2(t,e,h);return s.Tu.set(t,E),s.Iu.has(e)?s.Iu.get(e).push(t):s.Iu.set(e,[t]),_.snapshot}async function nV(s,t,e){const r=at(s),o=r.Tu.get(t),u=r.Iu.get(o.targetId);if(u.length>1)return r.Iu.set(o.targetId,u.filter((h=>!lc(h,t)))),void r.Tu.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(o.targetId),r.sharedClientState.isActiveQueryTarget(o.targetId)||await Yo(r.localStore,o.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(o.targetId),e&&Xo(r.remoteStore,o.targetId),Zo(r,o.targetId)})).catch(us)):(Zo(r,o.targetId),await Yo(r.localStore,o.targetId,!0))}async function iV(s,t){const e=at(s),r=e.Tu.get(t),o=e.Iu.get(r.targetId);e.isPrimaryClient&&o.length===1&&(e.sharedClientState.removeLocalQueryTarget(r.targetId),Xo(e.remoteStore,r.targetId))}async function rV(s,t,e){const r=r_(s);try{const o=await(function(h,m){const g=at(h),_=Ht.now(),E=m.reduce(((O,H)=>O.add(H.key)),It());let A,S;return g.persistence.runTransaction("Locally write mutations","readwrite",(O=>{let H=bn(),Z=It();return g.Ns.getEntries(O,E).next((Y=>{H=Y,H.forEach(((mt,ut)=>{ut.isValidDocument()||(Z=Z.add(mt))}))})).next((()=>g.localDocuments.getOverlayedDocuments(O,H))).next((Y=>{A=Y;const mt=[];for(const ut of m){const it=ID(ut,A.get(ut.key).overlayedDocument);it!=null&&mt.push(new hr(ut.key,it,LA(it.value.mapValue),he.exists(!0)))}return g.mutationQueue.addMutationBatch(O,_,mt,m)})).next((Y=>{S=Y;const mt=Y.applyToLocalDocumentSet(A,Z);return g.documentOverlayCache.saveOverlays(O,Y.batchId,mt)}))})).then((()=>({batchId:S.batchId,changes:$A(A)})))})(r.localStore,t);r.sharedClientState.addPendingMutation(o.batchId),(function(h,m,g){let _=h.Vu[h.currentUser.toKey()];_||(_=new se(bt)),_=_.insert(m,g),h.Vu[h.currentUser.toKey()]=_})(r,o.batchId,e),await fr(r,o.changes),await sl(r.remoteStore)}catch(o){const u=ol(o,"Failed to persist write");e.reject(u)}}async function oS(s,t){const e=at(s);try{const r=await E2(e.localStore,t);t.targetChanges.forEach(((o,u)=>{const h=e.Au.get(u);h&&(ht(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?h.hu=!0:o.modifiedDocuments.size>0?ht(h.hu,14607):o.removedDocuments.size>0&&(ht(h.hu,42227),h.hu=!1))})),await fr(e,r,t)}catch(r){await us(r)}}function m0(s,t,e){const r=at(s);if(r.isPrimaryClient&&e===0||!r.isPrimaryClient&&e===1){const o=[];r.Tu.forEach(((u,h)=>{const m=h.view.va(t);m.snapshot&&o.push(m.snapshot)})),(function(h,m){const g=at(h);g.onlineState=m;let _=!1;g.queries.forEach(((E,A)=>{for(const S of A.Sa)S.va(m)&&(_=!0)})),_&&Jp(g)})(r.eventManager,t),o.length&&r.Pu.H_(o),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function sV(s,t,e){const r=at(s);r.sharedClientState.updateQueryState(t,"rejected",e);const o=r.Au.get(t),u=o&&o.key;if(u){let h=new se(rt.comparator);h=h.insert(u,ae.newNoDocument(u,dt.min()));const m=It().add(u),g=new hc(dt.min(),new Map,new se(bt),h,m);await oS(r,g),r.du=r.du.remove(u),r.Au.delete(t),i_(r)}else await Yo(r.localStore,t,!1).then((()=>Zo(r,t,e))).catch(us)}async function aV(s,t){const e=at(s),r=t.batch.batchId;try{const o=await v2(e.localStore,t);n_(e,r,null),e_(e,r),e.sharedClientState.updateMutationState(r,"acknowledged"),await fr(e,o)}catch(o){await us(o)}}async function oV(s,t,e){const r=at(s);try{const o=await(function(h,m){const g=at(h);return g.persistence.runTransaction("Reject batch","readwrite-primary",(_=>{let E;return g.mutationQueue.lookupMutationBatch(_,m).next((A=>(ht(A!==null,37113),E=A.keys(),g.mutationQueue.removeMutationBatch(_,A)))).next((()=>g.mutationQueue.performConsistencyCheck(_))).next((()=>g.documentOverlayCache.removeOverlaysForBatchId(_,E,m))).next((()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(_,E))).next((()=>g.localDocuments.getDocuments(_,E)))}))})(r.localStore,t);n_(r,t,e),e_(r,t),r.sharedClientState.updateMutationState(t,"rejected",e),await fr(r,o)}catch(o){await us(o)}}async function lV(s,t){const e=at(s);fs(e.remoteStore)||tt(ds,"The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=await(function(h){const m=at(h);return m.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(g=>m.mutationQueue.getHighestUnacknowledgedBatchId(g)))})(e.localStore);if(r===Zr)return void t.resolve();const o=e.mu.get(r)||[];o.push(t),e.mu.set(r,o)}catch(r){const o=ol(r,"Initialization of waitForPendingWrites() operation failed");t.reject(o)}}function e_(s,t){(s.mu.get(t)||[]).forEach((e=>{e.resolve()})),s.mu.delete(t)}function n_(s,t,e){const r=at(s);let o=r.Vu[r.currentUser.toKey()];if(o){const u=o.get(t);u&&(e?u.reject(e):u.resolve(),o=o.remove(t)),r.Vu[r.currentUser.toKey()]=o}}function Zo(s,t,e=null){s.sharedClientState.removeLocalQueryTarget(t);for(const r of s.Iu.get(t))s.Tu.delete(r),e&&s.Pu.yu(r,e);s.Iu.delete(t),s.isPrimaryClient&&s.Ru.jr(t).forEach((r=>{s.Ru.containsKey(r)||lS(s,r)}))}function lS(s,t){s.Eu.delete(t.path.canonicalString());const e=s.du.get(t);e!==null&&(Xo(s.remoteStore,e),s.du=s.du.remove(t),s.Au.delete(e),i_(s))}function Jg(s,t,e){for(const r of e)r instanceof iS?(s.Ru.addReference(r.key,t),uV(s,r)):r instanceof rS?(tt(ds,"Document no longer in limbo: "+r.key),s.Ru.removeReference(r.key,t),s.Ru.containsKey(r.key)||lS(s,r.key)):lt(19791,{wu:r})}function uV(s,t){const e=t.key,r=e.path.canonicalString();s.du.get(e)||s.Eu.has(r)||(tt(ds,"New document in limbo: "+e),s.Eu.add(r),i_(s))}function i_(s){for(;s.Eu.size>0&&s.du.size<s.maxConcurrentLimboResolutions;){const t=s.Eu.values().next().value;s.Eu.delete(t);const e=new rt(Ot.fromString(t)),r=s.fu.next();s.Au.set(r,new J2(e)),s.du=s.du.insert(e,r),Gf(s.remoteStore,new rr(gn(el(e.path)),r,"TargetPurposeLimboResolution",Tn.ce))}}async function fr(s,t,e){const r=at(s),o=[],u=[],h=[];r.Tu.isEmpty()||(r.Tu.forEach(((m,g)=>{h.push(r.pu(g,t,e).then((_=>{var E;if((_||e)&&r.isPrimaryClient){const A=_?!_.fromCache:(E=e==null?void 0:e.targetChanges.get(g.targetId))==null?void 0:E.current;r.sharedClientState.updateQueryState(g.targetId,A?"current":"not-current")}if(_){o.push(_);const A=Fp.As(g.targetId,_);u.push(A)}})))})),await Promise.all(h),r.Pu.H_(o),await(async function(g,_){const E=at(g);try{await E.persistence.runTransaction("notifyLocalViewChanges","readwrite",(A=>B.forEach(_,(S=>B.forEach(S.Es,(O=>E.persistence.referenceDelegate.addReference(A,S.targetId,O))).next((()=>B.forEach(S.ds,(O=>E.persistence.referenceDelegate.removeReference(A,S.targetId,O)))))))))}catch(A){if(!cs(A))throw A;tt(jp,"Failed to update sequence numbers: "+A)}for(const A of _){const S=A.targetId;if(!A.fromCache){const O=E.Ms.get(S),H=O.snapshotVersion,Z=O.withLastLimboFreeSnapshotVersion(H);E.Ms=E.Ms.insert(S,Z)}}})(r.localStore,u))}async function cV(s,t){const e=at(s);if(!e.currentUser.isEqual(t)){tt(ds,"User change. New user:",t.toKey());const r=await kb(e.localStore,t);e.currentUser=t,(function(u,h){u.mu.forEach((m=>{m.forEach((g=>{g.reject(new J(j.CANCELLED,h))}))})),u.mu.clear()})(e,"'waitForPendingWrites' promise is rejected due to a user change."),e.sharedClientState.handleUserChange(t,r.removedBatchIds,r.addedBatchIds),await fr(e,r.Ls)}}function hV(s,t){const e=at(s),r=e.Au.get(t);if(r&&r.hu)return It().add(r.key);{let o=It();const u=e.Iu.get(t);if(!u)return o;for(const h of u){const m=e.Tu.get(h);o=o.unionWith(m.view.nu)}return o}}async function fV(s,t){const e=at(s),r=await Sf(e.localStore,t.query,!0),o=t.view.cu(r);return e.isPrimaryClient&&Jg(e,t.targetId,o.au),o}async function dV(s,t){const e=at(s);return jb(e.localStore,t).then((r=>fr(e,r)))}async function mV(s,t,e,r){const o=at(s),u=await(function(m,g){const _=at(m),E=at(_.mutationQueue);return _.persistence.runTransaction("Lookup mutation documents","readonly",(A=>E.er(A,g).next((S=>S?_.localDocuments.getDocuments(A,S):B.resolve(null)))))})(o.localStore,t);u!==null?(e==="pending"?await sl(o.remoteStore):e==="acknowledged"||e==="rejected"?(n_(o,t,r||null),e_(o,t),(function(m,g){at(at(m).mutationQueue).ir(g)})(o.localStore,t)):lt(6720,"Unknown batchState",{Su:e}),await fr(o,u)):tt(ds,"Cannot apply mutation batch with id: "+t)}async function gV(s,t){const e=at(s);if(Hf(e),r_(e),t===!0&&e.gu!==!0){const r=e.sharedClientState.getAllActiveQueryTargets(),o=await g0(e,r.toArray());e.gu=!0,await $g(e.remoteStore,!0);for(const u of o)Gf(e.remoteStore,u)}else if(t===!1&&e.gu!==!1){const r=[];let o=Promise.resolve();e.Iu.forEach(((u,h)=>{e.sharedClientState.isLocalQueryTarget(h)?r.push(h):o=o.then((()=>(Zo(e,h),Yo(e.localStore,h,!0)))),Xo(e.remoteStore,h)})),await o,await g0(e,r),(function(h){const m=at(h);m.Au.forEach(((g,_)=>{Xo(m.remoteStore,_)})),m.Ru.Jr(),m.Au=new Map,m.du=new se(rt.comparator)})(e),e.gu=!1,await $g(e.remoteStore,!1)}}async function g0(s,t,e){const r=at(s),o=[],u=[];for(const h of t){let m;const g=r.Iu.get(h);if(g&&g.length!==0){m=await Ko(r.localStore,gn(g[0]));for(const _ of g){const E=r.Tu.get(_),A=await fV(r,E);A.snapshot&&u.push(A.snapshot)}}else{const _=await Fb(r.localStore,h);m=await Ko(r.localStore,_),await t_(r,uS(_),h,!1,m.resumeToken)}o.push(m)}return r.Pu.H_(u),o}function uS(s){return HA(s.path,s.collectionGroup,s.orderBy,s.filters,s.limit,"F",s.startAt,s.endAt)}function pV(s){return(function(e){return at(at(e).persistence).Ts()})(at(s).localStore)}async function _V(s,t,e,r){const o=at(s);if(o.gu)return void tt(ds,"Ignoring unexpected query state notification.");const u=o.Iu.get(t);if(u&&u.length>0)switch(e){case"current":case"not-current":{const h=await jb(o.localStore,KA(u[0])),m=hc.createSynthesizedRemoteEventForCurrentChange(t,e==="current",_e.EMPTY_BYTE_STRING);await fr(o,h,m);break}case"rejected":await Yo(o.localStore,t,!0),Zo(o,t,r);break;default:lt(64155,e)}}async function yV(s,t,e){const r=Hf(s);if(r.gu){for(const o of t){if(r.Iu.has(o)&&r.sharedClientState.isActiveQueryTarget(o)){tt(ds,"Adding an already active target "+o);continue}const u=await Fb(r.localStore,o),h=await Ko(r.localStore,u);await t_(r,uS(u),h.targetId,!1,h.resumeToken),Gf(r.remoteStore,h)}for(const o of e)r.Iu.has(o)&&await Yo(r.localStore,o,!1).then((()=>{Xo(r.remoteStore,o),Zo(r,o)})).catch(us)}}function Hf(s){const t=at(s);return t.remoteStore.remoteSyncer.applyRemoteEvent=oS.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=hV.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=sV.bind(null,t),t.Pu.H_=K2.bind(null,t.eventManager),t.Pu.yu=Y2.bind(null,t.eventManager),t}function r_(s){const t=at(s);return t.remoteStore.remoteSyncer.applySuccessfulWrite=aV.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=oV.bind(null,t),t}function vV(s,t,e){const r=at(s);(async function(u,h,m){try{const g=await h.getMetadata();if(await(function(O,H){const Z=at(O),Y=Ae(H.createTime);return Z.persistence.runTransaction("hasNewerBundle","readonly",(mt=>Z.Ii.getBundleMetadata(mt,H.id))).then((mt=>!!mt&&mt.createTime.compareTo(Y)>=0))})(u.localStore,g))return await h.close(),m._completeWith((function(O){return{taskState:"Success",documentsLoaded:O.totalDocuments,bytesLoaded:O.totalBytes,totalDocuments:O.totalDocuments,totalBytes:O.totalBytes}})(g)),Promise.resolve(new Set);m._updateProgress(nS(g));const _=new $2(g,h.serializer);let E=await h.bu();for(;E;){const S=await _.Ga(E);S&&m._updateProgress(S),E=await h.bu()}const A=await _.ja(u.localStore);return await fr(u,A.Ha,void 0),await(function(O,H){const Z=at(O);return Z.persistence.runTransaction("Save bundle","readwrite",(Y=>Z.Ii.saveBundleMetadata(Y,H)))})(u.localStore,g),m._completeWith(A.progress),Promise.resolve(A.Ja)}catch(g){return Ci(ds,`Loading bundle failed with ${g}`),m._failWith(g),Promise.resolve(new Set)}})(r,t,e).then((o=>{r.sharedClientState.notifyBundleLoaded(o)}))}class Ju{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=dc(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)}Fu(t,e){return null}Mu(t,e){return null}vu(t){return Bb(this.persistence,new Lb,t.initialUser,this.serializer)}Cu(t){return new kp(jf.mi,this.serializer)}Du(t){return new Yb}async terminate(){var t,e;(t=this.gcScheduler)==null||t.stop(),(e=this.indexBackfillerScheduler)==null||e.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Ju.provider={build:()=>new Ju};class EV extends Ju{constructor(t){super(),this.cacheSizeBytes=t}Fu(t,e){ht(this.persistence.referenceDelegate instanceof bf,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new Nb(r,t.asyncQueue,e)}Cu(t){const e=this.cacheSizeBytes!==void 0?sn.withCacheSize(this.cacheSizeBytes):sn.DEFAULT;return new kp((r=>bf.mi(r,e)),this.serializer)}}class cS extends Ju{constructor(t,e,r){super(),this.xu=t,this.cacheSizeBytes=e,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(t){await super.initialize(t),await this.xu.initialize(this,t),await r_(this.xu.syncEngine),await sl(this.xu.remoteStore),await this.persistence.Ji((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}vu(t){return Bb(this.persistence,new Lb,t.initialUser,this.serializer)}Fu(t,e){const r=this.persistence.referenceDelegate.garbageCollector;return new Nb(r,t.asyncQueue,e)}Mu(t,e){const r=new VR(e,this.persistence);return new DR(t.asyncQueue,r)}Cu(t){const e=qp(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?sn.withCacheSize(this.cacheSizeBytes):sn.DEFAULT;return new zp(this.synchronizeTabs,e,t.clientId,r,t.asyncQueue,Xb(),of(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(t){return new Yb}}class TV extends cS{constructor(t,e){super(t,e,!1),this.xu=t,this.cacheSizeBytes=e,this.synchronizeTabs=!0}async initialize(t){await super.initialize(t);const e=this.xu.syncEngine;this.sharedClientState instanceof Eg&&(this.sharedClientState.syncEngine={Co:mV.bind(null,e),vo:_V.bind(null,e),Fo:yV.bind(null,e),Ts:pV.bind(null,e),Do:dV.bind(null,e)},await this.sharedClientState.start()),await this.persistence.Ji((async r=>{await gV(this.xu.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())}))}Du(t){const e=Xb();if(!Eg.v(e))throw new J(j.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=qp(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new Eg(e,t.asyncQueue,r,t.clientId,t.initialUser)}}class Wu{async initialize(t,e){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>m0(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=cV.bind(null,this.syncEngine),await $g(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return(function(){return new Q2})()}createDatastore(t){const e=dc(t.databaseInfo.databaseId),r=(function(u){return new D2(u)})(t.databaseInfo);return(function(u,h,m,g){return new x2(u,h,m,g)})(t.authCredentials,t.appCheckCredentials,r,e)}createRemoteStore(t){return(function(r,o,u,h,m){return new M2(r,o,u,h,m)})(this.localStore,this.datastore,t.asyncQueue,(e=>m0(this.syncEngine,e,0)),(function(){return o0.v()?new o0:new S2})())}createSyncEngine(t,e){return(function(o,u,h,m,g,_,E){const A=new W2(o,u,h,m,g,_);return E&&(A.gu=!0),A})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)}async terminate(){var t,e;await(async function(o){const u=at(o);tt(ya,"RemoteStore shutting down."),u.Ea.add(5),await rl(u),u.Aa.shutdown(),u.Ra.set("Unknown")})(this.remoteStore),(t=this.datastore)==null||t.terminate(),(e=this.eventManager)==null||e.terminate()}}Wu.provider={build:()=>new Wu};function p0(s,t=10240){let e=0;return{async read(){if(e<s.byteLength){const r={value:s.slice(e,e+t),done:!1};return e+=t,r}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qf{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Ou(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Ou(this.observer.error,t):Te("Uncaught Error in snapshot listener:",t.toString()))}Nu(){this.muted=!0}Ou(t,e){setTimeout((()=>{this.muted||t(e)}),0)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AV{constructor(t,e){this.Bu=t,this.serializer=e,this.metadata=new We,this.buffer=new Uint8Array,this.Lu=(function(){return new TextDecoder("utf-8")})(),this.ku().then((r=>{r&&r.$a()?this.metadata.resolve(r.Qa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r==null?void 0:r.Qa)}`))}),(r=>this.metadata.reject(r)))}close(){return this.Bu.cancel()}async getMetadata(){return this.metadata.promise}async bu(){return await this.getMetadata(),this.ku()}async ku(){const t=await this.qu();if(t===null)return null;const e=this.Lu.decode(t),r=Number(e);isNaN(r)&&this.Qu(`length string (${e}) is not valid number`);const o=await this.$u(r);return new X2(JSON.parse(o),t.length+r)}Uu(){return this.buffer.findIndex((t=>t===123))}async qu(){for(;this.Uu()<0&&!await this.Ku(););if(this.buffer.length===0)return null;const t=this.Uu();t<0&&this.Qu("Reached the end of bundle when a length string is expected.");const e=this.buffer.slice(0,t);return this.buffer=this.buffer.slice(t),e}async $u(t){for(;this.buffer.length<t;)await this.Ku()&&this.Qu("Reached the end of bundle when more is expected.");const e=this.Lu.decode(this.buffer.slice(0,t));return this.buffer=this.buffer.slice(t),e}Qu(t){throw this.Bu.cancel(),new Error(`Invalid bundle format: ${t}`)}async Ku(){const t=await this.Bu.read();if(!t.done){const e=new Uint8Array(this.buffer.length+t.value.length);e.set(this.buffer),e.set(t.value,this.buffer.length),this.buffer=e}return t.done}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bV{constructor(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(t){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new J(j.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const e=await(async function(o,u){const h=at(o),m={documents:u.map((A=>$u(h.serializer,A)))},g=await h.Ho("BatchGetDocuments",h.serializer.databaseId,Ot.emptyPath(),m,u.length),_=new Map;g.forEach((A=>{const S=PD(h.serializer,A);_.set(S.key.toString(),S)}));const E=[];return u.forEach((A=>{const S=_.get(A.toString());ht(!!S,55234,{key:A}),E.push(S)})),E})(this.datastore,t);return e.forEach((r=>this.recordVersion(r))),e}set(t,e){this.write(e.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())}update(t,e){try{this.write(e.toMutation(t,this.preconditionForUpdate(t)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(t.toString())}delete(t){this.write(new il(t,this.precondition(t))),this.writtenDocs.add(t.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const t=this.readVersions;this.mutations.forEach((e=>{t.delete(e.key.toString())})),t.forEach(((e,r)=>{const o=rt.fromPath(r);this.mutations.push(new Vp(o,this.precondition(o)))})),await(async function(r,o){const u=at(r),h={writes:o.map((m=>Zu(u.serializer,m)))};await u.Go("Commit",u.serializer.databaseId,Ot.emptyPath(),h)})(this.datastore,this.mutations),this.committed=!0}recordVersion(t){let e;if(t.isFoundDocument())e=t.version;else{if(!t.isNoDocument())throw lt(50498,{Gu:t.constructor.name});e=dt.min()}const r=this.readVersions.get(t.key.toString());if(r){if(!e.isEqual(r))throw new J(j.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),e)}precondition(t){const e=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&e?e.isEqual(dt.min())?he.exists(!1):he.updateTime(e):he.none()}preconditionForUpdate(t){const e=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&e){if(e.isEqual(dt.min()))throw new J(j.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return he.updateTime(e)}return he.exists(!0)}write(t){this.ensureCommitNotCalled(),this.mutations.push(t)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SV{constructor(t,e,r,o,u){this.asyncQueue=t,this.datastore=e,this.options=r,this.updateFunction=o,this.deferred=u,this.zu=r.maxAttempts,this.M_=new Hp(this.asyncQueue,"transaction_retry")}ju(){this.zu-=1,this.Ju()}Ju(){this.M_.p_((async()=>{const t=new bV(this.datastore),e=this.Hu(t);e&&e.then((r=>{this.asyncQueue.enqueueAndForget((()=>t.commit().then((()=>{this.deferred.resolve(r)})).catch((o=>{this.Yu(o)}))))})).catch((r=>{this.Yu(r)}))}))}Hu(t){try{const e=this.updateFunction(t);return!sc(e)&&e.catch&&e.then?e:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}Yu(t){this.zu>0&&this.Zu(t)?(this.zu-=1,this.asyncQueue.enqueueAndForget((()=>(this.Ju(),Promise.resolve())))):this.deferred.reject(t)}Zu(t){if((t==null?void 0:t.name)==="FirebaseError"){const e=t.code;return e==="aborted"||e==="failed-precondition"||e==="already-exists"||!ab(e)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const os="FirestoreClient";class wV{constructor(t,e,r,o,u){this.authCredentials=t,this.appCheckCredentials=e,this.asyncQueue=r,this.databaseInfo=o,this.user=Ge.UNAUTHENTICATED,this.clientId=gp.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(r,(async h=>{tt(os,"Received user=",h.uid),await this.authCredentialListener(h),this.user=h})),this.appCheckCredentials.start(r,(h=>(tt(os,"Received new app check token=",h),this.appCheckCredentialListener(h,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new We;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(e){const r=ol(e,"Failed to shutdown persistence");t.reject(r)}})),t.promise}}async function Ag(s,t){s.asyncQueue.verifyOperationInProgress(),tt(os,"Initializing OfflineComponentProvider");const e=s.configuration;await t.initialize(e);let r=e.initialUser;s.setCredentialChangeListener((async o=>{r.isEqual(o)||(await kb(t.localStore,o),r=o)})),t.persistence.setDatabaseDeletedListener((()=>s.terminate())),s._offlineComponents=t}async function _0(s,t){s.asyncQueue.verifyOperationInProgress();const e=await s_(s);tt(os,"Initializing OnlineComponentProvider"),await t.initialize(e,s.configuration),s.setCredentialChangeListener((r=>u0(t.remoteStore,r))),s.setAppCheckTokenChangeListener(((r,o)=>u0(t.remoteStore,o))),s._onlineComponents=t}async function s_(s){if(!s._offlineComponents)if(s._uninitializedComponentsProvider){tt(os,"Using user provided OfflineComponentProvider");try{await Ag(s,s._uninitializedComponentsProvider._offline)}catch(t){const e=t;if(!(function(o){return o.name==="FirebaseError"?o.code===j.FAILED_PRECONDITION||o.code===j.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(e))throw e;Ci("Error using user provided cache. Falling back to memory cache: "+e),await Ag(s,new Ju)}}else tt(os,"Using default OfflineComponentProvider"),await Ag(s,new EV(void 0));return s._offlineComponents}async function Kf(s){return s._onlineComponents||(s._uninitializedComponentsProvider?(tt(os,"Using user provided OnlineComponentProvider"),await _0(s,s._uninitializedComponentsProvider._online)):(tt(os,"Using default OnlineComponentProvider"),await _0(s,new Wu))),s._onlineComponents}function hS(s){return s_(s).then((t=>t.persistence))}function a_(s){return s_(s).then((t=>t.localStore))}function fS(s){return Kf(s).then((t=>t.remoteStore))}function o_(s){return Kf(s).then((t=>t.syncEngine))}function IV(s){return Kf(s).then((t=>t.datastore))}async function Jo(s){const t=await Kf(s),e=t.eventManager;return e.onListen=tV.bind(null,t.syncEngine),e.onUnlisten=nV.bind(null,t.syncEngine),e.onFirstRemoteStoreListen=eV.bind(null,t.syncEngine),e.onLastRemoteStoreUnlisten=iV.bind(null,t.syncEngine),e}function RV(s){return s.asyncQueue.enqueue((async()=>{const t=await hS(s),e=await fS(s);return t.setNetworkEnabled(!0),(function(o){const u=at(o);return u.Ea.delete(0),mc(u)})(e)}))}function DV(s){return s.asyncQueue.enqueue((async()=>{const t=await hS(s),e=await fS(s);return t.setNetworkEnabled(!1),(async function(o){const u=at(o);u.Ea.add(0),await rl(u),u.Ra.set("Offline")})(e)}))}function VV(s,t){const e=new We;return s.asyncQueue.enqueueAndForget((async()=>(async function(o,u,h){try{const m=await(function(_,E){const A=at(_);return A.persistence.runTransaction("read document","readonly",(S=>A.localDocuments.getDocument(S,E)))})(o,u);m.isFoundDocument()?h.resolve(m):m.isNoDocument()?h.resolve(null):h.reject(new J(j.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(m){const g=ol(m,`Failed to get document '${u} from cache`);h.reject(g)}})(await a_(s),t,e))),e.promise}function dS(s,t,e={}){const r=new We;return s.asyncQueue.enqueueAndForget((async()=>(function(u,h,m,g,_){const E=new Qf({next:S=>{E.Nu(),h.enqueueAndForget((()=>Zp(u,A)));const O=S.docs.has(m);!O&&S.fromCache?_.reject(new J(j.UNAVAILABLE,"Failed to get document because the client is offline.")):O&&S.fromCache&&g&&g.source==="server"?_.reject(new J(j.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):_.resolve(S)},error:S=>_.reject(S)}),A=new Wp(el(m.path),E,{includeMetadataChanges:!0,qa:!0});return $p(u,A)})(await Jo(s),s.asyncQueue,t,e,r))),r.promise}function CV(s,t){const e=new We;return s.asyncQueue.enqueueAndForget((async()=>(async function(o,u,h){try{const m=await Sf(o,u,!0),g=new sS(u,m.Qs),_=g.ru(m.documents),E=g.applyChanges(_,!1);h.resolve(E.snapshot)}catch(m){const g=ol(m,`Failed to execute query '${u} against cache`);h.reject(g)}})(await a_(s),t,e))),e.promise}function mS(s,t,e={}){const r=new We;return s.asyncQueue.enqueueAndForget((async()=>(function(u,h,m,g,_){const E=new Qf({next:S=>{E.Nu(),h.enqueueAndForget((()=>Zp(u,A))),S.fromCache&&g.source==="server"?_.reject(new J(j.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):_.resolve(S)},error:S=>_.reject(S)}),A=new Wp(m,E,{includeMetadataChanges:!0,qa:!0});return $p(u,A)})(await Jo(s),s.asyncQueue,t,e,r))),r.promise}function NV(s,t){const e=new Qf(t);return s.asyncQueue.enqueueAndForget((async()=>(function(o,u){at(o).Ca.add(u),u.next()})(await Jo(s),e))),()=>{e.Nu(),s.asyncQueue.enqueueAndForget((async()=>(function(o,u){at(o).Ca.delete(u)})(await Jo(s),e)))}}function xV(s,t,e,r){const o=(function(h,m){let g;return g=typeof h=="string"?lb().encode(h):h,(function(E,A){return new AV(E,A)})((function(E,A){if(E instanceof Uint8Array)return p0(E,A);if(E instanceof ArrayBuffer)return p0(new Uint8Array(E),A);if(E instanceof ReadableStream)return E.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")})(g),m)})(e,dc(t));s.asyncQueue.enqueueAndForget((async()=>{vV(await o_(s),o,r)}))}function OV(s,t){return s.asyncQueue.enqueue((async()=>(function(r,o){const u=at(r);return u.persistence.runTransaction("Get named query","readonly",(h=>u.Ii.getNamedQuery(h,o)))})(await a_(s),t)))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gS(s){const t={};return s.timeoutSeconds!==void 0&&(t.timeoutSeconds=s.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y0=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pS="firestore.googleapis.com",v0=!0;class E0{constructor(t){if(t.host===void 0){if(t.ssl!==void 0)throw new J(j.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=pS,this.ssl=v0}else this.host=t.host,this.ssl=t.ssl??v0;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=Rb;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<t2)throw new J(j.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}uA("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=gS(t.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new J(j.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new J(j.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new J(j.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&(function(r,o){return r.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class gc{constructor(t,e,r,o){this._authCredentials=t,this._appCheckCredentials=e,this._databaseId=r,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new E0({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new J(j.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new J(j.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new E0(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new pR;switch(r.type){case"firstParty":return new ER(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new J(j.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(e){const r=y0.get(e);r&&(tt("ComponentProvider","Removing Datastore"),y0.delete(e),r.terminate())})(this),Promise.resolve()}}function MV(s,t,e,r={}){var _;s=qt(s,gc);const o=ap(t),u=s._getSettings(),h={...u,emulatorOptions:s._getEmulatorOptions()},m=`${t}:${e}`;o&&(O1(`https://${m}`),L1("Firestore",!0)),u.host!==pS&&u.host!==m&&Ci("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const g={...u,host:m,ssl:o,emulatorOptions:r};if(!No(g,h)&&(s._setSettings(g),r.mockUserToken)){let E,A;if(typeof r.mockUserToken=="string")E=r.mockUserToken,A=Ge.MOCK_USER;else{E=M1(r.mockUserToken,(_=s._app)==null?void 0:_.options.projectId);const S=r.mockUserToken.sub||r.mockUserToken.user_id;if(!S)throw new J(j.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");A=new Ge(S)}s._authCredentials=new _R(new oA(E,A))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let pn=class _S{constructor(t,e,r){this.converter=e,this._query=r,this.type="query",this.firestore=t}withConverter(t){return new _S(this.firestore,t,this._query)}},re=class Ru{constructor(t,e,r){this.converter=e,this._key=r,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Jr(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Ru(this.firestore,t,this._key)}toJSON(){return{type:Ru._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,e,r){if(rc(e,Ru._jsonSchema))return new Ru(t,r||null,new rt(Ot.fromString(e.referencePath)))}};re._jsonSchemaVersion="firestore/documentReference/1.0",re._jsonSchema={type:Ve("string",re._jsonSchemaVersion),referencePath:Ve("string")};let Jr=class yS extends pn{constructor(t,e,r){super(t,e,el(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new re(this.firestore,null,new rt(t))}withConverter(t){return new yS(this.firestore,t,this._path)}};function vS(s,t,...e){if(s=Ce(s),pp("collection","path",t),s instanceof gc){const r=Ot.fromString(t,...e);return lT(r),new Jr(s,null,r)}{if(!(s instanceof re||s instanceof Jr))throw new J(j.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=s._path.child(Ot.fromString(t,...e));return lT(r),new Jr(s.firestore,null,r)}}function PV(s,t){if(s=qt(s,gc),pp("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new J(j.INVALID_ARGUMENT,`Invalid collection ID '${t}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new pn(s,null,(function(r){return new ur(Ot.emptyPath(),r)})(t))}function Df(s,t,...e){if(s=Ce(s),arguments.length===1&&(t=gp.newId()),pp("doc","path",t),s instanceof gc){const r=Ot.fromString(t,...e);return oT(r),new re(s,null,new rt(r))}{if(!(s instanceof re||s instanceof Jr))throw new J(j.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=s._path.child(Ot.fromString(t,...e));return oT(r),new re(s.firestore,s instanceof Jr?s.converter:null,new rt(r))}}function ES(s,t){return s=Ce(s),t=Ce(t),(s instanceof re||s instanceof Jr)&&(t instanceof re||t instanceof Jr)&&s.firestore===t.firestore&&s.path===t.path&&s.converter===t.converter}function TS(s,t){return s=Ce(s),t=Ce(t),s instanceof pn&&t instanceof pn&&s.firestore===t.firestore&&lc(s._query,t._query)&&s.converter===t.converter}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T0="AsyncQueue";class A0{constructor(t=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Hp(this,"async_queue_retry"),this._c=()=>{const r=of();r&&tt(T0,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=t;const e=of();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.uc(),this.cc(t)}enterRestrictedMode(t){if(!this.ec){this.ec=!0,this.sc=t||!1;const e=of();e&&typeof e.removeEventListener=="function"&&e.removeEventListener("visibilitychange",this._c)}}enqueue(t){if(this.uc(),this.ec)return new Promise((()=>{}));const e=new We;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(t().then(e.resolve,e.reject),e.promise))).then((()=>e.promise))}enqueueRetryable(t){this.enqueueAndForget((()=>(this.Xu.push(t),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(t){if(!cs(t))throw t;tt(T0,"Operation failed with retryable error: "+t)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(t){const e=this.ac.then((()=>(this.rc=!0,t().catch((r=>{throw this.nc=r,this.rc=!1,Te("INTERNAL UNHANDLED ERROR: ",b0(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=e,e}enqueueAfterDelay(t,e,r){this.uc(),this.oc.indexOf(t)>-1&&(e=0);const o=Xp.createAndSchedule(this,t,e,r,(u=>this.hc(u)));return this.tc.push(o),o}uc(){this.nc&&lt(47125,{Pc:b0(this.nc)})}verifyOperationInProgress(){}async Tc(){let t;do t=this.ac,await t;while(t!==this.ac)}Ic(t){for(const e of this.tc)if(e.timerId===t)return!0;return!1}Ec(t){return this.Tc().then((()=>{this.tc.sort(((e,r)=>e.targetTimeMs-r.targetTimeMs));for(const e of this.tc)if(e.skipDelay(),t!=="all"&&e.timerId===t)break;return this.Tc()}))}dc(t){this.oc.push(t)}hc(t){const e=this.tc.indexOf(t);this.tc.splice(e,1)}}function b0(s){let t=s.message||"";return s.stack&&(t=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wg(s){return(function(e,r){if(typeof e!="object"||e===null)return!1;const o=e;for(const u of r)if(u in o&&typeof o[u]=="function")return!0;return!1})(s,["next","error","complete"])}class UV{constructor(){this._progressObserver={},this._taskCompletionResolver=new We,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(t,e,r){this._progressObserver={next:t,error:e,complete:r}}catch(t){return this._taskCompletionResolver.promise.catch(t)}then(t,e){return this._taskCompletionResolver.promise.then(t,e)}_completeWith(t){this._updateProgress(t),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(t)}_failWith(t){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(t),this._taskCompletionResolver.reject(t)}_updateProgress(t){this._lastProgress=t,this._progressObserver.next&&this._progressObserver.next(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LV=-1;let be=class extends gc{constructor(t,e,r,o){super(t,e,r,o),this.type="firestore",this._queue=new A0,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new A0(t),this._firestoreClient=void 0,await t}}};function ln(s){if(s._terminated)throw new J(j.FAILED_PRECONDITION,"The client has already been terminated.");return s._firestoreClient||AS(s),s._firestoreClient}function AS(s){var r,o,u;const t=s._freezeSettings(),e=(function(m,g,_,E){return new rD(m,g,_,E.host,E.ssl,E.experimentalForceLongPolling,E.experimentalAutoDetectLongPolling,gS(E.experimentalLongPollingOptions),E.useFetchStreams,E.isUsingEmulator)})(s._databaseId,((r=s._app)==null?void 0:r.options.appId)||"",s._persistenceKey,t);s._componentsProvider||(o=t.localCache)!=null&&o._offlineComponentProvider&&((u=t.localCache)!=null&&u._onlineComponentProvider)&&(s._componentsProvider={_offline:t.localCache._offlineComponentProvider,_online:t.localCache._onlineComponentProvider}),s._firestoreClient=new wV(s._authCredentials,s._appCheckCredentials,s._queue,e,s._componentsProvider&&(function(m){const g=m==null?void 0:m._online.build();return{_offline:m==null?void 0:m._offline.build(g),_online:g}})(s._componentsProvider))}function BV(s,t){Ci("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=s._freezeSettings();return bS(s,Wu.provider,{build:r=>new cS(r,e.cacheSizeBytes,t==null?void 0:t.forceOwnership)}),Promise.resolve()}async function kV(s){Ci("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=s._freezeSettings();bS(s,Wu.provider,{build:e=>new TV(e,t.cacheSizeBytes)})}function bS(s,t,e){if((s=qt(s,be))._firestoreClient||s._terminated)throw new J(j.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(s._componentsProvider||s._getSettings().localCache)throw new J(j.FAILED_PRECONDITION,"SDK cache is already specified.");s._componentsProvider={_online:t,_offline:e},AS(s)}function zV(s){if(s._initialized&&!s._terminated)throw new J(j.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const t=new We;return s._queue.enqueueAndForgetEvenWhileRestricted((async()=>{try{await(async function(r){if(!Ri.v())return Promise.resolve();const o=r+Ub;await Ri.delete(o)})(qp(s._databaseId,s._persistenceKey)),t.resolve()}catch(e){t.reject(e)}})),t.promise}function qV(s){return(function(e){const r=new We;return e.asyncQueue.enqueueAndForget((async()=>lV(await o_(e),r))),r.promise})(ln(s=qt(s,be)))}function FV(s){return RV(ln(s=qt(s,be)))}function jV(s){return DV(ln(s=qt(s,be)))}function GV(s,t){const e=ln(s=qt(s,be)),r=new UV;return xV(e,s._databaseId,t,r),r}function HV(s,t){return OV(ln(s=qt(s,be)),t).then((e=>e?new pn(s,null,e.query):null))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class an{constructor(t){this._byteString=t}static fromBase64String(t){try{return new an(_e.fromBase64String(t))}catch(e){throw new J(j.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(t){return new an(_e.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}toJSON(){return{type:an._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(rc(t,an._jsonSchema))return an.fromBase64String(t.bytes)}}an._jsonSchemaVersion="firestore/bytes/1.0",an._jsonSchema={type:Ve("string",an._jsonSchemaVersion),bytes:Ve("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ls=class{constructor(...t){for(let e=0;e<t.length;++e)if(t[e].length===0)throw new J(j.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ce(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ta=class{constructor(t){this._methodName=t}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ri{constructor(t,e){if(!isFinite(t)||t<-90||t>90)throw new J(j.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new J(j.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}_compareTo(t){return bt(this._lat,t._lat)||bt(this._long,t._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:ri._jsonSchemaVersion}}static fromJSON(t){if(rc(t,ri._jsonSchema))return new ri(t.latitude,t.longitude)}}ri._jsonSchemaVersion="firestore/geoPoint/1.0",ri._jsonSchema={type:Ve("string",ri._jsonSchemaVersion),latitude:Ve("number"),longitude:Ve("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vi{constructor(t){this._values=(t||[]).map((e=>e))}toArray(){return this._values.map((t=>t))}isEqual(t){return(function(r,o){if(r.length!==o.length)return!1;for(let u=0;u<r.length;++u)if(r[u]!==o[u])return!1;return!0})(this._values,t._values)}toJSON(){return{type:Vi._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(rc(t,Vi._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every((e=>typeof e=="number")))return new Vi(t.vectorValues);throw new J(j.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Vi._jsonSchemaVersion="firestore/vectorValue/1.0",Vi._jsonSchema={type:Ve("string",Vi._jsonSchemaVersion),vectorValues:Ve("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QV=/^__.*__$/;class KV{constructor(t,e,r){this.data=t,this.fieldMask=e,this.fieldTransforms=r}toMutation(t,e){return this.fieldMask!==null?new hr(t,this.data,this.fieldMask,e,this.fieldTransforms):new nl(t,this.data,e,this.fieldTransforms)}}class SS{constructor(t,e,r){this.data=t,this.fieldMask=e,this.fieldTransforms=r}toMutation(t,e){return new hr(t,this.data,this.fieldMask,e,this.fieldTransforms)}}function wS(s){switch(s){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw lt(40011,{Ac:s})}}class Yf{constructor(t,e,r,o,u,h){this.settings=t,this.databaseId=e,this.serializer=r,this.ignoreUndefinedProperties=o,u===void 0&&this.Rc(),this.fieldTransforms=u||[],this.fieldMask=h||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(t){return new Yf({...this.settings,...t},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(t){var o;const e=(o=this.path)==null?void 0:o.child(t),r=this.Vc({path:e,fc:!1});return r.gc(t),r}yc(t){var o;const e=(o=this.path)==null?void 0:o.child(t),r=this.Vc({path:e,fc:!1});return r.Rc(),r}wc(t){return this.Vc({path:void 0,fc:!0})}Sc(t){return Vf(t,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(t){return this.fieldMask.find((e=>t.isPrefixOf(e)))!==void 0||this.fieldTransforms.find((e=>t.isPrefixOf(e.field)))!==void 0}Rc(){if(this.path)for(let t=0;t<this.path.length;t++)this.gc(this.path.get(t))}gc(t){if(t.length===0)throw this.Sc("Document fields must not be empty");if(wS(this.Ac)&&QV.test(t))throw this.Sc('Document fields cannot begin and end with "__"')}}class YV{constructor(t,e,r){this.databaseId=t,this.ignoreUndefinedProperties=e,this.serializer=r||dc(t)}Cc(t,e,r,o=!1){return new Yf({Ac:t,methodName:e,Dc:r,path:ce.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Aa(s){const t=s._freezeSettings(),e=dc(s._databaseId);return new YV(s._databaseId,!!t.ignoreUndefinedProperties,e)}function Xf(s,t,e,r,o,u={}){const h=s.Cc(u.merge||u.mergeFields?2:0,t,e,o);m_("Data must be an object, but it was:",h,r);const m=DS(r,h);let g,_;if(u.merge)g=new An(h.fieldMask),_=h.fieldTransforms;else if(u.mergeFields){const E=[];for(const A of u.mergeFields){const S=tp(t,A,e);if(!h.contains(S))throw new J(j.INVALID_ARGUMENT,`Field '${S}' is specified in your field mask but missing from your input data.`);CS(E,S)||E.push(S)}g=new An(E),_=h.fieldTransforms.filter((A=>g.covers(A.field)))}else g=null,_=h.fieldTransforms;return new KV(new Je(m),g,_)}class pc extends Ta{_toFieldTransform(t){if(t.Ac!==2)throw t.Ac===1?t.Sc(`${this._methodName}() can only appear at the top level of your update data`):t.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof pc}}function IS(s,t,e){return new Yf({Ac:3,Dc:t.settings.Dc,methodName:s._methodName,fc:e},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}class l_ extends Ta{_toFieldTransform(t){return new cc(t.path,new Go)}isEqual(t){return t instanceof l_}}class u_ extends Ta{constructor(t,e){super(t),this.vc=e}_toFieldTransform(t){const e=IS(this,t,!0),r=this.vc.map((u=>ba(u,e))),o=new da(r);return new cc(t.path,o)}isEqual(t){return t instanceof u_&&No(this.vc,t.vc)}}class c_ extends Ta{constructor(t,e){super(t),this.vc=e}_toFieldTransform(t){const e=IS(this,t,!0),r=this.vc.map((u=>ba(u,e))),o=new ma(r);return new cc(t.path,o)}isEqual(t){return t instanceof c_&&No(this.vc,t.vc)}}class h_ extends Ta{constructor(t,e){super(t),this.Fc=e}_toFieldTransform(t){const e=new Ho(t.serializer,WA(t.serializer,this.Fc));return new cc(t.path,e)}isEqual(t){return t instanceof h_&&this.Fc===t.Fc}}function f_(s,t,e,r){const o=s.Cc(1,t,e);m_("Data must be an object, but it was:",o,r);const u=[],h=Je.empty();hs(r,((g,_)=>{const E=g_(t,g,e);_=Ce(_);const A=o.yc(E);if(_ instanceof pc)u.push(E);else{const S=ba(_,A);S!=null&&(u.push(E),h.set(E,S))}}));const m=new An(u);return new SS(h,m,o.fieldTransforms)}function d_(s,t,e,r,o,u){const h=s.Cc(1,t,e),m=[tp(t,r,e)],g=[o];if(u.length%2!=0)throw new J(j.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let S=0;S<u.length;S+=2)m.push(tp(t,u[S])),g.push(u[S+1]);const _=[],E=Je.empty();for(let S=m.length-1;S>=0;--S)if(!CS(_,m[S])){const O=m[S];let H=g[S];H=Ce(H);const Z=h.yc(O);if(H instanceof pc)_.push(O);else{const Y=ba(H,Z);Y!=null&&(_.push(O),E.set(O,Y))}}const A=new An(_);return new SS(E,A,h.fieldTransforms)}function RS(s,t,e,r=!1){return ba(e,s.Cc(r?4:3,t))}function ba(s,t){if(VS(s=Ce(s)))return m_("Unsupported field value:",t,s),DS(s,t);if(s instanceof Ta)return(function(r,o){if(!wS(o.Ac))throw o.Sc(`${r._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${r._methodName}() is not currently supported inside arrays`);const u=r._toFieldTransform(o);u&&o.fieldTransforms.push(u)})(s,t),null;if(s===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),s instanceof Array){if(t.settings.fc&&t.Ac!==4)throw t.Sc("Nested arrays are not supported");return(function(r,o){const u=[];let h=0;for(const m of r){let g=ba(m,o.wc(h));g==null&&(g={nullValue:"NULL_VALUE"}),u.push(g),h++}return{arrayValue:{values:u}}})(s,t)}return(function(r,o){if((r=Ce(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return WA(o.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const u=Ht.fromDate(r);return{timestampValue:Qo(o.serializer,u)}}if(r instanceof Ht){const u=new Ht(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Qo(o.serializer,u)}}if(r instanceof ri)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof an)return{bytesValue:hb(o.serializer,r._byteString)};if(r instanceof re){const u=o.databaseId,h=r.firestore._databaseId;if(!h.isEqual(u))throw o.Sc(`Document reference is for database ${h.projectId}/${h.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:Mp(r.firestore._databaseId||o.databaseId,r._key.path)}}if(r instanceof Vi)return(function(h,m){return{mapValue:{fields:{[bp]:{stringValue:Sp},[qo]:{arrayValue:{values:h.toArray().map((_=>{if(typeof _!="number")throw m.Sc("VectorValues must only contain numeric values.");return Dp(m.serializer,_)}))}}}}}})(r,o);throw o.Sc(`Unsupported field value: ${Nf(r)}`)})(s,t)}function DS(s,t){const e={};return DA(s)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):hs(s,((r,o)=>{const u=ba(o,t.mc(r));u!=null&&(e[r]=u)})),{mapValue:{fields:e}}}function VS(s){return!(typeof s!="object"||s===null||s instanceof Array||s instanceof Date||s instanceof Ht||s instanceof ri||s instanceof an||s instanceof re||s instanceof Ta||s instanceof Vi)}function m_(s,t,e){if(!VS(e)||!cA(e)){const r=Nf(e);throw r==="an object"?t.Sc(s+" a custom object"):t.Sc(s+" "+r)}}function tp(s,t,e){if((t=Ce(t))instanceof ls)return t._internalPath;if(typeof t=="string")return g_(s,t);throw Vf("Field path arguments must be of type string or ",s,!1,void 0,e)}const XV=new RegExp("[~\\*/\\[\\]]");function g_(s,t,e){if(t.search(XV)>=0)throw Vf(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,s,!1,void 0,e);try{return new ls(...t.split("."))._internalPath}catch{throw Vf(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,s,!1,void 0,e)}}function Vf(s,t,e,r,o){const u=r&&!r.isEmpty(),h=o!==void 0;let m=`Function ${t}() called with invalid data`;e&&(m+=" (via `toFirestore()`)"),m+=". ";let g="";return(u||h)&&(g+=" (found",u&&(g+=` in field ${r}`),h&&(g+=` in document ${o}`),g+=")"),new J(j.INVALID_ARGUMENT,m+s+g)}function CS(s,t){return s.some((e=>e.isEqual(t)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tc{constructor(t,e,r,o,u){this._firestore=t,this._userDataWriter=e,this._key=r,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new re(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new $V(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const e=this._document.data.field($f("DocumentSnapshot.get",t));if(e!==null)return this._userDataWriter.convertValue(e)}}}class $V extends tc{data(){return super.data()}}function $f(s,t){return typeof t=="string"?g_(s,t):t instanceof ls?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NS(s){if(s.limitType==="L"&&s.explicitOrderBy.length===0)throw new J(j.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class p_{}class _c extends p_{}function Hr(s,t,...e){let r=[];t instanceof p_&&r.push(t),r=r.concat(e),(function(u){const h=u.filter((g=>g instanceof __)).length,m=u.filter((g=>g instanceof Zf)).length;if(h>1||h>0&&m>0)throw new J(j.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const o of r)s=o._apply(s);return s}class Zf extends _c{constructor(t,e,r){super(),this._field=t,this._op=e,this._value=r,this.type="where"}static _create(t,e,r){return new Zf(t,e,r)}_apply(t){const e=this._parse(t);return OS(t._query,e),new pn(t.firestore,t.converter,zg(t._query,e))}_parse(t){const e=Aa(t.firestore);return(function(u,h,m,g,_,E,A){let S;if(_.isKeyField()){if(E==="array-contains"||E==="array-contains-any")throw new J(j.INVALID_ARGUMENT,`Invalid Query. You can't perform '${E}' queries on documentId().`);if(E==="in"||E==="not-in"){w0(A,E);const H=[];for(const Z of A)H.push(S0(g,u,Z));S={arrayValue:{values:H}}}else S=S0(g,u,A)}else E!=="in"&&E!=="not-in"&&E!=="array-contains-any"||w0(A,E),S=RS(m,h,A,E==="in"||E==="not-in");return Mt.create(_,E,S)})(t._query,"where",e,t.firestore._databaseId,this._field,this._op,this._value)}}function ZV(s,t,e){const r=t,o=$f("where",s);return Zf._create(o,r,e)}class __ extends p_{constructor(t,e){super(),this.type=t,this._queryConstraints=e}static _create(t,e){return new __(t,e)}_parse(t){const e=this._queryConstraints.map((r=>r._parse(t))).filter((r=>r.getFilters().length>0));return e.length===1?e[0]:Xt.create(e,this._getOperator())}_apply(t){const e=this._parse(t);return e.getFilters().length===0?t:((function(o,u){let h=o;const m=u.getFlattenedFilters();for(const g of m)OS(h,g),h=zg(h,g)})(t._query,e),new pn(t.firestore,t.converter,zg(t._query,e)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class y_ extends _c{constructor(t,e){super(),this._field=t,this._direction=e,this.type="orderBy"}static _create(t,e){return new y_(t,e)}_apply(t){const e=(function(o,u,h){if(o.startAt!==null)throw new J(j.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new J(j.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Xu(u,h)})(t._query,this._field,this._direction);return new pn(t.firestore,t.converter,(function(o,u){const h=o.explicitOrderBy.concat([u]);return new ur(o.path,o.collectionGroup,h,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)})(t._query,e))}}function JV(s,t="asc"){const e=t,r=$f("orderBy",s);return y_._create(r,e)}class Jf extends _c{constructor(t,e,r){super(),this.type=t,this._limit=e,this._limitType=r}static _create(t,e,r){return new Jf(t,e,r)}_apply(t){return new pn(t.firestore,t.converter,vf(t._query,this._limit,this._limitType))}}function WV(s){return hA("limit",s),Jf._create("limit",s,"F")}function tC(s){return hA("limitToLast",s),Jf._create("limitToLast",s,"L")}class Wf extends _c{constructor(t,e,r){super(),this.type=t,this._docOrFields=e,this._inclusive=r}static _create(t,e,r){return new Wf(t,e,r)}_apply(t){const e=xS(t,this.type,this._docOrFields,this._inclusive);return new pn(t.firestore,t.converter,(function(o,u){return new ur(o.path,o.collectionGroup,o.explicitOrderBy.slice(),o.filters.slice(),o.limit,o.limitType,u,o.endAt)})(t._query,e))}}function eC(...s){return Wf._create("startAt",s,!0)}function nC(...s){return Wf._create("startAfter",s,!1)}class td extends _c{constructor(t,e,r){super(),this.type=t,this._docOrFields=e,this._inclusive=r}static _create(t,e,r){return new td(t,e,r)}_apply(t){const e=xS(t,this.type,this._docOrFields,this._inclusive);return new pn(t.firestore,t.converter,(function(o,u){return new ur(o.path,o.collectionGroup,o.explicitOrderBy.slice(),o.filters.slice(),o.limit,o.limitType,o.startAt,u)})(t._query,e))}}function iC(...s){return td._create("endBefore",s,!1)}function rC(...s){return td._create("endAt",s,!0)}function xS(s,t,e,r){if(e[0]=Ce(e[0]),e[0]instanceof tc)return(function(u,h,m,g,_){if(!g)throw new J(j.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${m}().`);const E=[];for(const A of Vo(u))if(A.field.isKeyField())E.push(ha(h,g.key));else{const S=g.data.field(A.field);if(Uf(S))throw new J(j.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+A.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(S===null){const O=A.field.canonicalString();throw new J(j.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${O}' (used as the orderBy) does not exist.`)}E.push(S)}return new ss(E,_)})(s._query,s.firestore._databaseId,t,e[0]._document,r);{const o=Aa(s.firestore);return(function(h,m,g,_,E,A){const S=h.explicitOrderBy;if(E.length>S.length)throw new J(j.INVALID_ARGUMENT,`Too many arguments provided to ${_}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const O=[];for(let H=0;H<E.length;H++){const Z=E[H];if(S[H].field.isKeyField()){if(typeof Z!="string")throw new J(j.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${_}(), but got a ${typeof Z}`);if(!Ip(h)&&Z.indexOf("/")!==-1)throw new J(j.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${_}() must be a plain document ID, but '${Z}' contains a slash.`);const Y=h.path.child(Ot.fromString(Z));if(!rt.isDocumentKey(Y))throw new J(j.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${_}() must result in a valid document path, but '${Y}' is not because it contains an odd number of segments.`);const mt=new rt(Y);O.push(ha(m,mt))}else{const Y=RS(g,_,Z);O.push(Y)}}return new ss(O,A)})(s._query,s.firestore._databaseId,o,t,e,r)}}function S0(s,t,e){if(typeof(e=Ce(e))=="string"){if(e==="")throw new J(j.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Ip(t)&&e.indexOf("/")!==-1)throw new J(j.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${e}' contains a '/' character.`);const r=t.path.child(Ot.fromString(e));if(!rt.isDocumentKey(r))throw new J(j.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return ha(s,new rt(r))}if(e instanceof re)return ha(s,e._key);throw new J(j.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Nf(e)}.`)}function w0(s,t){if(!Array.isArray(s)||s.length===0)throw new J(j.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function OS(s,t){const e=(function(o,u){for(const h of o)for(const m of h.getFlattenedFilters())if(u.indexOf(m.op)>=0)return m.op;return null})(s.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(t.op));if(e!==null)throw e===t.op?new J(j.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new J(j.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${e.toString()}' filters.`)}class v_{convertValue(t,e="none"){switch(is(t)){case 0:return null;case 1:return t.booleanValue;case 2:return ue(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(lr(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 11:return this.convertObject(t.mapValue,e);case 10:return this.convertVectorValue(t.mapValue);default:throw lt(62114,{value:t})}}convertObject(t,e){return this.convertObjectMap(t.fields,e)}convertObjectMap(t,e="none"){const r={};return hs(t,((o,u)=>{r[o]=this.convertValue(u,e)})),r}convertVectorValue(t){var r,o,u;const e=(u=(o=(r=t.fields)==null?void 0:r[qo].arrayValue)==null?void 0:o.values)==null?void 0:u.map((h=>ue(h.doubleValue)));return new Vi(e)}convertGeoPoint(t){return new ri(ue(t.latitude),ue(t.longitude))}convertArray(t,e){return(t.values||[]).map((r=>this.convertValue(r,e)))}convertServerTimestamp(t,e){switch(e){case"previous":const r=Lf(t);return r==null?null:this.convertValue(r,e);case"estimate":return this.convertTimestamp(Qu(t));default:return null}}convertTimestamp(t){const e=or(t);return new Ht(e.seconds,e.nanos)}convertDocumentKey(t,e){const r=Ot.fromString(t);ht(Ab(r),9688,{name:t});const o=new ns(r.get(1),r.get(3)),u=new rt(r.popFirst(5));return o.isEqual(e)||Te(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${e.projectId}/${e.database}) instead.`),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ed(s,t,e){let r;return r=s?e&&(e.merge||e.mergeFields)?s.toFirestore(t,e):s.toFirestore(t):t,r}class sC extends v_{constructor(t){super(),this.firestore=t}convertBytes(t){return new an(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new re(this.firestore,null,e)}}class oa{constructor(t,e){this.hasPendingWrites=t,this.fromCache=e}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}let $n=class MS extends tc{constructor(t,e,r,o,u,h){super(t,e,r,o,h),this._firestore=t,this._firestoreImpl=t,this.metadata=u}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const e=new Lu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,e={}){if(this._document){const r=this._document.data.field($f("DocumentSnapshot.get",t));if(r!==null)return this._userDataWriter.convertValue(r,e.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new J(j.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t=this._document,e={};return e.type=MS._jsonSchemaVersion,e.bundle="",e.bundleSource="DocumentSnapshot",e.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?e:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,"previous"),e.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),e)}};$n._jsonSchemaVersion="firestore/documentSnapshot/1.0",$n._jsonSchema={type:Ve("string",$n._jsonSchemaVersion),bundleSource:Ve("string","DocumentSnapshot"),bundleName:Ve("string"),bundle:Ve("string")};let Lu=class extends $n{data(t={}){return super.data(t)}},si=class PS{constructor(t,e,r,o){this._firestore=t,this._userDataWriter=e,this._snapshot=o,this.metadata=new oa(o.hasPendingWrites,o.fromCache),this.query=r}get docs(){const t=[];return this.forEach((e=>t.push(e))),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,e){this._snapshot.docs.forEach((r=>{t.call(e,new Lu(this._firestore,this._userDataWriter,r.key,r,new oa(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(t={}){const e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new J(j.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=(function(o,u){if(o._snapshot.oldDocs.isEmpty()){let h=0;return o._snapshot.docChanges.map((m=>{const g=new Lu(o._firestore,o._userDataWriter,m.doc.key,m.doc,new oa(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);return m.doc,{type:"added",doc:g,oldIndex:-1,newIndex:h++}}))}{let h=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((m=>u||m.type!==3)).map((m=>{const g=new Lu(o._firestore,o._userDataWriter,m.doc.key,m.doc,new oa(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);let _=-1,E=-1;return m.type!==0&&(_=h.indexOf(m.doc.key),h=h.delete(m.doc.key)),m.type!==1&&(h=h.add(m.doc),E=h.indexOf(m.doc.key)),{type:aC(m.type),doc:g,oldIndex:_,newIndex:E}}))}})(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new J(j.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t={};t.type=PS._jsonSchemaVersion,t.bundleSource="QuerySnapshot",t.bundleName=gp.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const e=[],r=[],o=[];return this.docs.forEach((u=>{u._document!==null&&(e.push(u._document),r.push(this._userDataWriter.convertObjectMap(u._document.data.value.mapValue.fields,"previous")),o.push(u.ref.path))})),t.bundle=(this._firestore,this.query._query,t.bundleName,"NOT SUPPORTED"),t}};function aC(s){switch(s){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return lt(61501,{type:s})}}function US(s,t){return s instanceof $n&&t instanceof $n?s._firestore===t._firestore&&s._key.isEqual(t._key)&&(s._document===null?t._document===null:s._document.isEqual(t._document))&&s._converter===t._converter:s instanceof si&&t instanceof si&&s._firestore===t._firestore&&TS(s.query,t.query)&&s.metadata.isEqual(t.metadata)&&s._snapshot.isEqual(t._snapshot)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oC(s){s=qt(s,re);const t=qt(s.firestore,be);return dS(ln(t),s._key).then((e=>E_(t,s,e)))}si._jsonSchemaVersion="firestore/querySnapshot/1.0",si._jsonSchema={type:Ve("string",si._jsonSchemaVersion),bundleSource:Ve("string","QuerySnapshot"),bundleName:Ve("string"),bundle:Ve("string")};class Sa extends v_{constructor(t){super(),this.firestore=t}convertBytes(t){return new an(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new re(this.firestore,null,e)}}function lC(s){s=qt(s,re);const t=qt(s.firestore,be),e=ln(t),r=new Sa(t);return VV(e,s._key).then((o=>new $n(t,r,s._key,o,new oa(o!==null&&o.hasLocalMutations,!0),s.converter)))}function uC(s){s=qt(s,re);const t=qt(s.firestore,be);return dS(ln(t),s._key,{source:"server"}).then((e=>E_(t,s,e)))}function cC(s){s=qt(s,pn);const t=qt(s.firestore,be),e=ln(t),r=new Sa(t);return NS(s._query),mS(e,s._query).then((o=>new si(t,r,s,o)))}function hC(s){s=qt(s,pn);const t=qt(s.firestore,be),e=ln(t),r=new Sa(t);return CV(e,s._query).then((o=>new si(t,r,s,o)))}function fC(s){s=qt(s,pn);const t=qt(s.firestore,be),e=ln(t),r=new Sa(t);return mS(e,s._query,{source:"server"}).then((o=>new si(t,r,s,o)))}function I0(s,t,e){s=qt(s,re);const r=qt(s.firestore,be),o=ed(s.converter,t,e);return yc(r,[Xf(Aa(r),"setDoc",s._key,o,s.converter!==null,e).toMutation(s._key,he.none())])}function R0(s,t,e,...r){s=qt(s,re);const o=qt(s.firestore,be),u=Aa(o);let h;return h=typeof(t=Ce(t))=="string"||t instanceof ls?d_(u,"updateDoc",s._key,t,e,r):f_(u,"updateDoc",s._key,t),yc(o,[h.toMutation(s._key,he.exists(!0))])}function dC(s){return yc(qt(s.firestore,be),[new il(s._key,he.none())])}function mC(s,t){const e=qt(s.firestore,be),r=Df(s),o=ed(s.converter,t);return yc(e,[Xf(Aa(s.firestore),"addDoc",r._key,o,s.converter!==null,{}).toMutation(r._key,he.exists(!1))]).then((()=>r))}function LS(s,...t){var g,_,E;s=Ce(s);let e={includeMetadataChanges:!1,source:"default"},r=0;typeof t[r]!="object"||Wg(t[r])||(e=t[r++]);const o={includeMetadataChanges:e.includeMetadataChanges,source:e.source};if(Wg(t[r])){const A=t[r];t[r]=(g=A.next)==null?void 0:g.bind(A),t[r+1]=(_=A.error)==null?void 0:_.bind(A),t[r+2]=(E=A.complete)==null?void 0:E.bind(A)}let u,h,m;if(s instanceof re)h=qt(s.firestore,be),m=el(s._key.path),u={next:A=>{t[r]&&t[r](E_(h,s,A))},error:t[r+1],complete:t[r+2]};else{const A=qt(s,pn);h=qt(A.firestore,be),m=A._query;const S=new Sa(h);u={next:O=>{t[r]&&t[r](new si(h,S,A,O))},error:t[r+1],complete:t[r+2]},NS(s._query)}return(function(S,O,H,Z){const Y=new Qf(Z),mt=new Wp(O,Y,H);return S.asyncQueue.enqueueAndForget((async()=>$p(await Jo(S),mt))),()=>{Y.Nu(),S.asyncQueue.enqueueAndForget((async()=>Zp(await Jo(S),mt)))}})(ln(h),m,o,u)}function gC(s,t){return NV(ln(s=qt(s,be)),Wg(t)?t:{next:t})}function yc(s,t){return(function(r,o){const u=new We;return r.asyncQueue.enqueueAndForget((async()=>rV(await o_(r),o,u))),u.promise})(ln(s),t)}function E_(s,t,e){const r=e.docs.get(t._key),o=new Sa(s);return new $n(s,o,t._key,r,new oa(e.hasPendingWrites,e.fromCache),t.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pC={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _C=class{constructor(t,e){this._firestore=t,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=Aa(t)}set(t,e,r){this._verifyNotCommitted();const o=Yr(t,this._firestore),u=ed(o.converter,e,r),h=Xf(this._dataReader,"WriteBatch.set",o._key,u,o.converter!==null,r);return this._mutations.push(h.toMutation(o._key,he.none())),this}update(t,e,r,...o){this._verifyNotCommitted();const u=Yr(t,this._firestore);let h;return h=typeof(e=Ce(e))=="string"||e instanceof ls?d_(this._dataReader,"WriteBatch.update",u._key,e,r,o):f_(this._dataReader,"WriteBatch.update",u._key,e),this._mutations.push(h.toMutation(u._key,he.exists(!0))),this}delete(t){this._verifyNotCommitted();const e=Yr(t,this._firestore);return this._mutations=this._mutations.concat(new il(e._key,he.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new J(j.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function Yr(s,t){if((s=Ce(s)).firestore!==t)throw new J(j.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yC{constructor(t,e){this._firestore=t,this._transaction=e,this._dataReader=Aa(t)}get(t){const e=Yr(t,this._firestore),r=new sC(this._firestore);return this._transaction.lookup([e._key]).then((o=>{if(!o||o.length!==1)return lt(24041);const u=o[0];if(u.isFoundDocument())return new tc(this._firestore,r,u.key,u,e.converter);if(u.isNoDocument())return new tc(this._firestore,r,e._key,null,e.converter);throw lt(18433,{doc:u})}))}set(t,e,r){const o=Yr(t,this._firestore),u=ed(o.converter,e,r),h=Xf(this._dataReader,"Transaction.set",o._key,u,o.converter!==null,r);return this._transaction.set(o._key,h),this}update(t,e,r,...o){const u=Yr(t,this._firestore);let h;return h=typeof(e=Ce(e))=="string"||e instanceof ls?d_(this._dataReader,"Transaction.update",u._key,e,r,o):f_(this._dataReader,"Transaction.update",u._key,e),this._transaction.update(u._key,h),this}delete(t){const e=Yr(t,this._firestore);return this._transaction.delete(e._key),this}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vC=class extends yC{constructor(t,e){super(t,e),this._firestore=t}get(t){const e=Yr(t,this._firestore),r=new Sa(this._firestore);return super.get(t).then((o=>new $n(this._firestore,r,e._key,o._document,new oa(!1,!1),e.converter)))}};function EC(s,t,e){s=qt(s,be);const r={...pC,...e};return(function(u){if(u.maxAttempts<1)throw new J(j.INVALID_ARGUMENT,"Max attempts must be at least 1")})(r),(function(u,h,m){const g=new We;return u.asyncQueue.enqueueAndForget((async()=>{const _=await IV(u);new SV(u.asyncQueue,_,m,h,g).ju()})),g.promise})(ln(s),(o=>t(new vC(s,o))),r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TC(){return new pc("deleteField")}function AC(){return new l_("serverTimestamp")}function bC(...s){return new u_("arrayUnion",s)}function SC(...s){return new c_("arrayRemove",s)}function wC(s){return new h_("increment",s)}(function(t,e=!0){(function(o){tl=o})(hp),Mo(new ca("firestore",((r,{instanceIdentifier:o,options:u})=>{const h=r.getProvider("app").getImmediate(),m=new be(new yR(r.getProvider("auth-internal")),new TR(h,r.getProvider("app-check-internal")),(function(_,E){if(!Object.prototype.hasOwnProperty.apply(_.options,["projectId"]))throw new J(j.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ns(_.options.projectId,E)})(h,o),h);return u={useFetchStreams:e,...u},m._setSettings(u),m}),"PUBLIC").setMultipleInstances(!0)),sr(iT,rT,t),sr(iT,rT,"esm2020")})();const IC="@firebase/firestore-compat",RC="0.4.1";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T_(s,t){if(t===void 0)return{merge:!1};if(t.mergeFields!==void 0&&t.merge!==void 0)throw new J("invalid-argument",`Invalid options passed to function ${s}(): You cannot specify both "merge" and "mergeFields".`);return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D0(){if(typeof Uint8Array>"u")throw new J("unimplemented","Uint8Arrays are not available in this environment.")}function V0(){if(!nD())throw new J("unimplemented","Blobs are unavailable in Firestore in this environment.")}class ec{constructor(t){this._delegate=t}static fromBase64String(t){return V0(),new ec(an.fromBase64String(t))}static fromUint8Array(t){return D0(),new ec(an.fromUint8Array(t))}toBase64(){return V0(),this._delegate.toBase64()}toUint8Array(){return D0(),this._delegate.toUint8Array()}isEqual(t){return this._delegate.isEqual(t._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ep(s){return DC(s,["next","error","complete"])}function DC(s,t){if(typeof s!="object"||s===null)return!1;const e=s;for(const r of t)if(r in e&&typeof e[r]=="function")return!0;return!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VC{enableIndexedDbPersistence(t,e){return BV(t._delegate,{forceOwnership:e})}enableMultiTabIndexedDbPersistence(t){return kV(t._delegate)}clearIndexedDbPersistence(t){return zV(t._delegate)}}class BS{constructor(t,e,r){this._delegate=e,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},t instanceof ns||(this._appCompat=t)}get _databaseId(){return this._delegate._databaseId}settings(t){const e=this._delegate._getSettings();!t.merge&&e.host!==t.host&&Ci("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),t.merge&&(t={...e,...t},delete t.merge),this._delegate._setSettings(t)}useEmulator(t,e,r={}){MV(this._delegate,t,e,r)}enableNetwork(){return FV(this._delegate)}disableNetwork(){return jV(this._delegate)}enablePersistence(t){let e=!1,r=!1;return t&&(e=!!t.synchronizeTabs,r=!!t.experimentalForceOwningTab,uA("synchronizeTabs",e,"experimentalForceOwningTab",r)),e?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return qV(this._delegate)}onSnapshotsInSync(t){return gC(this._delegate,t)}get app(){if(!this._appCompat)throw new J("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(t){try{return new Wo(this,vS(this._delegate,t))}catch(e){throw mn(e,"collection()","Firestore.collection()")}}doc(t){try{return new Xn(this,Df(this._delegate,t))}catch(e){throw mn(e,"doc()","Firestore.doc()")}}collectionGroup(t){try{return new dn(this,PV(this._delegate,t))}catch(e){throw mn(e,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(t){return EC(this._delegate,e=>t(new kS(this,e)))}batch(){return ln(this._delegate),new zS(new _C(this._delegate,t=>yc(this._delegate,t)))}loadBundle(t){return GV(this._delegate,t)}namedQuery(t){return HV(this._delegate,t).then(e=>e?new dn(this,e):null)}}class nd extends v_{constructor(t){super(),this.firestore=t}convertBytes(t){return new ec(new an(t))}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return Xn.forKey(e,this.firestore,null)}}function CC(s){mR(s)}class kS{constructor(t,e){this._firestore=t,this._delegate=e,this._userDataWriter=new nd(t)}get(t){const e=la(t);return this._delegate.get(e).then(r=>new nc(this._firestore,new $n(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,e.converter)))}set(t,e,r){const o=la(t);return r?(T_("Transaction.set",r),this._delegate.set(o,e,r)):this._delegate.set(o,e),this}update(t,e,r,...o){const u=la(t);return arguments.length===2?this._delegate.update(u,e):this._delegate.update(u,e,r,...o),this}delete(t){const e=la(t);return this._delegate.delete(e),this}}class zS{constructor(t){this._delegate=t}set(t,e,r){const o=la(t);return r?(T_("WriteBatch.set",r),this._delegate.set(o,e,r)):this._delegate.set(o,e),this}update(t,e,r,...o){const u=la(t);return arguments.length===2?this._delegate.update(u,e):this._delegate.update(u,e,r,...o),this}delete(t){const e=la(t);return this._delegate.delete(e),this}commit(){return this._delegate.commit()}}class va{constructor(t,e,r){this._firestore=t,this._userDataWriter=e,this._delegate=r}fromFirestore(t,e){const r=new Lu(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,null);return this._delegate.fromFirestore(new ic(this._firestore,r),e??{})}toFirestore(t,e){return e?this._delegate.toFirestore(t,e):this._delegate.toFirestore(t)}static getInstance(t,e){const r=va.INSTANCES;let o=r.get(t);o||(o=new WeakMap,r.set(t,o));let u=o.get(e);return u||(u=new va(t,new nd(t),e),o.set(e,u)),u}}va.INSTANCES=new WeakMap;class Xn{constructor(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new nd(t)}static forPath(t,e,r){if(t.length%2!==0)throw new J("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${t.canonicalString()} has ${t.length}`);return new Xn(e,new re(e._delegate,r,new rt(t)))}static forKey(t,e,r){return new Xn(e,new re(e._delegate,r,t))}get id(){return this._delegate.id}get parent(){return new Wo(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(t){try{return new Wo(this.firestore,vS(this._delegate,t))}catch(e){throw mn(e,"collection()","DocumentReference.collection()")}}isEqual(t){return t=Ce(t),t instanceof re?ES(this._delegate,t):!1}set(t,e){e=T_("DocumentReference.set",e);try{return e?I0(this._delegate,t,e):I0(this._delegate,t)}catch(r){throw mn(r,"setDoc()","DocumentReference.set()")}}update(t,e,...r){try{return arguments.length===1?R0(this._delegate,t):R0(this._delegate,t,e,...r)}catch(o){throw mn(o,"updateDoc()","DocumentReference.update()")}}delete(){return dC(this._delegate)}onSnapshot(...t){const e=qS(t),r=FS(t,o=>new nc(this.firestore,new $n(this.firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,this._delegate.converter)));return LS(this._delegate,e,r)}get(t){let e;return(t==null?void 0:t.source)==="cache"?e=lC(this._delegate):(t==null?void 0:t.source)==="server"?e=uC(this._delegate):e=oC(this._delegate),e.then(r=>new nc(this.firestore,new $n(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(t){return new Xn(this.firestore,t?this._delegate.withConverter(va.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}function mn(s,t,e){return s.message=s.message.replace(t,e),s}function qS(s){for(const t of s)if(typeof t=="object"&&!ep(t))return t;return{}}function FS(s,t){var r,o;let e;return ep(s[0])?e=s[0]:ep(s[1])?e=s[1]:typeof s[0]=="function"?e={next:s[0],error:s[1],complete:s[2]}:e={next:s[1],error:s[2],complete:s[3]},{next:u=>{e.next&&e.next(t(u))},error:(r=e.error)==null?void 0:r.bind(e),complete:(o=e.complete)==null?void 0:o.bind(e)}}class nc{constructor(t,e){this._firestore=t,this._delegate=e}get ref(){return new Xn(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(t){return this._delegate.data(t)}get(t,e){return this._delegate.get(t,e)}isEqual(t){return US(this._delegate,t._delegate)}}class ic extends nc{data(t){const e=this._delegate.data(t);return this._delegate._converter||gR(e!==void 0,"Document in a QueryDocumentSnapshot should exist"),e}}class dn{constructor(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new nd(t)}where(t,e,r){try{return new dn(this.firestore,Hr(this._delegate,ZV(t,e,r)))}catch(o){throw mn(o,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(t,e){try{return new dn(this.firestore,Hr(this._delegate,JV(t,e)))}catch(r){throw mn(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(t){try{return new dn(this.firestore,Hr(this._delegate,WV(t)))}catch(e){throw mn(e,"limit()","Query.limit()")}}limitToLast(t){try{return new dn(this.firestore,Hr(this._delegate,tC(t)))}catch(e){throw mn(e,"limitToLast()","Query.limitToLast()")}}startAt(...t){try{return new dn(this.firestore,Hr(this._delegate,eC(...t)))}catch(e){throw mn(e,"startAt()","Query.startAt()")}}startAfter(...t){try{return new dn(this.firestore,Hr(this._delegate,nC(...t)))}catch(e){throw mn(e,"startAfter()","Query.startAfter()")}}endBefore(...t){try{return new dn(this.firestore,Hr(this._delegate,iC(...t)))}catch(e){throw mn(e,"endBefore()","Query.endBefore()")}}endAt(...t){try{return new dn(this.firestore,Hr(this._delegate,rC(...t)))}catch(e){throw mn(e,"endAt()","Query.endAt()")}}isEqual(t){return TS(this._delegate,t._delegate)}get(t){let e;return(t==null?void 0:t.source)==="cache"?e=hC(this._delegate):(t==null?void 0:t.source)==="server"?e=fC(this._delegate):e=cC(this._delegate),e.then(r=>new np(this.firestore,new si(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...t){const e=qS(t),r=FS(t,o=>new np(this.firestore,new si(this.firestore._delegate,this._userDataWriter,this._delegate,o._snapshot)));return LS(this._delegate,e,r)}withConverter(t){return new dn(this.firestore,t?this._delegate.withConverter(va.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}class NC{constructor(t,e){this._firestore=t,this._delegate=e}get type(){return this._delegate.type}get doc(){return new ic(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class np{constructor(t,e){this._firestore=t,this._delegate=e}get query(){return new dn(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(t=>new ic(this._firestore,t))}docChanges(t){return this._delegate.docChanges(t).map(e=>new NC(this._firestore,e))}forEach(t,e){this._delegate.forEach(r=>{t.call(e,new ic(this._firestore,r))})}isEqual(t){return US(this._delegate,t._delegate)}}class Wo extends dn{constructor(t,e){super(t,e),this.firestore=t,this._delegate=e}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const t=this._delegate.parent;return t?new Xn(this.firestore,t):null}doc(t){try{return t===void 0?new Xn(this.firestore,Df(this._delegate)):new Xn(this.firestore,Df(this._delegate,t))}catch(e){throw mn(e,"doc()","CollectionReference.doc()")}}add(t){return mC(this._delegate,t).then(e=>new Xn(this.firestore,e))}isEqual(t){return ES(this._delegate,t._delegate)}withConverter(t){return new Wo(this.firestore,t?this._delegate.withConverter(va.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}function la(s){return qt(s,re)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A_{constructor(...t){this._delegate=new ls(...t)}static documentId(){return new A_(ce.keyField().canonicalString())}isEqual(t){return t=Ce(t),t instanceof ls?this._delegate._internalPath.isEqual(t._internalPath):!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sa{static serverTimestamp(){const t=AC();return t._methodName="FieldValue.serverTimestamp",new sa(t)}static delete(){const t=TC();return t._methodName="FieldValue.delete",new sa(t)}static arrayUnion(...t){const e=bC(...t);return e._methodName="FieldValue.arrayUnion",new sa(e)}static arrayRemove(...t){const e=SC(...t);return e._methodName="FieldValue.arrayRemove",new sa(e)}static increment(t){const e=wC(t);return e._methodName="FieldValue.increment",new sa(e)}constructor(t){this._delegate=t}isEqual(t){return this._delegate.isEqual(t._delegate)}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xC={Firestore:BS,GeoPoint:ri,Timestamp:Ht,Blob:ec,Transaction:kS,WriteBatch:zS,DocumentReference:Xn,DocumentSnapshot:nc,Query:dn,QueryDocumentSnapshot:ic,QuerySnapshot:np,CollectionReference:Wo,FieldPath:A_,FieldValue:sa,setLogLevel:CC,CACHE_SIZE_UNLIMITED:LV};function OC(s,t){s.INTERNAL.registerComponent(new ca("firestore-compat",e=>{const r=e.getProvider("app-compat").getImmediate(),o=e.getProvider("firestore").getImmediate();return t(r,o)},"PUBLIC").setServiceProps({...xC}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MC(s){OC(s,(t,e)=>new BS(t,e,new VC)),s.registerVersion(IC,RC)}MC(zu);const PC={apiKey:"AIzaSyCK25mmhfyzb80DLo_6o1nbhYIXtCVGawQ",authDomain:"timerprj.firebaseapp.com",projectId:"timerprj",storageBucket:"timerprj.firebasestorage.app",messagingSenderId:"888857813650",appId:"1:888857813650:web:3fb8717cd866536e5f7c4b"};zu.apps.length||zu.initializeApp(PC);const bg=zu.firestore(),lf={meetingName:"  ",totalSeconds:900,remainingSeconds:900,isActive:!1,isPaused:!1},jS=s=>{const t=Math.floor(s/60),e=s%60;return`${String(t).padStart(2,"0")}:${String(e).padStart(2,"0")}`},UC=(s,t,e)=>!t||e?"grey":s<60?"red":s<300?"yellow":"green",LC=({createAdminSession:s})=>wt.jsxs("div",{className:"role-selection",children:[wt.jsx("h1",{children:" "}),wt.jsx("p",{children:"     ."}),wt.jsx("button",{className:"button button-primary",onClick:s,"aria-label":" ",children:"  "}),wt.jsx("p",{className:"description-text",children:"      QR  ."})]}),C0=({appState:s})=>{const{remainingSeconds:t,meetingName:e,isActive:r,isPaused:o}=s,u=UC(t,r,o);return En.useEffect(()=>(document.body.className=`status-${u}`,()=>{document.body.className=""}),[u]),wt.jsxs("div",{className:"viewer-view",children:[wt.jsx("h2",{className:"meeting-name",children:e||""}),wt.jsx("div",{className:"timer-display",children:jS(t)})]})},BC=({appState:s,sessionId:t,updateFirestoreState:e})=>{const[r,o]=En.useState(Math.floor(s.totalSeconds/60)),[u,h]=En.useState(s.totalSeconds%60),[m,g]=En.useState(s.meetingName),[_,E]=En.useState(!1),[A,S]=En.useState(!1),O=`${window.location.origin}${window.location.pathname}#view/${t}`;En.useEffect(()=>{o(Math.floor(s.totalSeconds/60)),h(s.totalSeconds%60),g(s.meetingName)},[s.totalSeconds,s.meetingName]);const H=()=>{const it=r*60+u;e({...lf,totalSeconds:it,remainingSeconds:it,meetingName:m})},Z=()=>{s.isActive?e({isPaused:!s.isPaused}):e({isActive:!0,isPaused:!1})},Y=()=>{e({isActive:!1,isPaused:!1,remainingSeconds:s.totalSeconds})},mt=()=>{navigator.clipboard.writeText(O).then(()=>{S(!0),setTimeout(()=>S(!1),2e3)})},ut=()=>s.isActive?s.isPaused?"":"":"";return wt.jsxs("div",{className:"admin-dashboard",children:[wt.jsx("button",{onClick:()=>window.location.hash="",className:"back-button","aria-label":"",children:""}),wt.jsx("h2",{children:" "}),wt.jsxs("div",{className:"admin-panel",children:[wt.jsx("h3",{children:""}),wt.jsxs("div",{className:"input-group",children:[wt.jsx("label",{htmlFor:"meetingName",children:""}),wt.jsx("input",{id:"meetingName",type:"text",className:"input-field",value:m,onChange:it=>g(it.target.value),placeholder:" ",disabled:s.isActive})]}),wt.jsxs("div",{className:"input-group",children:[wt.jsx("label",{children:"  "}),wt.jsxs("div",{className:"time-input-group",children:[wt.jsx("input",{type:"number",value:r,onChange:it=>o(Math.max(0,parseInt(it.target.value,10)||0)),"aria-label":"",disabled:s.isActive}),wt.jsx("span",{children:":"}),wt.jsx("input",{type:"number",value:u,onChange:it=>h(Math.max(0,Math.min(59,parseInt(it.target.value,10)||0))),"aria-label":"",disabled:s.isActive})]})]}),wt.jsx("button",{className:"button button-primary",onClick:H,disabled:s.isActive,children:" "})]}),wt.jsxs("div",{className:"admin-panel",children:[wt.jsx("h3",{children:"  "}),wt.jsx("div",{className:"timer-display-small",children:jS(s.remainingSeconds)}),wt.jsxs("div",{className:"controls",children:[wt.jsx("button",{className:"button button-primary",onClick:Z,disabled:s.totalSeconds===0,children:ut()}),wt.jsx("button",{className:"button button-secondary",onClick:Y,children:""})]}),wt.jsxs("div",{className:"share-controls",children:[wt.jsx("button",{className:"button button-secondary",onClick:mt,children:A?" !":"URL "}),wt.jsx("button",{className:"button button-secondary",onClick:()=>E(!_),children:_?"QR ":"QR  "})]}),_&&wt.jsxs("div",{className:"qr-code-container",children:[wt.jsx("img",{src:`https://api.qrserver.com/v1/create-qr-code/?size=150x150&data=${encodeURIComponent(O)}`,alt:"Timer Share QR Code"}),wt.jsx("p",{children:" QR    ."})]})]})]})},kC=()=>{const[s,t]=En.useState("loading"),[e,r]=En.useState(lf),[o,u]=En.useState(null),h=En.useRef(null),m=En.useCallback(E=>{o&&bg.collection("timers").doc(o).update(E)},[o]);En.useEffect(()=>(h.current&&clearInterval(h.current),s==="admin"&&e.isActive&&!e.isPaused&&(h.current=window.setInterval(()=>{const E=e.remainingSeconds-1;E>=0?m({remainingSeconds:E}):(m({remainingSeconds:0,isActive:!1}),h.current&&clearInterval(h.current))},1e3)),()=>{h.current&&clearInterval(h.current)}),[s,e.isActive,e.isPaused,e.remainingSeconds,m]),En.useEffect(()=>{let E=null;const A=()=>{E&&(E(),E=null);const S=window.location.hash.slice(1),[O,H]=S.split("/");(O==="admin"||O==="view")&&H?(u(H),E=bg.collection("timers").doc(H).onSnapshot(Y=>{Y.exists?r(Y.data()):(console.error("Timer session not found!"),window.location.hash="")}),t(O)):(u(null),r(lf),t("select"))};return window.addEventListener("hashchange",A),A(),()=>{window.removeEventListener("hashchange",A),E&&E()}},[]);const g=async()=>{try{const E=await bg.collection("timers").add(lf);E.id&&(window.location.hash=`admin/${E.id}`)}catch(E){console.error("Error creating new session:",E),alert("  .  .")}},_=()=>{if(s==="loading")return wt.jsx("div",{className:"loading",children:"Loading..."});switch(s){case"admin":return wt.jsx(BC,{appState:e,sessionId:o,updateFirestoreState:m});case"viewer":return wt.jsx(C0,{appState:e});case"select":default:return wt.jsx(LC,{createAdminSession:g})}};return s==="viewer"?wt.jsx(C0,{appState:e}):wt.jsx("div",{className:"app-container",children:_()})},zC=document.getElementById("root"),qC=b1.createRoot(zC);qC.render(wt.jsx(kC,{}));
